<!DOCTYPE html>



  


<html class="theme-next pisces use-motion" lang="zh-Hans">
<head><meta name="generator" content="Hexo 3.8.0">
  <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform">
<meta http-equiv="Cache-Control" content="no-siteapp">
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css">







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css">

<link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=5.1.4">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="Hexo, NexT">










<meta name="description" content="乘风破浪">
<meta property="og:type" content="website">
<meta property="og:title" content="小寒">
<meta property="og:url" content="http://yoursite.com/page/2/index.html">
<meta property="og:site_name" content="小寒">
<meta property="og:description" content="乘风破浪">
<meta property="og:locale" content="zh-Hans">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="小寒">
<meta name="twitter:description" content="乘风破浪">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Pisces',
    version: '5.1.4',
    sidebar: {"position":"left","display":"always","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://yoursite.com/page/2/">





  <title>小寒</title>
  








</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-left 
  page-home">

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">小寒</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle"></p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-窝">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br>
            
            窝
          </a>
        </li>
      
        
        <li class="menu-item menu-item-类">
          <a href="/categories/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br>
            
            类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-档">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br>
            
            档
          </a>
        </li>
      
        
        <li class="menu-item menu-item-于">
          <a href="/about/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br>
            
            于
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2021/01/08/pdf/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Lemon">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/background2.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="小寒">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2021/01/08/pdf/" itemprop="url">前端生成二维码/图片/pdf</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2021-01-08T19:05:21+08:00">
                2021-01-08
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/四院/" itemprop="url" rel="index">
                    <span itemprop="name">四院</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="一、生成二维码-QRCode"><a href="#一、生成二维码-QRCode" class="headerlink" title="一、生成二维码: QRCode"></a>一、生成二维码: QRCode</h1><p>  PC端：qrcode.react<br>  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">import QRCode from &apos;qrcode.react&apos;;</span><br><span class="line">&lt;QRCode value=&#123; &apos;xxx&apos; &#125; size=&#123;100&#125; /&gt;</span><br></pre></td></tr></table></figure></p>
<p>  微信小程序：<a href="https://github.com/yingye/weapp-qrcode" target="_blank" rel="noopener">weapp-qrcode</a><br>  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">import drawQrcode from &apos;weapp-qrcode&apos;;</span><br><span class="line"></span><br><span class="line">drawQrcode(&#123;</span><br><span class="line">  width: 131,</span><br><span class="line">  height: 131,</span><br><span class="line">  canvasId: &apos;myQrcode&apos;,</span><br><span class="line">  _this: this.$scope,</span><br><span class="line">  text: `xxxxxxx`</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">&lt;Canvas style=&quot;width: 131px; height: 131px; transform: translateX(-65.5px);&quot; canvasId=&apos;myQrcode&apos; /&gt;</span><br></pre></td></tr></table></figure></p>
<h1 id="二、html生成图片，下载-保存到本地"><a href="#二、html生成图片，下载-保存到本地" class="headerlink" title="二、html生成图片，下载/保存到本地"></a>二、html生成图片，下载/保存到本地</h1><p>  PC端：html2canvas<br>  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">import html2canvas from &apos;html2canvas&apos;;</span><br><span class="line"></span><br><span class="line">html2canvas(document.querySelector(&apos;.save-png-wrap&apos;)).then((canvas) =&gt; &#123;</span><br><span class="line">  const base64Url = canvas.toDataURL(&apos;image/png&apos;, 1);</span><br><span class="line">  const a = document.createElement(&apos;a&apos;);</span><br><span class="line">  (a.href as any) = base64Url;</span><br><span class="line">  a.download = &apos;交接码.png&apos;;</span><br><span class="line">  a.click();</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></p>
<p>  微信小程序：<a href="https://github.com/Kujiale-Mobile/Painter" target="_blank" rel="noopener">painter</a><br>  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br></pre></td><td class="code"><pre><span class="line">card.tsx</span><br><span class="line"></span><br><span class="line">function _stationAddress(text: string, css: any) &#123;</span><br><span class="line">  const des = &#123;</span><br><span class="line">    type: &apos;text&apos;,</span><br><span class="line">    text: &apos;&apos;,</span><br><span class="line">    css: [&#123;...css&#125;],</span><br><span class="line">  &#125;;</span><br><span class="line">  let textArr = text.split(&apos;&apos;);</span><br><span class="line">  for (let i = 1; i &lt;= (String(text).length/21); i++) &#123;</span><br><span class="line">    textArr.splice(i*21,1,&apos;\n&apos;);</span><br><span class="line">  &#125;</span><br><span class="line">  des.text = textArr.join(&apos;&apos;)</span><br><span class="line">  return des;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">const handleText = (text: string) =&gt; &#123;</span><br><span class="line">  let showText = text;</span><br><span class="line">  if (showText.length &gt; 20) &#123;</span><br><span class="line">    showText = showText.substring(0, 20) + &apos;...&apos;;</span><br><span class="line">  &#125;</span><br><span class="line">  return showText;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">export default class Card &#123;</span><br><span class="line">  palette(data: any) &#123;</span><br><span class="line">    return (&#123;</span><br><span class="line">      width: &apos;750rpx&apos;,</span><br><span class="line">      height: &apos;1334rpx&apos;,</span><br><span class="line">      background: &apos;#eee&apos;,</span><br><span class="line">      views: [</span><br><span class="line">        &#123;</span><br><span class="line">          type: &apos;image&apos;,</span><br><span class="line">          url: &apos;xxxx.png&apos;,</span><br><span class="line">          css: &#123;</span><br><span class="line">            top: &apos;0rpx&apos;,</span><br><span class="line">            left: &apos;0rpx&apos;,</span><br><span class="line">            width: &apos;100%&apos;,</span><br><span class="line">            height: &apos;100%&apos;,</span><br><span class="line">          &#125;,</span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">          type: &apos;text&apos;,</span><br><span class="line">          text: `单号 $&#123;data.waybill_id ? data.waybill_id : &apos;&apos;&#125;`,</span><br><span class="line">          css: [&#123;</span><br><span class="line">            top: &apos;174rpx&apos;,</span><br><span class="line">            left: &apos;70rpx&apos;,</span><br><span class="line">            fontSize: &apos;36rpx&apos;,</span><br><span class="line">            color: &apos;rgba(51,51,51,1)&apos;,</span><br><span class="line">          &#125;],</span><br><span class="line">        &#125;,</span><br><span class="line">        _stationAddress(data.start_station_address ? String(data.start_station_address) : &apos;-&apos;, &#123;</span><br><span class="line">          top: &apos;294rpx&apos;,</span><br><span class="line">          left: &apos;116rpx&apos;,</span><br><span class="line">          fontSize: &apos;28rpx&apos;,</span><br><span class="line">          color: &apos;rgba(153,153,153,1)&apos;,</span><br><span class="line">        &#125;),</span><br><span class="line">        data.qrcode ? &#123;</span><br><span class="line">          type: &apos;qrcode&apos;,</span><br><span class="line">          content: `xxxxxxxx`,</span><br><span class="line">          css: &#123;</span><br><span class="line">            top: &apos;606rpx&apos;,</span><br><span class="line">            left: &apos;244rpx&apos;,</span><br><span class="line">            width: &apos;262rpx&apos;,</span><br><span class="line">            height: &apos;262rpx&apos;,</span><br><span class="line">          &#125;,</span><br><span class="line">        &#125;: null,</span><br><span class="line">      ],</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br></pre></td><td class="code"><pre><span class="line">import Painter from &apos;mina-painter&apos;;</span><br><span class="line">import Card from &quot;./card&quot;;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">export default class HandoverCodeModal extends Component&lt;Props, &#123;&#125;&gt; &#123;</span><br><span class="line">  static defaultProps = &#123; &#125;;</span><br><span class="line"></span><br><span class="line">  constructor(props) &#123;</span><br><span class="line">    super(props);</span><br><span class="line">    this.state = &#123;</span><br><span class="line">      template: &#123;&#125;,</span><br><span class="line">      imagePath: &quot;&quot;,</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  componentDidMount() &#123;</span><br><span class="line">    this.setState(&#123;</span><br><span class="line">      template: new Card().palette(data),</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  onImgOK = (path: any) =&gt; &#123;</span><br><span class="line">    this.setState(&#123;</span><br><span class="line">      imagePath: path</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  // 保存图片</span><br><span class="line">  handleSave = () =&gt; &#123;</span><br><span class="line">    // 方式一：Element is not attached to a Document</span><br><span class="line">    // const query = Taro.createSelectorQuery();</span><br><span class="line">    // const img = query.select(&apos;.save-png-wrap&apos;);</span><br><span class="line"></span><br><span class="line">    // 方式二：Element is not attached to a Document</span><br><span class="line">    // this.refs.img</span><br><span class="line"></span><br><span class="line">    // 方式三： painter</span><br><span class="line">    if ((this.state as any).imagePath) &#123;</span><br><span class="line">      Taro.saveImageToPhotosAlbum(&#123;</span><br><span class="line">        filePath: (this.state as any).imagePath,</span><br><span class="line">        success: function () &#123;</span><br><span class="line">          Taro.showToast(&#123;</span><br><span class="line">            title: &apos;已成功保存到本地相册&apos;,</span><br><span class="line">            icon: &apos;none&apos;,</span><br><span class="line">            duration: 2000</span><br><span class="line">          &#125;);</span><br><span class="line">        &#125;,</span><br><span class="line">        fail: function () &#123;</span><br><span class="line">          Taro.showToast(&#123;</span><br><span class="line">            title: &apos;保存失败&apos;,</span><br><span class="line">            icon: &apos;none&apos;,</span><br><span class="line">            duration: 2000</span><br><span class="line">          &#125;);</span><br><span class="line">        &#125;,</span><br><span class="line">      &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  render() &#123;</span><br><span class="line">    const &#123; template, imagePath &#125; = this.state as any;</span><br><span class="line"></span><br><span class="line">    return (</span><br><span class="line">      &lt;View&gt;</span><br><span class="line">        &lt;Image src=&#123;imagePath&#125; mode=&quot;aspectFill&quot; /&gt;</span><br><span class="line">        &lt;Painter</span><br><span class="line">          palette=&#123;template&#125;</span><br><span class="line">          onImgOK=&#123;this.onImgOK&#125;</span><br><span class="line">          widthPixels=&#123;1000&#125;</span><br><span class="line">        /&gt;</span><br><span class="line">      &lt;/View&gt;</span><br><span class="line">    );</span><br><span class="line">    return null;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="三、html生成pdf"><a href="#三、html生成pdf" class="headerlink" title="三、html生成pdf"></a>三、html生成pdf</h1><p>  html2pdf，它将html生成pdf的原理是：</p>
<ul>
<li>将DOM树转换为canvas对象，可使用html2canvas完成</li>
<li>将canvas转换为图片，可使用canvas.toDataURL完成</li>
<li><p>将图片转换为PDF，可使用<strong>jsPDF</strong>完成</p>
<p>所以，如果系统本身已经使用过html2canvas，那我们直接引用 jsPDF就可以了。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line">import html2canvas from &apos;html2canvas&apos;;</span><br><span class="line">import &#123; jsPDF &#125; from &apos;jspdf&apos;;</span><br><span class="line"></span><br><span class="line">const handleExportPod = () =&gt; &#123;</span><br><span class="line">  // 滚动到页面顶部，避免导出不全</span><br><span class="line">  document.documentElement.scrollTop = 0;</span><br><span class="line"></span><br><span class="line">  html2canvas(document.querySelector(&apos;.ant-layout-content&apos;)).then((canvas) =&gt; &#123;</span><br><span class="line">    const A4_WIDTH = 595.28;</span><br><span class="line">    const A4_HEIGHT = 841.89;</span><br><span class="line">    const contentWidth = canvas.width;</span><br><span class="line">    const contentHeight = canvas.height;</span><br><span class="line"></span><br><span class="line">    // 一页pdf显示html页面生成的canvas高度;</span><br><span class="line">    const pageHeight = (contentWidth / A4_WIDTH) * A4_HEIGHT;</span><br><span class="line">    // 未生成pdf的html页面高度</span><br><span class="line">    let leftHeight = contentHeight;</span><br><span class="line">    // 页面偏移</span><br><span class="line">    let position = 0;</span><br><span class="line">    // a4纸的尺寸[595.28,841.89]，html页面生成的canvas在pdf中图片的宽高</span><br><span class="line">    const imgWidth = A4_WIDTH;</span><br><span class="line">    const imgHeight = (A4_WIDTH / contentWidth) * contentHeight;</span><br><span class="line"></span><br><span class="line">    const pageData = canvas.toDataURL(&apos;image/jpeg&apos;, 1.0);</span><br><span class="line"></span><br><span class="line">    // eslint-disable-next-line new-cap</span><br><span class="line">    const doc = new jsPDF(&apos;p&apos;, &apos;pt&apos;, &apos;a4&apos;);</span><br><span class="line"></span><br><span class="line">    // 有两个高度需要区分，一个是html页面的实际高度，和生成pdf的页面高度(841.89)</span><br><span class="line">    // 当内容未超过pdf一页显示的范围，无需分页</span><br><span class="line">    if (leftHeight &lt; pageHeight) &#123;</span><br><span class="line">      doc.addImage(pageData, &apos;JPEG&apos;, 0, 0, imgWidth, imgHeight);</span><br><span class="line">    &#125; else &#123;</span><br><span class="line">      while (leftHeight &gt; 0) &#123;</span><br><span class="line">        doc.addImage(pageData, &apos;JPEG&apos;, 0, position, imgWidth, imgHeight);</span><br><span class="line">        leftHeight -= pageHeight;</span><br><span class="line">        position -= 841.89;</span><br><span class="line">        // 避免添加空白页</span><br><span class="line">        if (leftHeight &gt; 0) &#123;</span><br><span class="line">          doc.addPage();</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    doc.save(&apos;Test.pdf&apos;);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<p><button id="switch">close/open</button></p>
<script>let flag=false;const oFigure=document.getElementsByClassName('plain');const oSwitch=document.getElementById('switch');oSwitch.onclick=()=>{flag=!flag;const tipEle=[...oFigure];(tipEle || []).forEach((item) => {if(flag){item.style.display='none';}else{item.style.display='block';}})}</script>
          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2021/01/07/js/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Lemon">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/background2.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="小寒">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2021/01/07/js/" itemprop="url">js基础篇</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2021-01-07T17:20:03+08:00">
                2021-01-07
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/基础/" itemprop="url" rel="index">
                    <span itemprop="name">基础</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>js，前端三大基本语言之一。</p>
<p><strong>javaScript是单线程 、解释性、弱类型、兼容于ECMA标准的脚本语言</strong></p>
<ul>
<li>编译性语言：C    C++<br>先把语言编译一遍，形成一个新的文件，再执行。执行速度快、跨平台性差。</li>
<li>解释性语言：js    php     python<br>不需要编译成文件。跨平台性好、执行速度慢。</li>
<li>java结合两者优点，效率折中，java通过javac编译成.class语言，在jvm(Java Virtual Machine)中执行。</li>
</ul>
<blockquote>
<p><strong>ECMA标准</strong> - 为了取得技术优势，微软推出JScript，CEnvi推出ScriptEase，与javaScript一样可在浏览器中运行。为了统一规格，javascript兼容于ECMA（European Computer Manufacturers Association，欧洲计算机制造联合会）标准，因此也称为ECMAScript。<br><strong>DOM</strong>  Document Object Model<br><strong>BOM</strong>  Browser Object Model</p>
</blockquote>
<h1 id="ECMAScript"><a href="#ECMAScript" class="headerlink" title="ECMAScript"></a><font color="#1B90D6">ECMAScript</font></h1><p>行间样式、页面内嵌标签、外部引入（为符合W3C标准：结构、样式、行为相分离，通常会采用外部引入）</p>
<h2 id="一、基础语法"><a href="#一、基础语法" class="headerlink" title="一、基础语法"></a><font color="#5EA4CE">一、基础语法</font></h2><h3 id="1-变量（variable）"><a href="#1-变量（variable）" class="headerlink" title="1. 变量（variable）"></a><strong>1. 变量（variable）</strong></h3><ul>
<li>1) 变量声明</li>
<li><p>2）命名规则<br>变量名只能以英文字母、 _ 、 $开头<br>变量名可以包括英文字母、 _ 、 $和数字<br>不可以用系统的关键字、保留字作为变量名</p>
<p>关键字<br>var void if else switch case default do while try catch throw for continue break return in delete typeof instanceof new this with finally function</p>
<p>保留字<br>boolean const char byte double float int long short enum interface static private protected package public import class super extends throws debugger export implements abstract final goto native synchronized transient volatile</p>
</li>
</ul>
<h3 id="2-值类型"><a href="#2-值类型" class="headerlink" title="2. 值类型"></a><strong>2. 值类型</strong></h3><ul>
<li>不可改变的原始值（栈类型 stack）： number string Boolean undefined null Symbol</li>
<li><p>引用值（堆数据 heap）： object</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">1. num1和num2分别是什么？</span><br><span class="line">    var a = 1;</span><br><span class="line">    var b = 2;</span><br><span class="line">    var num1 = a,b;</span><br><span class="line">    var num2 = (a,b);</span><br><span class="line">2. x的最终值是什么？</span><br><span class="line">    var x = 1;</span><br><span class="line">    if (function f() &#123;&#125;) &#123;</span><br><span class="line">      x += typeof f;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h3 id="3-js语法基本规则"><a href="#3-js语法基本规则" class="headerlink" title="3.  js语法基本规则"></a><strong>3.  js语法基本规则</strong></h3><pre><code>语句后面用分号结束；
书写格式要规范，“ + - = /”两边都应有空格；
js语法错误会引发后续代码终止，但不会影响其他js代码块；
</code></pre><h3 id="4-js运算符"><a href="#4-js运算符" class="headerlink" title="4. js运算符"></a><strong>4. js运算符</strong></h3>  <div class="post-tip">运算操作符:<br>    +                         1）数字运算，字符串连接   2）任何数据+字符串都等于字符串<br>    - * / % = ()             1）优先级“=”最弱  “()”较高<br>    ++ – += -= /= *= %=<br><br>    比较运算符: &gt; &lt; == &gt;= &lt;= != === !==  1）结果为boolean值<br><br>    逻辑运算符: &amp;&amp; || ！ 1）结果为真实值<br><br>    被认定为false的值: undefined null NaN ‘’ “” 0 false<br><br>    typeof: number 、 string 、 boolean 、 undefined 、 object 、 function六种数据类型<br>  </div>

<h3 id="5-类型转换"><a href="#5-类型转换" class="headerlink" title="5. 类型转换"></a><strong>5. 类型转换</strong></h3><pre><code>- 显示类型转换
    Number() String() Boolean() toString() parseInt() parseFloat()
- 隐式类型转换
    isNaN()     被认定NaN:undefined 、 NaN 、{}
    ++  --  +  -（一元正负）
    +
    *、/ %
    &amp;&amp; || !
    &lt;   &gt;   &lt;=   &gt;=
    ==   !=
- 不发生类型转换
    === !==
</code></pre><p>  思考：<br>  1) 请问以下c的值分别是什么？<br>  <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">var a = 1;            var a = 0;              var a = 1;</span><br><span class="line">var b = 2;            var b = 2;              var b = 0;</span><br><span class="line">var c = a &amp;&amp; b;       var c = a &amp;&amp; b;         var c = a &amp;&amp; b;</span><br></pre></td></tr></table></figure></p>
<p>  2) 请问以下c的值分别是什么？<br>  <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">var a = 1;            var a = 0;              var a = 1;</span><br><span class="line">var b = 2;            var b = 2;              var b = 0;</span><br><span class="line">var c = a || b;       var c = a || b;         var c = a || b;</span><br></pre></td></tr></table></figure></p>
<p>  3) 请问以下结果分别是什么？<br>  <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">var a = 0;                       var a = 0;             </span><br><span class="line">var b = 2;                       var b = 2;        </span><br><span class="line">a &lt; b &amp;&amp; document.write(b)       a &gt; b &amp;&amp; document.write(b)</span><br></pre></td></tr></table></figure></p>
<p>  4) 请问以下结果分别是什么？<br>  <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">NaN == NaN  [] == []  undefined == undefined  undefined == null</span><br></pre></td></tr></table></figure></p>
<p>  5) 请问以下的值分别是什么？<br>  <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">var a = 1 + 1 + <span class="string">'aini'</span> + 1 + 1;</span><br><span class="line">var b = 1 + 1 + <span class="string">'aini'</span> + ( 1 + 1 );</span><br></pre></td></tr></table></figure></p>
<p>  6) 请问以下结果是什么？<br>  <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">var a = 1 / 0;</span><br><span class="line">var b = 1 / 0;</span><br><span class="line">document.write(a - b);</span><br></pre></td></tr></table></figure></p>
<p>  7) 请问以下结果分别是什么？<br>  <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">var a = 0;                          var a = 0;</span><br><span class="line">var b = 10;                         var b = 10;</span><br><span class="line">b += a++;                           b += ++a;</span><br><span class="line">document.write(b,a);                document.write(b,a);</span><br></pre></td></tr></table></figure></p>
<p>  8) 请问以下结果分别是什么？<br>  <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">var a = ( 10 * 3 - 4 / 2 + 1 ) % 2,</span><br><span class="line">    b = 3;</span><br><span class="line">b %= a;</span><br><span class="line">document.write(a++, --b);</span><br></pre></td></tr></table></figure></p>
<p>  9) var a = 123; var b = 234;请交换a 和 b的值。</p>
<h3 id="6-条件语句"><a href="#6-条件语句" class="headerlink" title="6. 条件语句"></a><strong>6. 条件语句</strong></h3><p>  if 、 if else 、 if else if<br>  for 、 while 、do while<br>  switch  case default<br>  break 、 continue</p>
<h3 id="7-引用值"><a href="#7-引用值" class="headerlink" title="7. 引用值"></a><strong>7. 引用值</strong></h3><p>1）数组<br>2）对象<br>3）函数</p>
<ol>
<li>函数声明、函数表达式</li>
<li>参数(形参、实参、实参列表)</li>
<li>返回值<br>return什么，函数就等于什么（函数名用小驼峰式 写法）</li>
<li><p>作用域<br>定义：变量（变量作用域又称上下文）和函数生效（能被访问）的区域<br>全局变量、局部变量<br>作用域的访问顺序</p>
<p><em>注意：形参、实参、实参列表（arguments）的映射关系。</em></p>
<blockquote>
<p>大加法</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="function"><span class="title">BigAdd</span></span>() &#123;</span><br><span class="line">  var sum = 0;</span><br><span class="line">  <span class="keyword">for</span> (var i = 0 ; i &lt; arguments.length ; i++) &#123;</span><br><span class="line">    sum += arguments[i];</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="built_in">return</span> sum; </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</blockquote>
</li>
</ol>
<h2 id="二、复杂数据类型"><a href="#二、复杂数据类型" class="headerlink" title="二、复杂数据类型"></a>二、复杂数据类型</h2><h3 id="2-1）函数"><a href="#2-1）函数" class="headerlink" title="2.1）函数"></a>2.1）函数</h3><h4 id="1、预编译"><a href="#1、预编译" class="headerlink" title="1、预编译"></a>1、预编译</h4><p>  （规律）函数声明提升、变量声明提升<br>  （原理）预编译发生在执行的前一刻。一个函数执行，函数会先发生预编译，预编译过程中会产生执行期上下文对象。Activation Object 活动对象（AO）</p>
<blockquote>
<p>四部曲<br>    1、创建AO对象<br>    2、找形参和变量声明，将变量和形参名作为AO属性名，值为undefined<br>    3、将实参值和形参统一<br>    4、在函数体里面找函数声明，值赋予函数体</p>
<pre><code>* 每个函数最后都有一个return，当执行到这一步时，AO被处理掉，函数就不执行了。*
</code></pre></blockquote>
<blockquote>
<p>全局也能预编译<br>    三步：<br>    1、创建GO（Global Object）对象<br>    2、找变量声明，将变量名作为GO属性名，值为undefined<br>    3、找函数声明，值赋予函数体</p>
</blockquote>
<h4 id="2、作用域"><a href="#2、作用域" class="headerlink" title="2、作用域"></a>2、作用域</h4><ul>
<li><p>[[scope]]：每个js函数都是一个对象，对象中有些属性我们可以访问，有些不可以，这些属性仅供js引擎存取，[[scope]]就是其中一个。[[scope]]指的就是我们所说的作用域，存储了运行期上下文对象的集合。</p>
</li>
<li><p>作用域链：[[scope]]这个集合呈链式链接。我们把这个链式链接叫做作用域链。</p>
</li>
<li><p>运行期上下文：当函数执行时，会创建一个称为执行期上下文的内部对象。一个执行期上下文定义了一个函数执行时的环境，函数每次执行时对象的执行期上下文都是独一无二的，所以多次调用一个函数会导致创建多个执行期上下文，当函数执行完，执行上下文被销毁。</p>
</li>
<li><p>查找变量：从作用域链的顶端依次向下查找。</p>
</li>
</ul>
<h4 id="3、闭包"><a href="#3、闭包" class="headerlink" title="3、闭包"></a>3、闭包</h4><blockquote>
<p>当内部函数被保存到外部时，会生成闭包，闭包会导致原有作用域链不释放，造成内存泄露</p>
</blockquote>
<h5 id="闭包的作用"><a href="#闭包的作用" class="headerlink" title="闭包的作用"></a>闭包的作用</h5><p>a) 可以实现公有变量<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">函数累加器（公有变量）</span><br><span class="line"><span class="keyword">function</span> <span class="function"><span class="title">a</span></span>()&#123;                               <span class="keyword">function</span> <span class="function"><span class="title">a</span></span>()&#123;</span><br><span class="line">  var num = 0;                                var num = 0;</span><br><span class="line">  <span class="keyword">function</span> <span class="function"><span class="title">b</span></span>()&#123;                               <span class="keyword">function</span> <span class="function"><span class="title">b</span></span>()&#123;</span><br><span class="line">    console.log(++num);                          console.log(++num);</span><br><span class="line">  &#125;                                           &#125;</span><br><span class="line">  <span class="built_in">return</span>  b;                                  <span class="keyword">function</span> <span class="function"><span class="title">c</span></span>()&#123;</span><br><span class="line">&#125;                                                console.log(--num);</span><br><span class="line">var getCounter = a();                          &#125;</span><br><span class="line">getCounter();    ---&gt; 1                        <span class="built_in">return</span> [b,c];</span><br><span class="line">getCounter();    ---&gt; 2                      &#125;</span><br><span class="line">getCounter();    ---&gt; 3                      var getCounterArr = a();  </span><br><span class="line">                                             getCounterArr[0]();    ---&gt; 1   </span><br><span class="line">                                             getCounterArr[1]();    ---&gt; 0</span><br></pre></td></tr></table></figure></p>
<p>b) 可以做缓存<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="function"><span class="title">eater</span></span>()&#123;</span><br><span class="line">  var food = <span class="string">''</span>;</span><br><span class="line">  <span class="keyword">function</span> <span class="function"><span class="title">eat</span></span>()&#123;</span><br><span class="line">    console.log(food);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">function</span> buy(foods)&#123;</span><br><span class="line">    food = foods;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="built_in">return</span> &#123; eat: eat, buy: buy &#125;;</span><br><span class="line">&#125;</span><br><span class="line">var person = eater();</span><br><span class="line">person.buy(<span class="string">'apple'</span>);</span><br><span class="line">person.eat();          ----&gt; <span class="string">'apple'</span></span><br></pre></td></tr></table></figure></p>
<p>c) 可以实现封装、属性私有化<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="function"><span class="title">wrapper</span></span>()&#123;</span><br><span class="line">  var slice = Array.prototype.slice;</span><br><span class="line">  ...很多变量</span><br><span class="line">  <span class="keyword">function</span> $()&#123;</span><br><span class="line">    ...很多变量</span><br><span class="line">    <span class="keyword">function</span> <span class="function"><span class="title">add</span></span>()&#123;...&#125;</span><br><span class="line">    <span class="keyword">function</span> <span class="function"><span class="title">show</span></span>()&#123;...&#125;</span><br><span class="line">    ...很多函数</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="built_in">return</span> &#123;add: add,show: show...很多函数&#125;;</span><br><span class="line">&#125;</span><br><span class="line">var $ = wrapper();</span><br><span class="line">var obj = $();</span><br></pre></td></tr></table></figure></p>
<font color="red">注：闭包会大量占用内存资源（作用域链不释放），要了解闭包的原理再使用，否则浪费内存。</font>

<h5 id="闭包的高级应用"><a href="#闭包的高级应用" class="headerlink" title="闭包的高级应用"></a>闭包的高级应用</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="function"><span class="title">test</span></span> () &#123;</span><br><span class="line">  var arr = [];</span><br><span class="line">  <span class="keyword">for</span> (var i = 0 ; i &lt; 10 ; i ++) &#123;</span><br><span class="line">    arr[i] = <span class="function"><span class="title">function</span></span>() &#123;</span><br><span class="line">      console.log(i);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="built_in">return</span> arr;</span><br><span class="line">&#125;</span><br><span class="line">var outerArr = <span class="built_in">test</span>();</span><br><span class="line"><span class="keyword">for</span> (var j = 0 ; j &lt; 10 ; j++) &#123;</span><br><span class="line">  outerArr[j]();</span><br><span class="line">&#125;</span><br><span class="line">结果是10个10 ，这是为什么呢？</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="function"><span class="title">test</span></span>() &#123;</span><br><span class="line">  var arr = [];</span><br><span class="line">  <span class="keyword">for</span> (var i = 0 ; i &lt; 10 ; i++ ) &#123;</span><br><span class="line">    arr[i] =(<span class="keyword">function</span>(j)&#123;</span><br><span class="line">      console.log(j);</span><br><span class="line">    &#125;(i))</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="built_in">return</span> arr;</span><br><span class="line">&#125;</span><br><span class="line">var outerArr = <span class="built_in">test</span>();</span><br><span class="line"><span class="keyword">for</span> (var j = 0 ; j &lt; 10 ; j++) &#123;</span><br><span class="line">  outerArr[j]();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="4、立即执行函数"><a href="#4、立即执行函数" class="headerlink" title="4、立即执行函数"></a>4、立即执行函数</h4><ul>
<li><p>此类函数没有生命，在一次执行完后立即释放，适合做初始化工作。</p>
</li>
<li><p>写法：(function())  或   (function)()</p>
<pre><code>函数声明 ❌  函数表达式 ✅
只有函数表达式+()才能执行（能被执行符号执行的表达式，执行一次，函数就被忽略，不能再使用）
</code></pre></li>
<li><p>+ - ！ &amp;&amp; ||可以是一个函数声明变成一个表达式<br>+function test(){}();          —&gt; 可以执行，但是再test()会报错<br>true &amp;&amp; function test(){}();   —&gt; ✅<br>false || function test(){}();  —&gt; ✅</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">jQuery中用到的就是闭包，立即执行函数和原型</span><br><span class="line">(<span class="function"><span class="title">function</span></span> ()&#123;</span><br><span class="line">  <span class="keyword">function</span> <span class="function"><span class="title">jQuery</span></span>()&#123;</span><br><span class="line">    <span class="built_in">return</span> jQuery.prototype.init();</span><br><span class="line">  &#125;</span><br><span class="line">  jQuery.prototype.init = <span class="function"><span class="title">funtcion</span></span>()&#123;...&#125;</span><br><span class="line">  jQuery.prototype.init.prototype = jQuery.prototype;</span><br><span class="line"></span><br><span class="line">  window.$ = jQuery;</span><br><span class="line">&#125;())</span><br><span class="line">这样后续，$就替代jQuery。</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h3 id="2-2）对象"><a href="#2-2）对象" class="headerlink" title="2.2）对象"></a>2.2）对象</h3><h4 id="1、对象"><a href="#1、对象" class="headerlink" title="1、对象"></a>1、对象</h4><h5 id="1）对象的创建方法"><a href="#1）对象的创建方法" class="headerlink" title="1）对象的创建方法"></a>1）对象的创建方法</h5><ul>
<li>字面量<ul>
<li>var obj = {}</li>
<li>缺点：每创建一次只对应一个对象，比较局限。</li>
</ul>
</li>
<li>构造函数<ul>
<li>系统自带：new Object(); Array(); Number(); Boolean; Date();</li>
<li>自定义：一般以一个函数为构造函数，函数名要大写</li>
</ul>
</li>
<li>Object.create(原型)方法</li>
</ul>
<h5 id="2）属性的增删改查"><a href="#2）属性的增删改查" class="headerlink" title="2）属性的增删改查"></a>2）属性的增删改查</h5><blockquote>
<p> 增 obj.attrValue = ‘hahaha’;<br>   删 delete obj.attrValue;<br>   改 obj.haha = ‘heihei’;   obj[haha] = ‘heihei’;  obj[‘haha’] = ‘heihei’;<br>   查 obj.haha   obj[haha]  obj[‘haha’]</p>
</blockquote>
<h5 id="3）包装类"><a href="#3）包装类" class="headerlink" title="3）包装类"></a>3）包装类</h5><p>  String();  Boolean();   Number();</p>
<h5 id="4）对象的枚举"><a href="#4）对象的枚举" class="headerlink" title="4）对象的枚举"></a>4）对象的枚举</h5><ol>
<li><p>for （ in ）<br>不仅可以遍历对象，还可以遍历数组</p>
</li>
<li><p>对象的枚举</p>
<ul>
<li><font color="red">hasOwnProperty</font><br>是否是对象自己的属性。只对自己对象的属性为true，对自己原型上的属性为false，其他更为false。</li>
<li><font color="red">for（ in ）</font><br>可以遍历自己及原型的属性。但是，当原型是系统的Object.prototype的时候不会遍历。</li>
<li><font color="red">in</font><br>是否是对象上或者原型链上的属性。换句话说，只要对象能调用的属性就是true。</li>
<li><font color="red">instanceof</font><br>浅：A是否是B构造函数的构造出来的<br>深：A原型链上有没有B的原型</li>
</ul>
</li>
</ol>
<h4 id="2、原型及原型链"><a href="#2、原型及原型链" class="headerlink" title="2、原型及原型链"></a>2、原型及原型链</h4><h5 id="原型"><a href="#原型" class="headerlink" title="原型"></a>原型</h5><blockquote>
<p>定义：原型是function对象的一个属性，它定义了构造函数制造出的对象的公共祖先，通过该构造函数产生的对象，可以继承该原型的属性和方法，原型也是对象。</p>
</blockquote>
<blockquote>
<p>每个构造函数都有原型prototype，prototype也是对象<br>  每个对象都有<strong>proto</strong>属性， __proto__ 的值就是构造函数的原型prototype<br>  prototype 下有个属性：constructor指向该对象的构造函数 或 该构造函数自己。</p>
</blockquote>
  <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="function"><span class="title">Factory</span></span>()&#123;&#125;</span><br><span class="line">Factory.prototype.name = <span class="string">'wang'</span></span><br><span class="line">var obj = new Factory();</span><br><span class="line"></span><br><span class="line">obj.__proto__                  ---&gt;      &#123;name: <span class="string">"wang"</span>, constructor: ƒ&#125;</span><br><span class="line">Factory.prototype              ---&gt;      &#123;name: <span class="string">"wang"</span>, constructor: ƒ&#125;</span><br><span class="line">obj.__proto__.constructor      ---&gt;       ƒ <span class="function"><span class="title">Factory</span></span>()&#123;&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>1） 构造函数.prototype.属性  是增加或修改原型的属性<br>      构造函数.prototype = {…} 是重写，覆盖本来的原型<br>  2） 构造函数构造出的对象，在出生（定义）时就知道了原型的地址。这时是谁就是谁，你可以给我的原型prototype增加或修改属性，但是如果你在我出生后在修改构造函数的原型，就和我没关系了。我的原型还是我出生时候的原型。</p>
</blockquote>
<h5 id="原型链"><a href="#原型链" class="headerlink" title="原型链"></a>原型链</h5><ul>
<li><p>谁调用的方法，方法内部的this就指向谁，没人调用则指向全局对象（window）</p>
</li>
<li><p>绝大多数对象的最终都会继承自Object.prototype</p>
</li>
<li><p>Object.create(null)，null创建出来的对象没有原型，NoPrototies</p>
</li>
</ul>
<h4 id="3、this指向问题"><a href="#3、this指向问题" class="headerlink" title="3、this指向问题"></a>3、this指向问题</h4><p>以下结果是什么，为什么？<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">var num = 123;</span><br><span class="line">num.toString();</span><br></pre></td></tr></table></figure></p>
<p>结果是”123”，因为原型链中从底部向顶部查找toString()方法，数字的Number包装类里就有toString()方法，所以没有继续找Object的toString()方法。</p>
<h5 id="1）-call的实现原理"><a href="#1）-call的实现原理" class="headerlink" title="1） call的实现原理"></a>1） call的实现原理</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">Function.prototype.myCall = <span class="keyword">function</span>(thisArg, ...args) &#123;</span><br><span class="line">  <span class="keyword">if</span> (typeof this !== <span class="string">'function'</span>) &#123;</span><br><span class="line">    throw new TypeError(<span class="string">'error'</span>);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  thisArg = thisArg || window;</span><br><span class="line">  thisArg.func = this;</span><br><span class="line"></span><br><span class="line">  <span class="built_in">let</span> fn = thisArg.func(...args);</span><br><span class="line">  delete thisArg.func;</span><br><span class="line">  <span class="built_in">return</span> fn;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="built_in">test</span>(params) &#123;</span><br><span class="line">  console.log(this.name, params);</span><br><span class="line">&#125;</span><br><span class="line">var name = <span class="string">'全局的名字'</span>;</span><br><span class="line">var obj = &#123;</span><br><span class="line">  name: <span class="string">'obj的名字'</span>,</span><br><span class="line">&#125;;</span><br><span class="line"><span class="built_in">test</span>(<span class="string">'测试参数-无人调用'</span>);                    ----&gt;    全局的名字   测试参数-无人调用</span><br><span class="line">test.call(obj, <span class="string">'测试参数-obj调用'</span>);          ----&gt;    obj的名字    测试参数-obj调用</span><br></pre></td></tr></table></figure>
<h5 id="2）apply的实现原理"><a href="#2）apply的实现原理" class="headerlink" title="2）apply的实现原理"></a>2）apply的实现原理</h5><p>apply的实现原理和call一样，只不过是传入的参数不同处理不同而已。<br>其实,apply应该还要校验：参数只能有两个，且第二个参数必须是数组，否则会报错。<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">//Function.prototype.apply = <span class="keyword">function</span>(thisArg,args)</span><br><span class="line">//去除参数的第一个值后执行这个添加的函数</span><br><span class="line">const res = thisArg.fn(...args);//只是参数处理不用，args这里只接受数组</span><br></pre></td></tr></table></figure></p>
<h5 id="3）bind的实现原理"><a href="#3）bind的实现原理" class="headerlink" title="3）bind的实现原理"></a>3）bind的实现原理</h5><p>将绑定函数当作构造函数使用，bind 提供的 this 指向无效，但是还是可以预设参数<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> Test3(a, b) &#123;</span><br><span class="line">  this.a = a;</span><br><span class="line">  this.b = b;</span><br><span class="line">&#125;</span><br><span class="line">Test3.prototype.add = <span class="function"><span class="title">function</span></span> () &#123;</span><br><span class="line">  <span class="built_in">return</span> this.a + this.b;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 如果不用 bind，正常来说这样处理</span></span><br><span class="line">var t1 = new Test3(1, 2);</span><br><span class="line">t1.add(); <span class="comment"># 3, this 指向 t1</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 使用 bind</span></span><br><span class="line">var NewTest3 = Test3.bind(null, 3);</span><br><span class="line">var t2 = new NewTest3(4);</span><br><span class="line">t2.add(); <span class="comment"># 7, this 指向 t2</span></span><br></pre></td></tr></table></figure></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">Function.prototype.bind = <span class="keyword">function</span> (oThis) &#123;</span><br><span class="line">  <span class="keyword">if</span>(typeof this !== <span class="string">'function'</span>) &#123;</span><br><span class="line">    throw new TypeError(<span class="string">'Function.prototype.bind - what is trying to bebound is noe callable'</span>);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  var aArgs = Array.prototype.slice.call(arguments, 1),</span><br><span class="line">      fToBind = this,</span><br><span class="line">      fNop = <span class="function"><span class="title">function</span></span> () &#123;&#125;,</span><br><span class="line">      fBound = <span class="function"><span class="title">function</span></span> () &#123;</span><br><span class="line">        <span class="comment"># 当通过new方法调用时，this就是fNop的一个实例</span></span><br><span class="line">        <span class="built_in">return</span> fToBind.apply(this instanceof fNop ? this : (oThis || this) , aArgs.concat(Array.prototype.slice.call(arguments)));</span><br><span class="line">      &#125;;</span><br><span class="line"></span><br><span class="line">  fNop.prototype = this.prototype;</span><br><span class="line">  fBound.prototype = new fNop();</span><br><span class="line">  <span class="built_in">return</span> fBound;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>call 、 apply 和 bind的区别：<br>1）apply、call 都是直接执行调用函数，并让this执行第一个参数<br>              二者只是传参格式不同：call(obj,arguments1, arguments2…)<br>                                apply(obj,[arguments1, arguments2…])<br>2）bind绑定this后返回一个函数闭包，不直接执行。（将绑定函数当做构造函数使用，bind 提供的 this 指向无效，但是还是可以预设参数）</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">function test()&#123;var a = 12;this.sayA = function()&#123;console.log(this.a);&#125;&#125;</span><br><span class="line">var oTest = new test()</span><br><span class="line">oTest.sayA();   ---&gt; undefined</span><br></pre></td></tr></table></figure>
<p>阿里经典面试题：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">var name = &apos;222&apos;;</span><br><span class="line">var a = &#123;</span><br><span class="line">  name: &apos;111&apos;,</span><br><span class="line">  say: function () &#123;</span><br><span class="line">    console.log(this.name);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line">a.say();</span><br><span class="line">var b = &#123;</span><br><span class="line">  name: &apos;333&apos;,</span><br><span class="line">  say: function (fun) &#123;</span><br><span class="line">    fun();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line">b.say(a.say);</span><br><span class="line">b.say = a.say;</span><br><span class="line">b.say();</span><br></pre></td></tr></table></figure></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">function test() &#123;foo = 2; this.foo = 4; console.log(this.foo);&#125;</span><br><span class="line">test();</span><br><span class="line">new test();</span><br><span class="line"></span><br><span class="line">function test() &#123;this.foo = 4;foo = 2; console.log(this.foo);&#125;</span><br><span class="line">test();</span><br><span class="line">new test();</span><br></pre></td></tr></table></figure>
<p>先查AO，再查GO。<br>局部变量 - this - 全局</p>
<h4 id="4、继承发展史"><a href="#4、继承发展史" class="headerlink" title="4、继承发展史"></a>4、继承发展史</h4><p>1、传统形式：会沿着原型链一脉相承，继承父辈祖辈的所有属性，但是可能很多属性是没用的。<br>2、借用构造函数：不能继承借用构造函数的原型，每次构造函数都要多走一个函数。（call/apply）<br>3、共享原型：不能随便改动自己的原型</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="function"><span class="title">Fathor</span></span> () &#123;...&#125;</span><br><span class="line">var oFather = new Father();</span><br><span class="line"></span><br><span class="line">Son.prototype = Fathor.prototype;</span><br><span class="line"><span class="keyword">function</span> <span class="function"><span class="title">Son</span></span> () &#123;...&#125;</span><br><span class="line">var oSon = new Son();</span><br></pre></td></tr></table></figure>
<p>这样，共用属性都放在原型里，再共享原型（继承），但是，如果其中更改了Son的原型,这样Father的原型也随之改变（如：Son.prototype.name = ‘wang’;则Father.prototype.name也会如上）。这样的相互影响有时并不是我们想要的。</p>
<p>4、圣杯模式<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="function"><span class="title">Father</span></span> () &#123;&#125;</span><br><span class="line"><span class="keyword">function</span> <span class="function"><span class="title">Son</span></span> () &#123;&#125;</span><br><span class="line"><span class="keyword">function</span> inherit (target, origin) &#123;</span><br><span class="line">  var oFn = <span class="function"><span class="title">function</span></span> () &#123;&#125;;</span><br><span class="line">  oFn.prototype = origin.prototype;</span><br><span class="line">  target.prototype =  new oFn();</span><br><span class="line">&#125;</span><br><span class="line">inherit(Son,Father);</span><br><span class="line">var oSon = new Son();</span><br><span class="line">var oFather = new Father();</span><br><span class="line"></span><br><span class="line">Son.prototype.name = <span class="string">'wang'</span>;</span><br><span class="line">oSon.name          ----&gt;    <span class="string">'wang'</span></span><br><span class="line">oFather.name       ----&gt;    undefined</span><br></pre></td></tr></table></figure></p>
<h4 id="5、模块化开发"><a href="#5、模块化开发" class="headerlink" title="5、模块化开发"></a>5、模块化开发</h4><h5 id="1）-命名空间"><a href="#1）-命名空间" class="headerlink" title="1） 命名空间"></a>1） 命名空间</h5><ol>
<li>污染全局<br>是指你在a.js中var a = 10; 在 b.js中var a = 20; 如果你同事应用a.js和b.js，那么变量a就会冲突，究竟用a.js里的a还是b.js里的a。（不同的人开发难免会出现相同命名） </li>
<li>模块化开发<br>将一个完整的项目，分解成多个模块，不同的人开发不同的模块，最后协同整合。</li>
<li>命名空间<br>模块化开发的方式，很容易发生全局变量污染的问题，因此我们需要管理变量，可以采用命名空间的方式管理变量。</li>
</ol>
<h5 id="2）-匿名函数自执行-封闭作用域"><a href="#2）-匿名函数自执行-封闭作用域" class="headerlink" title="2） 匿名函数自执行 封闭作用域"></a>2） 匿名函数自执行 封闭作用域</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">var jQuery = (<span class="function"><span class="title">function</span></span> () &#123;                     <span class="function"><span class="title">function</span></span> () &#123;</span><br><span class="line">  <span class="comment"># AO -&gt; jQuery(功能)                             # AO -&gt; jQuery(功能)            </span></span><br><span class="line">  var slice=Array.prototype.slice;                var slice = Array.prototype.slice;</span><br><span class="line">  var toString=Object,prototype.toString;         var toString = Object,prototype.toString;</span><br><span class="line">  ...                                             ...</span><br><span class="line">  <span class="keyword">function</span> <span class="function"><span class="title">jQuery</span></span> ()&#123;...使用变量slice toString&#125;     <span class="keyword">function</span> <span class="function"><span class="title">jQuery</span></span> ()&#123;...使用变量slice toString&#125;</span><br><span class="line">  </span><br><span class="line">  <span class="built_in">return</span> jQuery;                                   window.$ = jQuery;</span><br><span class="line">&#125;)();                                            &#125;)();</span><br><span class="line">匿名函数自执行+封闭作用域+闭包                        匿名函数自执行+封闭作用域</span><br><span class="line">使原有的AO不释放，通过<span class="built_in">return</span>赋给变量                  将jQuery赋给全局变量</span><br><span class="line">该变量有函数功能，但无法使用其中的变量                  该变量有函数功能，但无法使用其中的变量</span><br></pre></td></tr></table></figure>
<ul>
<li><p>测试：这种解决办法能有效管理变量，防止变量污染</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">ctl.js                                           cst.js</span><br><span class="line">(<span class="function"><span class="title">function</span></span>()&#123;                                     (<span class="function"><span class="title">function</span></span>()&#123;</span><br><span class="line">  var name = <span class="string">'ctl'</span>;                                var name = <span class="string">'cst'</span>;</span><br><span class="line">  <span class="keyword">function</span> <span class="function"><span class="title">show</span></span> () &#123;                               var age = 18;</span><br><span class="line">    console.log(name,  age);                       <span class="keyword">function</span> <span class="function"><span class="title">show</span></span> () &#123;</span><br><span class="line">  &#125;                                                   console.log(name,  age);&#125;</span><br><span class="line">  <span class="keyword">function</span> <span class="function"><span class="title">change</span></span>() &#123;                              <span class="keyword">function</span> <span class="function"><span class="title">change</span></span>() &#123;</span><br><span class="line">    name += <span class="string">'10'</span>;                                     name += <span class="string">'10'</span>;</span><br><span class="line">  &#125;                                                 &#125;</span><br><span class="line"></span><br><span class="line">  window.ctlMake = &#123;show: show, change: change&#125;;    window.cstMake = &#123;show: show, change: change&#125;;</span><br><span class="line">&#125;)();                                              &#125;)();</span><br><span class="line"></span><br><span class="line">index.html</span><br><span class="line">&lt;script src = <span class="string">'ctl.js'</span>&gt;&lt;/script&gt;</span><br><span class="line">&lt;script src = <span class="string">'cst.js'</span>&gt;&lt;/script&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">  cstMake.show();           -----&gt; <span class="string">"cst"</span></span><br><span class="line">  ctlMake.show();           -----&gt; 报错：age is not defined</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>
<p><font color="red">* 每一个功能入口就是执行自己的函数，调用自己的变量，不会相互污染。</font><br>PS：当然啦，现在的前端自动化构建工具是，就不用麻烦了。</p>
</li>
</ul>
<h5 id="3）-链式调用模式"><a href="#3）-链式调用模式" class="headerlink" title="3） 链式调用模式"></a>3） 链式调用模式</h5><p>思考问题：</p>
<ol>
<li>如何实现链式调用模式（模仿jquery）</li>
<li>obj.eat().drink().play().laugh().sleep();<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">var mrDeng = &#123;</span><br><span class="line">  eat: <span class="function"><span class="title">function</span></span> () &#123;</span><br><span class="line">    console.log(<span class="string">'eat'</span>);</span><br><span class="line">    reeturn this;</span><br><span class="line">  &#125;,</span><br><span class="line">  drink: <span class="function"><span class="title">function</span></span> () &#123;</span><br><span class="line">    console.log(<span class="string">'drink'</span>);</span><br><span class="line">    reeturn this;</span><br><span class="line">  &#125;,</span><br><span class="line">  paly: <span class="function"><span class="title">function</span></span> () &#123;</span><br><span class="line">    console.log(<span class="string">'paly'</span>);</span><br><span class="line">    reeturn this;</span><br><span class="line">  &#125;,</span><br><span class="line">  laugh: <span class="function"><span class="title">function</span></span> () &#123;</span><br><span class="line">    console.log(<span class="string">'laugh'</span>);</span><br><span class="line">    reeturn this;</span><br><span class="line">  &#125;,</span><br><span class="line">  sleep: <span class="function"><span class="title">function</span></span> () &#123;</span><br><span class="line">    console.log(<span class="string">'sleep'</span>);</span><br><span class="line">    reeturn this;</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
</li>
</ol>
<p>jQuery有一个经典的使用方法：通过$()将标签选中，包装成一个对象（如$(‘div’)），这个对象中有很多方法。可以调用一些方法去操作你选中的那个标签，可.css()再。css()，链式调用<br>$(‘div’).css().css().attr().addClass();</p>
<h4 id="6、克隆"><a href="#6、克隆" class="headerlink" title="6、克隆"></a>6、克隆</h4><p>判断数据类型的四种方式：typeof toString instaceof contructor </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line">浅克隆：</span><br><span class="line">function cloneFactory (copy, origin) &#123;</span><br><span class="line">  copy = copy || &#123;&#125;;</span><br><span class="line">  for (var props in origin) &#123;</span><br><span class="line">    copy[props] = origin[props];</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">深克隆：</span><br><span class="line">function deepClone (copy, origin) &#123;</span><br><span class="line">  copy = copy || &#123;&#125;;</span><br><span class="line">  var arrStr = &apos;[Object Array]&apos;;</span><br><span class="line">  for (var props in origin) &#123;</span><br><span class="line">    if (origin[props] !== null &amp;&amp; (origin[props] === &apos;object&apos;) ) &#123;</span><br><span class="line">      if (Object.prototype.toString.call(origin[props]) === arrStr) &#123;</span><br><span class="line">        copy[props] = [];</span><br><span class="line">      &#125; else &#123;</span><br><span class="line">         copy[props] = &#123;&#125;;</span><br><span class="line">      &#125;</span><br><span class="line">      deepClone(copy[props], origin[props]);</span><br><span class="line">    &#125; else &#123;</span><br><span class="line">      copy[props] = origin[props];</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">深克隆优化版本：</span><br><span class="line">function deepCloneFactory(copy, origin) &#123;</span><br><span class="line">  copy = copy || &#123;&#125;;</span><br><span class="line">  var arr = [],obj = &#123;&#125;;</span><br><span class="line"></span><br><span class="line">  for (var props in origin) &#123;</span><br><span class="line">    if (origin[props] === copy[props]) &#123;</span><br><span class="line">      continue;</span><br><span class="line">    &#125;</span><br><span class="line">    for (var attrs in copy) &#123;</span><br><span class="line">      if (attrs === props) &#123;</span><br><span class="line">        if (Object.prototype.toString.call(origin[props]) === &apos;[object Array]&apos;) &#123;</span><br><span class="line">          arr = copy[attrs];</span><br><span class="line">        &#125; else &#123;</span><br><span class="line">          obj = copy[attrs];</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    if (origin.hasOwnProperty(props)) &#123;</span><br><span class="line">      if (origin[props] !== null &amp;&amp; typeof origin[props] === &apos;object&apos;) &#123;</span><br><span class="line">        if (Object.prototype.toString.call(origin[props] === &apos;[object Array]&apos;)) &#123;</span><br><span class="line">          copy[props] = arr;</span><br><span class="line">        &#125; else &#123;</span><br><span class="line">          copy[props] = obj;</span><br><span class="line">        &#125;</span><br><span class="line">        deepCloneFactory(copy[props], origin[props]);</span><br><span class="line">      &#125; else &#123;</span><br><span class="line">        copy[props] = origin[props];</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>JSON.parse(JSON.stringify())</p>
<h3 id="2-3）数组"><a href="#2-3）数组" class="headerlink" title="2.3）数组"></a>2.3）数组</h3><h4 id="数组"><a href="#数组" class="headerlink" title="数组"></a>数组</h4><p>1、创建方式<br>  1）new Array(length/content)<br>  2）字面量</p>
<p>2、数组的读和写<br>  <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">arr[num]               <span class="comment"># 不可溢出读</span></span><br><span class="line">arr[num] = xxx;        <span class="comment"># 可溢出读</span></span><br></pre></td></tr></table></figure></p>
<p>3、数组的常用方法</p>
<ol>
<li><p>改变原数组<br>push     尾部加值，改变原数组，返回数组长度<br>pop      尾部弹指，改变原数组，返回被弹出的值<br>shift    首部弹值，改变原数组，返回被弹出的值<br>unshift  首部加值，改变原数组，返回数组长度<br>splice   在数组任意位加或删，返回截取的数组<br>reverse  倒序<br>sort     只能排单位数字，可</p>
<pre><code>arr.sort(function(a,b) {
  return a-b;
})
</code></pre><p><font color="red">* 让有序数组输出乱序：</font> </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">var arr = [1,2,3,4,5,6,7,8,9];</span><br><span class="line">console.log(arr.sort(() =&gt; Math.random()-0.5));</span><br></pre></td></tr></table></figure>
</li>
<li><p>不改变原数组<br>concat    返回连接后的数组，不改变原数组<br>join -&gt; split<br>toString<br>slice</p>
<p><font color="orange">forEach</font>  只是简单的将数组遍历，类似于军人接受检阅，但是检阅结束并不会返回任何东西，也不会改变原数组,forEach的返回永远是undefind<br><font color="orange">map</font>      可以比喻成去超市买东西，你拿了一个物品清单，然后服务员帮你拿好东西，返回给你一个物品的新数组，但是对清单原数组不发生改变<br><font color="orange">filter</font>   就是让男生排队身高高于180的就归入到新数组中，最后返回一个里面装着所有180+的男生的数组，不改变原数组<br><font color="orange">reduce</font>    主要是为了对所有数组进行累加，最后返回一个值，不改变原数组，类似让男生把排队把把身高加起来<br><font color="orange">find</font>     就是你去找人想找一个180的男生帮你去搬砖，只要找到第一个就停止遍历，因为只要找一个，为了减少无用的操作，虽然其他方法也能实现同样的要过，但是最好用find()</p>
</li>
</ol>
<h4 id="类数组"><a href="#类数组" class="headerlink" title="类数组"></a>类数组</h4><ol>
<li>可以利用属性名模拟数组的特性</li>
<li>可以动态的增长length属性</li>
<li>如果强行让类数组调用push方法，则会根据length属性值的位置进行属性的扩充</li>
</ol>
<ul>
<li>要有索引（数字）属性，必须有length属性，最好加上push可以向数组一样用。如果再加上splice，控制台输出和数组一样。</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">1. 问题1:</span><br><span class="line">  var obj = &#123;</span><br><span class="line">    2: &apos;a&apos;,</span><br><span class="line">    3: &apos;b&apos;,</span><br><span class="line">    length: 2,</span><br><span class="line">    push: Array.prototype.push</span><br><span class="line">  &#125;;</span><br><span class="line">  obj.push(&apos;c&apos;);</span><br><span class="line">  obj.push(&apos;d&apos;);</span><br><span class="line">  console.log(obj);  ---&gt; &#123;2: &quot;c&quot;, 3: &quot;d&quot;, length: 4, push: ƒ&#125;</span><br><span class="line"></span><br><span class="line">2. 问题2：编写方法对所有数据类型都能判断准确。</span><br><span class="line">  function myType (myVar) &#123;</span><br><span class="line">    var cache = &#123;</span><br><span class="line">      &apos;[object Number]&apos;: &apos;number-object&apos;,</span><br><span class="line">      &apos;[object String]&apos;: &apos;string-object&apos;,</span><br><span class="line">      &apos;[object Boolean]&apos;: &apos;bool-object&apos;,</span><br><span class="line">      &apos;[object Array]&apos;: &apos;array&apos;,</span><br><span class="line">      &apos;[object Object]&apos;: &apos;object&apos;,</span><br><span class="line">    &#125;;</span><br><span class="line">    if (myVar === null) &#123;</span><br><span class="line">      return &apos;null&apos;;</span><br><span class="line">    &#125; else if (typeof myVar === &apos;object&apos;) &#123;</span><br><span class="line">      return cache[Object.prototype.toString.call(myVar)];</span><br><span class="line">    &#125; else &#123;</span><br><span class="line">      return typeof myVar;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>
<p><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br></p>
<h1 id="DOM"><a href="#DOM" class="headerlink" title="DOM"></a><font color="#FF69B4">DOM</font></h1><p>DOM（Document Object Model），定义了表达和修改文档所需对象，定义了这些对象之间的行为和属性以及这些对象之间的关系。DOM对象即为宿主对象，由浏览器厂商定义，用来操作html和css功能的一类对象的集合。也有人称DOM是对HTML以及XML的标准编程接口。</p>
<p>js不能直接操作html标签，但是浏览器提供了一类对象，可以作为js操作html的桥梁。</p>
<h2 id="一、基本操作"><a href="#一、基本操作" class="headerlink" title="一、基本操作"></a>一、基本操作</h2><h3 id="1）DOM节点"><a href="#1）DOM节点" class="headerlink" title="1）DOM节点"></a>1）DOM节点</h3><h4 id="查看元素节点"><a href="#查看元素节点" class="headerlink" title="查看元素节点"></a>查看元素节点</h4><p>  document代表整个文档</p>
<p>  document.getElementById(); 在ie8以下的浏览器，不取区分id大小写，而且也返回匹配name属性的元素。<br>  document.getElementsByClassName(); ie8及以下的ie版本中没有，可以多个class一起。<br>  document.getElementsByTagName();<br>  document.getElementsByName(); 需注意，只有部分标签name可生效（表单、表单元素、img、iframe）。<br>  querySelector(); css选择器，在ie7及以下的版本中没有。<br>  querySelectorAll(); css选择器，在ie7及以下的版本中没有。</p>
  <div class="post-warning">注：querySelector和querySelectorAll选出的元素不是实时的，是一个副本，一个快照。其他方法选出的dom都是实时的。<br>    1）querySelector()只返回一个<br>    2）querySelectorAll()返回所有但不更新<br>    3）其他返回所有并更新<br>  </div>

<h4 id="遍历节点树"><a href="#遍历节点树" class="headerlink" title="遍历节点树"></a>遍历节点树</h4><p>  parentNode 父节点（最顶端的parentNode是#document）<br>  childNodes 子节点们<br>  firstChild 第一个子节点<br>  lastChild  最后一个子节点<br>  nextSibling 后一个兄弟节点<br>  previousSibling 前一个兄弟节点</p>
<p>  节点类型：<br>  元素节点  – 1<br>  属性节点  – 2<br>  文本节点  – 3<br>  注释节点  – 8<br>  document – 9<br>  DocumentFragment – 11</p>
<p>  获取节点类型 nodeType</p>
<h4 id="基于元素节点树的遍历"><a href="#基于元素节点树的遍历" class="headerlink" title="基于元素节点树的遍历"></a>基于元素节点树的遍历</h4><p>  parentElement 返回当前元素的父节点<br>  children 只返回当前元素的元素子节点<br>  node.childElementCount === node.children.length 单签蒜素节点的子元素节点个数（IE不兼容）<br>  firstElementChild 返回第一个元素节点（IE不兼容）<br>  lastElementChild 返回最后一个元素节点（IE不兼容）<br>  nextElementSibling / previousElementSibling 返回后一个/前一个兄弟元素节点（IE不兼容）</p>
<h4 id="节点的属性和方法"><a href="#节点的属性和方法" class="headerlink" title="节点的属性和方法"></a>节点的属性和方法</h4><blockquote>
<p>属性：<br>  nodeName 元素的标签名，以大写形式表示，只读<br>  nodeValue Text节点或comment节点的文本内容，可读写<br>  nodeType 该节点的类型，只读<br>  style css属性，可读写<br>  attribute Element节点的属性集合(只有元素节点才有attribute，它是整个dom节点的属性集合，是一个类数组)</p>
</blockquote>
<blockquote>
<p>方法：<br>  Node.hasChildNodes();<br>  Node.setAttribute(‘attri-xxx’,’value-xxx’);<br>  Node.getAttribute(‘attri-xxx’);</p>
</blockquote>
<h4 id="对节点的增删改"><a href="#对节点的增删改" class="headerlink" title="对节点的增删改"></a>对节点的增删改</h4><blockquote>
<p>增<br>  document.createElement();<br>  document.createTextNode();<br>  document.createComment();<br>  document.createDocumentFragment();</p>
</blockquote>
<blockquote>
<p>插<br>  PARENTNODE.appendChild();<br>  PARENTNODE.insertBefore(a,b);</p>
</blockquote>
<blockquote>
<p>删<br>  parent.removeChild();</p>
</blockquote>
<blockquote>
<p>替换<br>  parent.replaceChild();</p>
</blockquote>
<h3 id="2-DOM树"><a href="#2-DOM树" class="headerlink" title="2) DOM树"></a>2) DOM树</h3>  <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">DOM树：</span><br><span class="line"></span><br><span class="line">       - Document - HTMLDocument       - HTMLHeadElement </span><br><span class="line">      |                  - Text       |- HTMLBodyElement</span><br><span class="line">      |- CharactorData -|             |- HTMLTitleElement</span><br><span class="line">Node -|                  - Comment    |- HTMLParagraphElement</span><br><span class="line">      |- Element - HTMLElement ------ |- HTMLInputElement</span><br><span class="line">      |                                - ... etc</span><br><span class="line">       - Attr</span><br></pre></td></tr></table></figure>
<p>  Document是一个构造函数，但是用户不能new Document()创建新对象。<br>  document - HTMLDocument - Document:<br>  document是HTMLDocument构造函数的实例，原型是HTMLDocument.prototype。<br>  HTMLDocument.prototype也是对象，原型是Document.prototype。<br>  HTMLDocument.prototype.__proto__ -&gt; Document.prototype 构成原型链。</p>
  <div class="post-warning">观察DOM结构树，很容易发现，若在共有原型上加属性和方法，那么下面的构造函数的对象都可用。</div>

<blockquote>
</blockquote>
<pre><code>getElementById() 定义在Document.prototype上，即Element节点上不能使用。

getElementsByName() 定义在HTMLDocument.prototype上，即非html中的document意外不能使用（xml document Element）

getElementsByTagName() 定义在Document.prototype和Element.prototype上

Document.prototype上定义了documentElement属性，指代文档的根元素，在HTML文档中，他总是指代&lt; html&gt;&lt;\/html&gt;元素（只读不可写）。

HTMLDocument.prototype定义了一些常用的属性，body、head分别指代HTML文档中的&lt; body&gt;&lt;\/body&gt;&lt; head&gt;&lt;\/head&gt;标签。

getElementsByClassName()、querySelectorAll()、querySelectorAll、querySelector在Document，Element类中均有定义。
</code></pre><ul>
<li><p>节点的一些属性和方法<br>innerHTML<br>innerText(旧版本火狐不兼容)/textContent(老版本IE不兼容，主流浏览器一般用的都是innerText)</p>
<p>ele.setAttribute();<br>ele.getAttribute();</p>
</li>
</ul>
<h3 id="3-DOM基本操作"><a href="#3-DOM基本操作" class="headerlink" title="3) DOM基本操作"></a>3) DOM基本操作</h3><h4 id="日期对象"><a href="#日期对象" class="headerlink" title="日期对象"></a>日期对象</h4><blockquote>
<p>Date<br>var oDate = new Date();</p>
<p>// 获取<br>oDate.toString();<br>oDate.getFullYear(); 年<br>oDate.getMonth(); 月<br>oDate.getDate(); 日期<br>oDate.getDay(); 天数<br>oDate.getHours(); 时<br>oDate.getMinutes(); 分<br>oDate.getSeconds(); 秒<br>oDate.getMilliseconds(); 毫秒<br>oDate.getTime(); 自1970年1月1日至今的毫秒数</p>
<p>// 设置<br>oDate.setFullYear(); 年<br>oDate.setMonth(); 月<br>oDate.setDate(); 日期<br>oDate.setDay(); 天数<br>oDate.setHours(); 时<br>oDate.setMinutes(); 分<br>oDate.setSeconds(); 秒<br>oDate.setMilliseconds(); 毫秒<br>oDate.setTime(); 自1970年1月1日至今的毫秒数</p>
</blockquote>
<h4 id="js定时器"><a href="#js定时器" class="headerlink" title="js定时器"></a>js定时器</h4><p>  setInterval();<br>  setTimeout();<br>  clearInterval();<br>  clearTimeout();</p>
<p>  全局对象window上的方法，内部函数this指向window。</p>
<h4 id="查看滚动条的滚动距离"><a href="#查看滚动条的滚动距离" class="headerlink" title="查看滚动条的滚动距离"></a>查看滚动条的滚动距离</h4><p>  window.pageXOffset、window.pageXOffset (IE及IE8以下不兼容)<br>  document.body.scrollLeft、document.body.scrollTop (兼容性比较混乱)<br>  document.documentElement.scrollLeft、 document.documentElement.scrollTop (兼容性比较混乱)</p>
<h4 id="查看视口尺寸"><a href="#查看视口尺寸" class="headerlink" title="查看视口尺寸"></a>查看视口尺寸</h4><p>  window.innerWidth、window.innerHeight (IE及IE8以下不兼容)<br>  document.documentElement.clientWidth、document.documentElement.clientHeight (标准模式下，任意浏览器都兼容)<br>  document.body.clientWidth、 document.body.clientHeight (客户可视窗口，适用于怪异模式下的浏览器)</p>
<h4 id="查看元素的几何尺寸"><a href="#查看元素的几何尺寸" class="headerlink" title="查看元素的几何尺寸"></a>查看元素的几何尺寸</h4><p>  domEle.getBoundingClientRect(); </p>
<blockquote>
<p>兼容性好，该方法返回一个对象，对象里面有left、top、right、bottom等属性。left和top代表钙元素左上角的x和y坐标，right和bottom代表元素右下角的x，y坐标</p>
</blockquote>
<h4 id="查看元素尺寸"><a href="#查看元素尺寸" class="headerlink" title="查看元素尺寸"></a>查看元素尺寸</h4><p>  domEle.offsetWidth、domEle.offsetHeight</p>
<h4 id="查看元素位置"><a href="#查看元素位置" class="headerlink" title="查看元素位置"></a>查看元素位置</h4><p>  domEle.offsetLeft、 domEle.offsetTop</p>
<blockquote>
<p>对于无定位父级的元素，返回相对于文档的坐标。对于有定位的父级的元素，返回相对于最近的有定位的父级的坐标（无论是left还是margin-left等都是距离）。</p>
</blockquote>
<p>  domEle.offsetParent<br>  返回最近的有定位的父级，若无，返回body。body.offsetParent，返回null。</p>
<h4 id="让滚动条滚动"><a href="#让滚动条滚动" class="headerlink" title="让滚动条滚动"></a>让滚动条滚动</h4><p>  window上有三个方法：scroll() scrollTo() scrollBy()</p>
<h3 id="4）脚本化css"><a href="#4）脚本化css" class="headerlink" title="4）脚本化css"></a>4）脚本化css</h3><h4 id="读写元素css属性"><a href="#读写元素css属性" class="headerlink" title="读写元素css属性"></a>读写元素css属性</h4><p>  dom.style.prop 可读写样式，没有兼容性问题，碰到float这样的关键字属性，前面应加css。eg: float -&gt; cssFloat。<br>  复合属性必须拆解，组合单词变成小驼峰式写法。<br>  写入的值必须是字符串格式。</p>
<h4 id="查询计算样式"><a href="#查询计算样式" class="headerlink" title="查询计算样式"></a>查询计算样式</h4><p>  window.getComputedStyle(ele, null); 计算样式只读，返回的计算样式的值是绝对值，没有相对单位。（IE8及以下不兼容）</p>
<h4 id="查询样式"><a href="#查询样式" class="headerlink" title="查询样式"></a>查询样式</h4><p>  ele.currentStyle(了解就可以，现在都不用了，现在使用chrome会报错)</p>
<h2 id="二、事件"><a href="#二、事件" class="headerlink" title="二、事件"></a>二、事件</h2><h3 id="绑定事件处理函数"><a href="#绑定事件处理函数" class="headerlink" title="绑定事件处理函数"></a>绑定事件处理函数</h3><ul>
<li><p>ele.onxx = function (event) {};<br>兼容性好，基本等同于句柄。<br>但是一个元素的同一事件只能绑定一个处理程序。</p>
</li>
<li><p>ele.addEventListener(type, fn ,false);<br>IE9以下不兼容。<br>true：事件句柄在捕获阶段执行，false：事件句柄在冒泡阶段执行<br>一个元素的同一事件可以绑定多个处理程序，但是不能多次绑定同一处理程序。</p>
</li>
<li><p>ele.attachEvent(‘onxxx’, fn);<br>IE独有。<br>一个元素的同一事件可以绑定多个处理程序，但是不能多次绑定同一处理程序。</p>
</li>
</ul>
<blockquote>
<p>事件处理程序的运行环境（this）<br>  1、ele.onxx this指向dom元素本身<br>  2、ele.addEventListener this指向dom元素本身<br>  3、ele.attachEvent this指向window</p>
</blockquote>
<h3 id="解除事件处理函数"><a href="#解除事件处理函数" class="headerlink" title="解除事件处理函数"></a>解除事件处理函数</h3><p>  ele.onxxx = false / ‘’ / null;<br>  ele.removeEventListener(type, fn, false);<br>  ele.detachEvent(‘onxxx’, fn);</p>
  <div class="post-warning">注：若绑定匿名函数，则无法解除。</div>

<h3 id="事件冒泡-amp-捕获-gt-事件处理模型"><a href="#事件冒泡-amp-捕获-gt-事件处理模型" class="headerlink" title="事件冒泡&amp;捕获 -&gt; 事件处理模型"></a>事件冒泡&amp;捕获 -&gt; 事件处理模型</h3><ul>
<li><p>事件冒泡<br>结构上（非视觉上）嵌套关系的元素，会存在事件冒泡的功能，即同一事件，自子元素冒泡到父元素（自底向上）。</p>
</li>
<li><p>事件捕获<br>结构上（非视觉上）嵌套关系的元素，会存在事件捕获的功能，即同一事件，自父元素捕获至子元素（事件源元素）（自顶向下）。</p>
<p>触发顺序：先捕获后冒泡。<br>focus、blur、change、submit、reset、select等时间不冒泡。<br>IE没有捕获事件，就Chrome实现了捕获。</p>
</li>
</ul>
<p><br></p>
<ul>
<li><p>取消冒泡<br>W3C标准event.stopPropagation(); 但不支持IE9以下版本<br>IE独有event.cancelBubble = true;</p>
</li>
<li><p>阻止默认事件<br>默认事件 - 表单提交， a标签跳转， 右键菜单等<br>return false; 以对象属性的方式注册的事件才生效<br>event.preventDefault(); W3C标准，IE9以下不兼容<br>event.returnValue = false; 兼容IE</p>
<div class="post-warning">例如，我们来阻止【右键出菜单】这一默认事件：<br>  1、return false;是句柄方式阻止默认事件，只有用句柄的方式绑定事件，这种方式才好使。如以addEventListener注册的时间就不好使。<br>    document.oncontextmenu = function () { return false; }<br><br>  2、document.oncontextmenu = function (e) { e.preventDefault(); }<br><br>  3、document.oncontextmenu = function (e) { e.returnValue = false; }<br></div>



</li>
</ul>
<h3 id="事件对象"><a href="#事件对象" class="headerlink" title="事件对象"></a>事件对象</h3><ul>
<li>event || window.event（用于IE）</li>
<li>事件源对象：<strong>event.target</strong> 火狐只有这个、chrome两个都有<br><strong>event.srcElement</strong> IE只有这个，chrome两个都有</li>
</ul>
<h3 id="事件委托"><a href="#事件委托" class="headerlink" title="事件委托"></a>事件委托</h3><p>  利用事件冒泡和事件源对象进行处理<br>  优点：不需要循环所有的元素，一个一个绑定事件。当有新的子元素时不需要重新绑定事件。</p>
<h3 id="事件分类"><a href="#事件分类" class="headerlink" title="事件分类"></a>事件分类</h3><ul>
<li><strong>鼠标事件</strong><blockquote>
<p>click  mousedown  mousemove  mouseup  contextmenu<br>mouseover  mouseout  mouseenter mouseleave</p>
<ol>
<li>先 mousedown， 再mouseup， 最后click</li>
<li>鼠标移入: mouseover  mouseenter(es5新出的)<br>鼠标移出: mouseout   mouseleave(es5新出的)</li>
</ol>
</blockquote>
<div class="post-warning">移动端，mousedown和mouseup就不好用了，而是用touchstart、touchmove、touchend</div>

</li>
</ul>
<p><br></p>
<ul>
<li><p><strong>键盘事件</strong></p>
<blockquote>
<p>keydown   keypress   keyup </p>
<ol>
<li>先 keydown， 再keypress， 最后keyup</li>
<li>keydown和keypress的区别：keydown可以响应任意键盘按键，keypress只可以响应字符类键盘按键。</li>
</ol>
</blockquote>
<div class="post-warning">1. keydown可以监听处理Fn辅助键之外的所有键（which：监测108个键子），keypress只能监听字符按键。<br>2. 但是keydown记录不了字符类按键，不准。<br>   如果想监听字符类按键并区分大小写，用keypress，<br>   如果监听操作类按键，只用keydown。<br>3. 二者各有优缺。keypress能识别键盘上的每一个键子，但是返回的数字我们不知道对应的哪个键子，得测。而且它只能测每个键子，如：shift+a-&gt;A,他就测不准，出现的是shift和A，这样说来，keypress更准确，keydown更广泛。<br></div>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">document.onkeypress = function (e) &#123;</span><br><span class="line">  console.log(e.key, String.fromCharCode(e.charCode));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<p><br></p>
<ul>
<li><p><strong>文本操作事件</strong><br>input、 focus、 blur、 change</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;input <span class="built_in">type</span>=<span class="string">"text"</span> id=<span class="string">'inp'</span> /&gt;</span><br><span class="line"></span><br><span class="line">const oInp = document.getElementById(<span class="string">'inp'</span>);</span><br><span class="line">oInp.oninput = <span class="keyword">function</span> (e) &#123;</span><br><span class="line">  console.log(e.data, e.target.value);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>窗体操作事件</strong><br>scroll load</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">window.onscroll = <span class="function"><span class="title">function</span></span> () &#123;</span><br><span class="line">  console.log(window.pageXOffset + <span class="string">" "</span> +window.pageYOffset);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">window.onload = <span class="function"><span class="title">function</span></span> () &#123;</span><br><span class="line">  var oDiv = document.getElementsByTagName(<span class="string">'div'</span>)[0];</span><br><span class="line">  oDiv.style.width = <span class="string">'100px'</span>;</span><br><span class="line">  oDiv.style.height = <span class="string">'100px'</span>;</span><br><span class="line">  oDiv.style.backgroundColor = <span class="string">'orange'</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>这样完全好使，但是为什么我们都不这样使用。因为无意义，速度慢。整个文档解析后，renderTree构建完成后，DOM所有文档图片信息下载完成后，整个页面完成后才能出发window.onload事件。</p>
<p>当然也有用处，用load我们知道什么时候页面加载完成，我们可以把“广告”之类的功能放在load中，页面加载完再显示广告，但绝不能把主程序放在load里。</p>
<p>js有DOMTree + css有CSSTree -&gt; 渲染树 renderTree<br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br></p>
</li>
</ul>
<h1 id="BOM"><a href="#BOM" class="headerlink" title="BOM"></a><font color="#FF69B4">BOM</font></h1><h2 id="一、概述"><a href="#一、概述" class="headerlink" title="一、概述"></a>一、概述</h2><ol>
<li>定义：Browser Object Model（浏览器对象模型）</li>
<li>BOM对象：window、history、Nacigator、screen、location等</li>
</ol>
<div class="post-warning">注：由于浏览器厂商不同，BOM对象的兼容性极低，故我们一般只用其中的部分功能。</div>

<h2 id="二、BOM对象"><a href="#二、BOM对象" class="headerlink" title="二、BOM对象"></a>二、BOM对象</h2><h3 id="1-window对象"><a href="#1-window对象" class="headerlink" title="1. window对象"></a><font color="#1B90D6">1. window对象</font></h3><blockquote>
<p>window对象代表浏览器中打开的窗口。 如果文档中包含框架（frame或iframe标签），浏览器会为每个框架创建一个额外的window对象。<br>注：没有应用于window对象的公开标准，不过所有浏览器都支持该对象。</p>
</blockquote>
<blockquote>
<p>window对象集合：frames[]<br>返回窗口中所有命名的框架，该集合是window对象的数组，每个window对象若窗口中含有一个框架或iframe或属性frames。length存放数组frames[]中含有的元素个数。<br>注：frames[]数组中引用的框架可能还包含框架，它们自己也具有frames[]数组</p>
</blockquote>
<h4 id="window对象的属性"><a href="#window对象的属性" class="headerlink" title="window对象的属性"></a>window对象的属性</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">closed          返回窗口是否已被关闭</span><br><span class="line">defaultStatus   设置或返回窗口状态栏中的默认文本</span><br><span class="line">document        对Document对象的只读引用，请参阅Document对象</span><br><span class="line"><span class="built_in">history</span>         对History对象的只读引用，请参阅History对象</span><br><span class="line">location        用于窗口或框架的Location对象，请参阅Location对象</span><br><span class="line">Navigator       对Navigator对象的只读引用，请参阅Navigator对象</span><br><span class="line">Screen          对Screen对象的只读引用，请参阅Screen对象</span><br><span class="line">innerheight     返回窗口文档显示区的高度</span><br><span class="line">innerwidth      返回窗口文档显示区的宽度</span><br><span class="line">length          设置或返回窗口中的框架数量</span><br><span class="line">name            设置或返回窗口的名称</span><br><span class="line">opener          返回对创建此窗口的窗口引用</span><br><span class="line">outerheight     返回窗口的外部高度（IE不支持）</span><br><span class="line">outerwidth      返回窗口的外部宽度（IE不支持）</span><br><span class="line">pageXOffset     设置或返回当前页面相对于窗口显示区左上角的x位置</span><br><span class="line">pageYOffset     设置或返回当前页面相对于窗口显示区左上角的y位置</span><br><span class="line">parent          返回父窗口</span><br><span class="line">window          window属性等价于self属性，它包含了对窗口自身的引用</span><br><span class="line">self            返回当前窗口的引用，等价于window属性</span><br><span class="line">status          设置窗口状态栏的文本</span><br><span class="line">top             返回最顶层的先辈窗口</span><br><span class="line">screenLeft      只读整数，声明了窗口的左上角在屏幕上的x坐标和y坐标</span><br><span class="line">screenTop       IE、Safari和Opera支持screenLeft和screenTop</span><br><span class="line">screenX         只读整数，声明了窗口的左上角在屏幕上的x坐标和y坐标</span><br><span class="line">screenY         FireFox和Safari支持screenX和screenY</span><br></pre></td></tr></table></figure>
<h4 id="window对象的方法"><a href="#window对象的方法" class="headerlink" title="window对象的方法"></a>window对象的方法</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">alert()          显示带有一段消息和一个确认按钮的警告框</span><br><span class="line">confirm()        显示带有一段消息以及确认按钮和去取消按钮的对话框</span><br><span class="line">createPopup()    创建一个pop-up窗口</span><br><span class="line"><span class="built_in">print</span>()          打印当前窗口的内容</span><br><span class="line">prompt()         显示可提示用户输入的对话框</span><br><span class="line">blur()           可把键盘焦点从顶层浏览器窗口移走</span><br><span class="line">focus()          把键盘焦点给予一个窗口</span><br><span class="line">setInterval()    按照指定的周期（以毫秒计算）来调用函数或计算表达式</span><br><span class="line">setTimeout()     在指定的好描述后调用函数或计算表达式</span><br><span class="line">clearInterval()  取消由setInterval()设置的interval</span><br><span class="line">clearTimeout()   取消由setTimeout()设置的timeout</span><br><span class="line">open()           打开一个新浏览器窗口</span><br><span class="line">close()          关闭浏览器窗口</span><br><span class="line">scrollBy()       按照指定的像素值来滚动内容</span><br><span class="line">scrollTo()       把内容滚动到指定的坐标</span><br><span class="line">moveBy()         可相对窗口的当前坐标吧它移动到一个指定的像素</span><br><span class="line">moveTo()         把窗口的左上角移动到指定位置</span><br><span class="line">resizeBy()       按照指定的像素调整窗口的大小</span><br><span class="line">resizeTo()       把窗口的大小调整到指定的宽度和高度</span><br></pre></td></tr></table></figure>
<p><br></p>
<h3 id="2-Navigator对象"><a href="#2-Navigator对象" class="headerlink" title="2. Navigator对象"></a><font color="#1B90D6">2. Navigator对象</font></h3><blockquote>
<p>Navigator对象包含有关浏览器的信息。<br>没有应用于Navigator对象的公开标准，不过所有浏览器都支持此对象。</p>
</blockquote>
<h4 id="Navigator对象集合：plugins"><a href="#Navigator对象集合：plugins" class="headerlink" title="Navigator对象集合：plugins[]"></a>Navigator对象集合：plugins[]</h4><p>返回对文档中所有嵌入式对象的引用，该集合是一个Plugin对象的数组。其中的元素代表浏览器已经安装的插件，Plugin对象提供的是有关插件的信息。其中包括它所支持的MIME类型的列表。虽然plugins数组是由IE4定义的，但是在IE4中它却总是空的，因为IE4不支持插件和Plugin对象。</p>
<h4 id="Navigator对象属性"><a href="#Navigator对象属性" class="headerlink" title="Navigator对象属性"></a>Navigator对象属性</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">appCodeName       返回浏览器的代码名</span><br><span class="line">appMinorVersion   返回浏览器的次级版本</span><br><span class="line">appName           返回浏览器名称</span><br><span class="line">appVersion        返回浏览器的平台和版本信息</span><br><span class="line">browserLanguage   返回当前浏览器的语言</span><br><span class="line">cookieEnabled     返回指明浏览器中是否启用cookie的布尔值</span><br><span class="line">cpuClass          返回浏览器系统的CPU等级</span><br><span class="line">onLine            返回指明系统是否处于脱机模式的布尔值</span><br><span class="line">platform          返回运行浏览器的操作系统平台</span><br><span class="line">systemLanguage    返回OS使用的默认语言</span><br><span class="line">userLanguage      返回由客户机发送服务器的user-agent头部的值</span><br></pre></td></tr></table></figure>
<h4 id="Navigator对象方法"><a href="#Navigator对象方法" class="headerlink" title="Navigator对象方法"></a>Navigator对象方法</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">javaEnabled()     规定浏览器是否启用java</span><br><span class="line">taintEnabled()    规定浏览器是否启用数据污点(data tainting)</span><br></pre></td></tr></table></figure>
<p><br></p>
<h3 id="3-Screen对象"><a href="#3-Screen对象" class="headerlink" title="3.Screen对象"></a><font color="#1B90D6">3.Screen对象</font></h3><blockquote>
<p>Screen对象包含有关客户端显示屏幕的信息。<br><br></p>
</blockquote>
<h3 id="4-History对象"><a href="#4-History对象" class="headerlink" title="4. History对象"></a><font color="#1B90D6">4. History对象</font></h3><blockquote>
<p>History对象包含用户（在浏览器窗口中）访问过的URL，是window对象的一部分。可通过window.history属性进行访问。<br>注：没有应用于History对象的公开标准，不过所有浏览器都支持它。</p>
</blockquote>
<h4 id="History对象属性"><a href="#History对象属性" class="headerlink" title="History对象属性"></a>History对象属性</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">length 返回浏览器历史列表中的数量</span><br></pre></td></tr></table></figure>
<h4 id="History对象方法"><a href="#History对象方法" class="headerlink" title="History对象方法"></a>History对象方法</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">back()     加载<span class="built_in">history</span>列表中的前一个URL</span><br><span class="line">forward()  加载<span class="built_in">history</span>列表中的下一个URL</span><br><span class="line">go()       加载<span class="built_in">history</span>列表中的某个具体页面</span><br></pre></td></tr></table></figure>
<p><br></p>
<h3 id="5-Location对象"><a href="#5-Location对象" class="headerlink" title="5. Location对象"></a><font color="#1B90D6">5. Location对象</font></h3><blockquote>
<p>Location对象包含有关当前URL的信息，是window对象的一部分，可通过window.location属性来访问</p>
</blockquote>
<h4 id="Location对象属性"><a href="#Location对象属性" class="headerlink" title="Location对象属性"></a>Location对象属性</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">hash</span>       设置或返回从<span class="comment">#号（#）开始的URL（锚）</span></span><br><span class="line">host       设置或返回主机名和当前URL的端口号</span><br><span class="line">hostname   设置或返回当前URL的主机名</span><br><span class="line">href       设置或返回完整的URL</span><br><span class="line">pathname   设置或返回当前URL的路径部分</span><br><span class="line">port       设置或返回当前URL的端口号</span><br><span class="line">protocol   设置或返回当前URL的协议</span><br><span class="line">search     设置或返回从问号（?）开始的URL（查询部分）</span><br></pre></td></tr></table></figure>
<h4 id="Location对象方法"><a href="#Location对象方法" class="headerlink" title="Location对象方法"></a>Location对象方法</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">assign()    加载新的文档</span><br><span class="line">reload()    重新加载当前文档</span><br><span class="line">replace()   用新的文档替换当前文档</span><br></pre></td></tr></table></figure>
<p><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br></p>
<h1 id="零散知识点"><a href="#零散知识点" class="headerlink" title="零散知识点"></a><font color="#0472B4" size="5">零散知识点</font></h1><h2 id="1-正则表达式-RegExp（Regular-Expression）"><a href="#1-正则表达式-RegExp（Regular-Expression）" class="headerlink" title="1.正则表达式 RegExp（Regular Expression）"></a><font color="#1B90D6">1.正则表达式 RegExp（Regular Expression）</font></h2><blockquote>
<p>正则表达式是匹配特殊字符或有特殊搭配原则的字符的最佳选择。<br>RegExp对象标识正则表达式，是对字符转执行 <strong>模式匹配</strong> 的强大工具。</p>
</blockquote>
<h3 id="一、创建方式"><a href="#一、创建方式" class="headerlink" title="一、创建方式"></a>一、创建方式</h3><ol>
<li>直接量<br>如：var reg = /^\d | \d$/igm;</li>
<li><p>new RegExp();<br>如：var reg = new RegExp(‘/^\d | \d$/‘);</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">注：① js字符串不许出现回车符号，但是“\\”代表转义字符。</span><br><span class="line">      如：var a = <span class="string">"aaa\</span></span><br><span class="line"><span class="string">                  bbb"</span>;</span><br><span class="line">      这样就不会报错了。</span><br><span class="line">     ②“\”代表转义字符，“\\”代表\。“\\n”代表换行</span><br></pre></td></tr></table></figure>
</li>
</ol>
<h3 id="二、基础语法"><a href="#二、基础语法" class="headerlink" title="二、基础语法"></a>二、基础语法</h3><h4 id="1-compile-编译正则表达式"><a href="#1-compile-编译正则表达式" class="headerlink" title="1. compile  编译正则表达式"></a>1. compile  编译正则表达式</h4>  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">exec     检索字符串中指定的值，返回找到的值，并确定其位置</span><br><span class="line">test     检索字符串中指定的值，返回true或false， 例：reg.test(str)</span><br></pre></td></tr></table></figure>
  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">i        代表不区分大小写（执行对大小写不敏感的匹配） 例：/[abc]/i</span><br><span class="line">g        代表全局匹配(查找所有匹配，而非找到第一个匹配后停止)</span><br><span class="line">m        多行匹配</span><br></pre></td></tr></table></figure>
<h4 id="2-支持正则表达式的String对象的方法"><a href="#2-支持正则表达式的String对象的方法" class="headerlink" title="2. 支持正则表达式的String对象的方法"></a>2. 支持正则表达式的String对象的方法</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">search    检索与正则表达式相匹配的值</span><br><span class="line">match     找到一个或多个正则表达式的匹配 &lt;font color=&quot;red&quot;&gt;例：str.match(reg)&lt;/font&gt;</span><br><span class="line">replace   替换与正则表达式匹配的子串</span><br><span class="line">split     把字符串分割为字符串数组</span><br></pre></td></tr></table></figure>
<h4 id="3-查找某法范围内的字符"><a href="#3-查找某法范围内的字符" class="headerlink" title="3.  [] 查找某法范围内的字符"></a>3.  <strong>[]</strong> 查找某法范围内的字符</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">[abc]     查找方括号之间的任何字符</span><br><span class="line">[^abc]    查找任何不在方括号之间的字符</span><br><span class="line">[0-9]     查找任何从0到9之间的数字</span><br><span class="line">[a-z]     查找任何从小写a到小写z之间的字符</span><br><span class="line">[A-Z]     查找任何从大写A到大写Z之间的字符</span><br><span class="line">[A-z]     查找任何从大写A到小写z之间的字符</span><br><span class="line">[adj]     查找给定集合内的任何字符</span><br><span class="line">[^dss]    查找给定集合外的任何字符</span><br><span class="line">(red|green|blue) 查找任何指定的选项</span><br></pre></td></tr></table></figure>
<h4 id="4-元字符-（Metacharacter）是有特殊含义的字符，简化操作。"><a href="#4-元字符-（Metacharacter）是有特殊含义的字符，简化操作。" class="headerlink" title="4. 元字符 （Metacharacter）是有特殊含义的字符，简化操作。"></a>4. <strong>元字符</strong> （Metacharacter）是有特殊含义的字符，简化操作。</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">.         查找单个字符，除了换行和行结束符</span><br><span class="line">\w        查找单词字符</span><br><span class="line">\W        查找非单词字符</span><br><span class="line">\d        查找数字字符</span><br><span class="line">\D        查找非数字字符</span><br><span class="line">\s        查找空白字符</span><br><span class="line">\S        查号非空白字符</span><br><span class="line">\b        查找单词边界</span><br><span class="line">\B        查找非单词边界</span><br><span class="line">\O        查找NUL字符</span><br><span class="line">\n        查找换行符</span><br><span class="line">\f        查找换页符</span><br><span class="line">\r        查找回车符</span><br><span class="line">\t        查找制表符</span><br><span class="line">\v        查找垂直制表符</span><br><span class="line">\xxx      查找以八进制数xxx规定的字符</span><br><span class="line">\xdd      查找以十六进制数dd规定的字符</span><br><span class="line">\uxxx     查找以十六极致xxxx规定的Unicode字符</span><br></pre></td></tr></table></figure>
<h4 id="5-正则匹配原则（贪心匹配原则）-量词"><a href="#5-正则匹配原则（贪心匹配原则）-量词" class="headerlink" title="5. 正则匹配原则（贪心匹配原则） 量词"></a>5. 正则匹配原则（贪心匹配原则） <strong>量词</strong></h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">n+         匹配任何包含至少一个n的字符串</span><br><span class="line">n*         匹配任何包含零个或多个n的字符串</span><br><span class="line">n?         匹配任何包含零个或一个n的字符串</span><br><span class="line">n&#123;x&#125;       匹配包含x个n的序列的字符串</span><br><span class="line">n&#123;x,y&#125;     匹配包含x至y个n的序列的字符串</span><br><span class="line">n&#123;x,&#125;      匹配包含至少x个n的字符串</span><br><span class="line">n$         匹配任何结尾为n的字符串</span><br><span class="line">^n         匹配任何开头为n的字符串</span><br><span class="line">?=n        匹配任何其后紧接指定字符串n的字符串</span><br><span class="line">?!n        匹配任何其后紧接非指定字符串n的字符串</span><br></pre></td></tr></table></figure>
<h4 id="6-RegExp对象属性"><a href="#6-RegExp对象属性" class="headerlink" title="6. RegExp对象属性"></a>6. RegExp对象属性</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">ignoreCase  RegExp对象是否具有标志i</span><br><span class="line">global      RegExp对象是否具有标志g</span><br><span class="line">multiline   RegExp对象是否具有标志m</span><br><span class="line">lastIndex   一个整数，表示开始下一次匹配的字符位置</span><br><span class="line">source      正则表达式的原文本</span><br></pre></td></tr></table></figure>
<h3 id="三、进阶"><a href="#三、进阶" class="headerlink" title="三、进阶"></a>三、进阶</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">1. \2、\1 反向子表达式引用</span><br><span class="line">2. 正向预查功能 ?= </span><br><span class="line">   (?: )不记录该子表达式的内容</span><br></pre></td></tr></table></figure>
<h2 id="2-json"><a href="#2-json" class="headerlink" title="2.json"></a><font color="#1B90D6">2.json</font></h2><p>json是一种传输数据的格式（以对象为模板，本质上就是对象，但用途有区别。对象就是本地使用的数据类型，json是用来传输数据的数据类型）</p>
<div class="border1"><font color="red">JSON.parse();</font> string -&gt; json<br><font color="red">JSON.stringify();</font> json -&gt; string</div>

<h2 id="3-异步加载js"><a href="#3-异步加载js" class="headerlink" title="3.异步加载js"></a><font color="#1B90D6">3.异步加载js</font></h2><h3 id="一、js同步加载"><a href="#一、js同步加载" class="headerlink" title="一、js同步加载"></a>一、js同步加载</h3><ol>
<li>js加载的缺点：加载工具方法没必要阻塞文档，使得js加载会影响页面效率，一旦网速不好，那么整个网站将等待js加载而不进行后续渲染等工作。</li>
<li>js加载不能满足的需求：有些工具方法需要按需加载，用到时再加载，不用时不加载。</li>
<li>页面解析：加载一行，解析一行，遇到&lt; link &gt;标签，开启一个新线程，异步加载css。</li>
</ol>
<h3 id="二、js异步加载"><a href="#二、js异步加载" class="headerlink" title="二、js异步加载"></a>二、js异步加载</h3><ol>
<li><p>javascript异步加载的三种方案：<br> 1） defer异步加载，但要等到dom文档全部解析完才会被执行（只有IE能用。执行时不阻塞页面）</p>
 <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;script src=<span class="string">".../xxx.js"</span> defer/async&gt;&lt;/script&gt;</span><br></pre></td></tr></table></figure>
<p> 2） async异步加载，加载完就执行<br> （async只能加载外部脚本，不能将js写在script标签里，w3c标准。执行时不阻塞页面）<br> 3） 创建script，插入到DOM中，onload，兼容，加载完毕后callBack。( 按需加载 ）</p>
 <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line">    var cb = &#123;</span><br><span class="line">        <span class="built_in">test</span>:<span class="function"><span class="title">function</span></span>()&#123;</span><br><span class="line">            console.log(<span class="string">"回调函数"</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">function</span> loadScript(url,callback)&#123;</span><br><span class="line">        var oScript = docuemnt.createElement(<span class="string">'script'</span>);</span><br><span class="line">        oScript.src=url;</span><br><span class="line">        <span class="keyword">if</span>(oScript.readyState)&#123;</span><br><span class="line">            oScript.onreadystatechange = <span class="function"><span class="title">function</span></span>()&#123;//IE</span><br><span class="line">                <span class="keyword">if</span>(oScript.readyState == <span class="string">'complete'</span> || oScript.readyState == <span class="string">'loaded'</span>)&#123;</span><br><span class="line">                    oScript.onreadystatechange = null;</span><br><span class="line">                    cb[callback]();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            oScript.onload = <span class="function"><span class="title">function</span></span>()&#123;//非IE</span><br><span class="line">                oScript.onload = null;</span><br><span class="line">                cb[callback]();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        document.body.appendChild(oScript);</span><br><span class="line">    &#125;</span><br><span class="line">    loadScript(<span class="string">"xxx.js"</span>,<span class="string">"test"</span>);</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>
</li>
</ol>
<h2 id="4-js加载时间线"><a href="#4-js加载时间线" class="headerlink" title="4.js加载时间线"></a><font color="#1B90D6">4.js加载时间线</font></h2><ol>
<li>创建Document对象，开始解析页面。解析HTML元素和他们的文本内容后，添加Element对象和Text节点到文档中，这个阶段document.readyState = ‘loading’。</li>
<li>遇到link外部css，创建线程加载，并继续解析文档。</li>
<li>遇到script外部js并且没有设置defer或async，浏览器加载并阻塞，等待js加载完成并执行该脚本后，继续解析文档。</li>
<li>遇到script外部js并且有设置defer或async，浏览器创建线程加载，并继续解析文档。对于async属性，脚本加载完成后立即执行（异步禁止使用document.write）</li>
<li>遇到img等，先正常解析dom结构，然后浏览器开始加载src，并继续解析文档。</li>
<li>当文档解析完成，document.readyState=’interactive’（document.onreadystatechange）</li>
<li>文档解析完成后，所有设置有defer的脚本会按照顺序执行（注：与async不同，但同样禁止document.write）</li>
<li>document对象触发DOMContentloaded事件，这也标志着程序执行从同步脚本执行阶段，转换为事件驱动阶段（document.addEventListener）</li>
<li>当所有async的脚本加载完成并执行后、img等加载完成后，docuemnt.readyState = ‘complete’，window对象触发load事件。</li>
<li>从此，以异步响应方式处理用户输入，网络事件等。<br><font color="red">docuemnt.write()能清除文档流，故异步加载禁止使用document.write()</font><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">&lt;div&gt;&lt;/div&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">    console.log(<span class="string">"1.开始解析页面，document.readyState的值为"</span>,document.readyState,<span class="string">", 2 3 4 5 解析html,css,js,img等"</span>);</span><br><span class="line">&lt;/script&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">    document.addEventListener(<span class="string">'DOMContentLoaded'</span>,<span class="function"><span class="title">function</span></span>()&#123;</span><br><span class="line">        console.log(<span class="string">"8. document对象触发DOMContentloaded事件，这也标志着程序执行从同步脚本执行阶段，转换为事件驱动阶段（document.addEventListener）"</span>);</span><br><span class="line">    &#125;)</span><br><span class="line">    document.onreadystatechange = <span class="function"><span class="title">function</span></span>()&#123;</span><br><span class="line">        <span class="keyword">if</span>(document.readyState == <span class="string">"interactive"</span>)&#123;</span><br><span class="line">            console.log(<span class="string">"6.当页面解析完成后，onreadystatechange事件中document.readyState变为"</span>,document.readyState,<span class="string">"，7.defer执行"</span>);</span><br><span class="line">        &#125;<span class="keyword">else</span> <span class="keyword">if</span>(document.readyState == <span class="string">"complete"</span>)&#123;</span><br><span class="line">            console.log(<span class="string">"9.onreadystatechange事件中document.readyState变为"</span>,document.readyState);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    document.addEventListener(<span class="string">'DOMContentLoaded'</span>,<span class="function"><span class="title">function</span></span>()&#123;</span><br><span class="line">        console.log(<span class="string">"8. document对象触发DOMContentloaded事件，这也标志着程序执行从同步脚本执行阶段，转换为事件驱动阶段（document.addEventListener）"</span>);</span><br><span class="line">    &#125;)</span><br><span class="line">    window.onload = <span class="function"><span class="title">function</span></span>()&#123;</span><br><span class="line">        console.log(<span class="string">"9.window对象触发load事件"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    console.log(<span class="string">"1.开始解析页面，document.readyState的值为"</span>,document.readyState,<span class="string">", 2 3 4 5 解析html,css,js,img等"</span>);</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>
</li>
</ol>
<p><div></div></p>
<script>
    console.log("1.开始解析页面，document.readyState的值为",document.readyState,", 2 3 4 5 解析html,css,js,img等");
</script>
<script>
    document.addEventListener('DOMContentLoaded',function(){
        console.log("8. document对象触发DOMContentloaded事件，这也标志着程序执行从同步脚本执行阶段，转换为事件驱动阶段（document.addEventListener）");
    })
    document.onreadystatechange = function(){
        if(document.readyState == "interactive"){
            console.log("6.当页面解析完成后，onreadystatechange事件中document.readyState变为",document.readyState,"，7.defer执行");
        }else if(document.readyState == "complete"){
            console.log("9.onreadystatechange事件中document.readyState变为",document.readyState);
        }
    }
    document.addEventListener('DOMContentLoaded',function(){
        console.log("8. document对象触发DOMContentloaded事件，这也标志着程序执行从同步脚本执行阶段，转换为事件驱动阶段（document.addEventListener）");
    })
    window.onload = function(){
        console.log("9.window对象触发load事件");
    }
    console.log("1.开始解析页面，document.readyState的值为",document.readyState,", 2 3 4 5 解析html,css,js,img等");
</script>

<p><div class="border1">URL：<a href="https://www.baidu.com/s?ie-utf-88&amp;f=3&amp;rsv_bp=1" target="_blank" rel="noopener">https://www.baidu.com/s?ie-utf-88&amp;f=3&amp;rsv_bp=1</a></div></p>
<font color="red">资源定位符：</font>协议名(https)  主机名(域名 <a href="http://www.baidu.com&nbsp;&nbsp;路径(/s)&nbsp;&nbsp;参数名=参数值(ie-utf-88)" target="_blank" rel="noopener">www.baidu.com&nbsp;&nbsp;路径(/s)&nbsp;&nbsp;参数名=参数值(ie-utf-88)</a><br><br><font color="blue">DNS -&gt; IP -&gt; 服务端 -&gt; 客户端</font>





<h2 id="5-DOCTYPE"><a href="#5-DOCTYPE" class="headerlink" title="5.DOCTYPE"></a>5.DOCTYPE</h2><ol>
<li>渲染模式：标准模式、混杂模式（怪异模式）</li>
<li>三种标准模式的写法：<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line"></span><br><span class="line">&lt;!DOCTYPE HTML PUBLIC <span class="string">"-//W3C//DTD HTML 4.01//EN"</span> <span class="string">"http://www.w3.org/TR/html4/strict.dtd"</span>&gt;</span><br><span class="line"></span><br><span class="line">&lt;!DOCTYPE html PUBLIC <span class="string">"-//W3C//DTD XHTML 1.0 Strict//EN"</span> <span class="string">"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"</span>&gt;</span><br></pre></td></tr></table></figure>
</li>
</ol>
<h2 id="6-for属性-gt-js中表示htmlFor"><a href="#6-for属性-gt-js中表示htmlFor" class="headerlink" title="6.for属性 -&gt; js中表示htmlFor"></a>6.<label>for属性 -&gt; js中表示htmlFor</label></h2><p>属性映射HTML属性，映射到Element属性<br>img图片预加载<br>byClassName自己定义的写法<br>Math.random</p>
<h2 id="7-文档碎片"><a href="#7-文档碎片" class="headerlink" title="7.文档碎片"></a>7.文档碎片</h2><p>CDN<br>typeof(new Array).<strong>proto</strong>.constructor();<br>forEach里不能用break</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2021/01/07/hexo/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Lemon">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/background2.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="小寒">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2021/01/07/hexo/" itemprop="url">hexo搭建</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2021-01-07T14:29:00+08:00">
                2021-01-07
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/四院/" itemprop="url" rel="index">
                    <span itemprop="name">四院</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="一、hexo初始搭建"><a href="#一、hexo初始搭建" class="headerlink" title="一、hexo初始搭建"></a>一、hexo初始搭建</h1><p>参照<a href="https://hexo.io/zh-cn/docs/" target="_blank" rel="noopener">hexo官网</a>的搭建方式。<br>1）hexo<br>Hexo 是一个快速、简洁且高效的博客框架。Hexo 使用 Markdown（或其他渲染引擎）解析文章，在几秒内，即可利用靓丽的主题生成静态网页。</p>
<p>2）搭建<br>  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">npm install -g hexo-cli</span><br><span class="line">npm install hexo</span><br><span class="line"></span><br><span class="line">将 Hexo 所在的目录下的 node_modules 添加到环境变量之中即可直接使用 hexo &lt;command&gt;：</span><br><span class="line">echo &apos;PATH=&quot;$PATH:./node_modules/.bin&quot;&apos; &gt;&gt; ~/.profile</span><br><span class="line"></span><br><span class="line">hexo init &lt;folder&gt;</span><br><span class="line">cd &lt;folder&gt;</span><br><span class="line">npm install</span><br><span class="line"></span><br><span class="line">hexo s // 启动 server</span><br><span class="line">hexo g // 生成 generate</span><br><span class="line">hexo d // 部署 deploy</span><br></pre></td></tr></table></figure></p>
<p>3）更改主题</p>
<ul>
<li><p>clone 或 zip下载并放至themes目录下<br>git clone <a href="https://github.com/iissnan/hexo-theme-next" target="_blank" rel="noopener">https://github.com/iissnan/hexo-theme-next</a> themes/next<br><a href="https://github.com/iissnan/hexo-theme-next/releases" target="_blank" rel="noopener">next主题下载</a></p>
</li>
<li><p>启用主题<br>当 克隆/下载 完成后，打开 站点配置文件， 找到 theme 字段，并将其值更改为 next。</p>
</li>
<li><p>验证主题<br>到此，NexT 主题安装完成。下一步我们将验证主题是否正确启用。在切换主题之后、验证之前， 我们最好使用 hexo clean 来清除 Hexo 的缓存。</p>
</li>
<li><p>依据喜好添加自己的其他主题配置和样式</p>
</li>
</ul>
<h1 id="二、hexo日常维护"><a href="#二、hexo日常维护" class="headerlink" title="二、hexo日常维护"></a>二、hexo日常维护</h1><p>1）换肤</p>
<ul>
<li>头像：主题配置文件avatar</li>
<li>背景：custom.styl</li>
<li>颜色：site-meta、content-wrap</li>
</ul>
<p>2）更改hexo启动默认端口号</p>
<ul>
<li>临时：hexo s -p 4000</li>
<li>永久：ode_modules\hexo-server\index.js</li>
</ul>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/05/19/redux/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Lemon">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/background2.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="小寒">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2020/05/19/redux/" itemprop="url">redux</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2020-05-19T15:49:41+08:00">
                2020-05-19
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/框架/" itemprop="url" rel="index">
                    <span itemprop="name">框架</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="一、介绍"><a href="#一、介绍" class="headerlink" title="一、介绍"></a><font color="#8A2BE2">一、介绍</font></h1><p><strong>Redux 是 JavaScript 状态容器，提供可预测化的状态管理。</strong><br>Redux 除了和 React 一起用外，还支持其它界面库。 它体小精悍（只有2kB，包括依赖）。</p>
<blockquote>
<p>应用中所有的 state 都以一个对象树的形式储存在一个单一的 store 中。 惟一改变 state 的是dispatch方法派发 action（一个描述发生什么的对象）。 reducers描述 action 如何改变 state 树。通过provider顶层组件把store同步到所有组件。</p>
</blockquote>
<p>安装：<br>npm install –save redux</p>
<p>附加包：<br>npm install –save react-redux<br>npm install –save-dev redux-devtools</p>
<p>使用ts还需：<br>npm install @types/react-redux</p>
<h2 id="1、动机"><a href="#1、动机" class="headerlink" title="1、动机"></a><font color="#BA55D3">1、动机</font></h2><p>随着js单页应用的日趋复杂，js要管理越来越多的状态，难管理难预测。</p>
<h2 id="2、三大原则"><a href="#2、三大原则" class="headerlink" title="2、三大原则"></a><font color="#BA55D3">2、三大原则</font></h2><ol>
<li>单一数据源<br>整个应用的 state 被储存在一棵 object tree 中，并且这个 object tree 只存在于唯一一个 store 中。</li>
<li>State 是只读的<br>唯一改变 state 的方法就是触发 action，action 是一个用于描述已发生事件的普通对象。</li>
<li><p>使用纯函数来执行修改<br>为了描述 action 如何改变 state tree ，你需要编写 reducers。</p>
<ul>
<li>纯函数：函数的返回结果只依赖于它的参数，并且在执行过程中不产生副作用。</li>
</ul>
</li>
</ol>
<h2 id="3、先前技术"><a href="#3、先前技术" class="headerlink" title="3、先前技术"></a><font color="#BA55D3">3、先前技术</font></h2><h3 id="Flux"><a href="#Flux" class="headerlink" title="Flux"></a>Flux</h3><p>更新逻辑全部集中于一个特定的层（Flux 里的 store，Redux 里的 reducer）。<br>都不允许程序直接修改数据，而是用一个叫作 “action” 的普通对象来对更改进行描述。</p>
<p>不同于 Flux ，Redux 并没有 dispatcher 的概念。原因是它依赖纯函数来替代事件处理器。纯函数构建简单，也不需额外的实体来管理它们。<br>和 Flux 的另一个重要区别，是 Redux 设想你永远不会变动你的数据。</p>
<h3 id="Immutable"><a href="#Immutable" class="headerlink" title="Immutable"></a>Immutable</h3><p>Immutable 是一个可实现持久数据结构的 JavaScript 库。它性能很好，并且命名符合 JavaScript API 的语言习惯 。</p>
<p>Immutable 及类似的库都可以与 Redux 对接良好。尽可随意捆绑使用！</p>
<p>Redux 并不在意你如何存储 state，state 可以是普通对象，不可变对象，或者其它类型。 为了从 server 端写同构应用或融合它们的 state ，你可能要用到序列化或反序列化的机制。但除此以外，你可以使用任何数据存储的库，只要它支持数据的不可变动性。</p>
<h2 id="4、生态系统"><a href="#4、生态系统" class="headerlink" title="4、生态系统"></a><font color="#BA55D3">4、生态系统</font></h2><p><a href="https://www.redux.org.cn/docs/introduction/Ecosystem.html" target="_blank" rel="noopener">生态系统</a></p>
<ol>
<li>与不同框架绑定</li>
<li>Reducers<blockquote>
<p>组合 Reducer<br>Reducer 结构<br>高阶 Reducers</p>
</blockquote>
</li>
<li>Actions</li>
<li>工具集<blockquote>
<p>reduxjs、reselect等</p>
</blockquote>
</li>
<li>Store<blockquote>
<p>更改订阅 / 批处理 / 持久化</p>
</blockquote>
</li>
<li>不可变（Immutable）数据<blockquote>
<p>数据结构:facebook/immutable-js 、 rtfeldman/seamless-immutable 、 planttheidea/crio 、 aearly/icepick<br>不可变更新（Immutable Update）实用程序<br>Immutable/Redux 互操作: gajus/redux-immutable、 eadmundo/redux-seamless-immutable</p>
</blockquote>
</li>
<li>副作用（Side Effects）<blockquote>
<p>广泛使用: gaearon/redux-thunk 、  redux-saga/redux-saga 、 redux-observable/redux-observable 、 redux-loop/redux-loop 、<br>Promises: acdlite/redux-promise 、 lelandrichardson/redux-pack</p>
</blockquote>
</li>
<li>中间件<blockquote>
<p>Networks and Sockets: svrcekmichal/redux-axios-middleware<br>异步行为:  wyze/redux-debounce 符合 FSA 标准的 Redux 中间件可以实现 action 的防抖。<br>分析<br>实体和集合</p>
</blockquote>
</li>
<li>组件 state 和封装</li>
<li>开发者工具<blockquote>
<p>Debuggers and Viewers: reduxjs/redux-devtools 、 zalmoxisus/redux-devtools-extension 、 infinitered/reactotron<br>开发者工具监视器<br>日志<br>突变检测</p>
</blockquote>
</li>
<li>测试</li>
<li>路由</li>
<li>Forms<blockquote>
<p>ReactTraining/react-router-redux: 保持 state 与路由同步<br>等等</p>
</blockquote>
</li>
<li>更高级别的抽象<blockquote>
<p>社区公约</p>
</blockquote>
</li>
</ol>
<p><br><br><br><br><br><br><br></p>
<h1 id="二、基础"><a href="#二、基础" class="headerlink" title="二、基础"></a><font color="#8A2BE2">二、基础</font></h1>  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">视图   ---&gt;     Action构建函数    ---&gt;    Action对象    ---&gt;    Store.dispatch   </span><br><span class="line">  |                                                                 |</span><br><span class="line">  |                                                                 |</span><br><span class="line">刷新视图     &lt;---    Store       &lt;---      新的状态     &lt;---    reducer函数</span><br></pre></td></tr></table></figure>
<h2 id="Action"><a href="#Action" class="headerlink" title="Action"></a><font color="#BA55D3">Action</font></h2><p><strong>Action 创建函数</strong> 是生成 <strong>action</strong> 的方法。</p>
<p>actions 描述了有某件事情发生了这一事实，并没有描述应用如何更新 state。</p>
<h2 id="Reducer"><a href="#Reducer" class="headerlink" title="Reducer"></a><font color="#BA55D3">Reducer</font></h2><p>Reducers 指定了应用状态的变化如何响应 actions 并发送到 store 的。</p>
<ul>
<li><p>纯函数<br>只要传入参数相同，返回计算得到的下一个 state 就一定相同。没有特殊情况、没有副作用，没有 API 请求、没有变量修改，单纯执行计算。</p>
</li>
<li><p>combineReducers()工具类</p>
</li>
</ul>
<h2 id="Store"><a href="#Store" class="headerlink" title="Store"></a><font color="#BA55D3">Store</font></h2><p><strong>Redux 应用只有一个单一的 store。</strong></p>
<blockquote>
<p>action 描述“发生了什么”，和使用 reducers 来根据 action 更新 state 的用法。</p>
<p>Store 就是把它们联系到一起的对象。Store 有以下职责：<br>维持应用的 state；<br>提供 getState() 方法获取 state；<br>提供 dispatch(action) 方法更新 state；<br>通过 subscribe(listener) 注册监听器;<br>通过 subscribe(listener) 返回的函数注销监听器。</p>
</blockquote>
<h2 id="数据流"><a href="#数据流" class="headerlink" title="数据流"></a><font color="#BA55D3">数据流</font></h2><ul>
<li>严格的单向数据流是 Redux 架构的设计核心。</li>
</ul>
<p>这意味着应用中所有的数据都遵循相同的生命周期，这样可以让应用变得更加可预测且容易理解。同时也鼓励做数据范式化，这样可以避免使用多个且独立的无法相互引用的重复数据。</p>
<p>Redux 应用中数据的生命周期遵循下面 4 个步骤：</p>
<ol>
<li>调用 store.dispatch(action)。</li>
<li>Redux store 调用传入的 reducer 函数。</li>
<li>根 reducer 应该把多个子 reducer 输出合并成一个单一的 state 树。</li>
<li>Redux store 保存了根 reducer 返回的完整 state 树。</li>
</ol>
<h2 id="搭配react"><a href="#搭配react" class="headerlink" title="搭配react"></a><font color="#BA55D3">搭配react</font></h2><h3 id="容器组件（Smart-Container-Components）和展示组件（Dumb-Presentational-Components）"><a href="#容器组件（Smart-Container-Components）和展示组件（Dumb-Presentational-Components）" class="headerlink" title="容器组件（Smart/Container Components）和展示组件（Dumb/Presentational Components）"></a>容器组件（Smart/Container Components）和展示组件（Dumb/Presentational Components）</h3><blockquote>
<p>大部分的组件都应该是展示型的，但一般需要少数的几个容器组件把它们和 Redux store 连接起来。<br>技术上讲你可以直接使用 store.subscribe() 来编写容器组件。但不建议这么做的原因是无法使用 React Redux 带来的性能优化。也因此，不要手写容器组件，而使用 React Redux 的 connect() 方法来生成，</p>
</blockquote>
<h2 id="示例：Todo-List"><a href="#示例：Todo-List" class="headerlink" title="示例：Todo List"></a><font color="#BA55D3">示例：Todo List</font></h2><p>action   创建函数、对象<br>reducer  combineReducers<br>store    createStore<br>provider store</p>
<p>connect  mapStateToProps  mapDispatchToProps  PropsType</p>
<p><br><br><br><br><br><br><br><br><br></p>
<h1 id="三、高级"><a href="#三、高级" class="headerlink" title="三、高级"></a><font color="#8A2BE2">三、高级</font></h1><h2 id="异步-Action"><a href="#异步-Action" class="headerlink" title="异步 Action"></a><font color="#BA55D3">异步 Action</font></h2><h3 id="Action-1"><a href="#Action-1" class="headerlink" title="Action"></a><strong>Action</strong></h3><p>  调用异步API，有两个非常关键的时刻：发起请求的时刻和接收到响应的时刻（也可能是超时）。</p>
<ul>
<li>一种通知 reducer 请求开始的 action。</li>
<li>一种通知 reducer 请求成功的 action。</li>
<li>一种通知 reducer 请求失败的 action。</li>
</ul>
<p>为了区分这三种 action，可以在 action 里添加一个 status 字段作为标记位，又或者为它们定义不同的 type：<br>  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#123; type: &apos;FETCH_POSTS_REQUEST&apos; &#125;</span><br><span class="line">&#123; type: &apos;FETCH_POSTS_FAILURE&apos;, error: &apos;Oops&apos; &#125;</span><br><span class="line">&#123; type: &apos;FETCH_POSTS_SUCCESS&apos;, response: &#123; ... &#125; &#125;</span><br></pre></td></tr></table></figure></p>
<p>这应该是团队共同达成的约定。使用多个 type 会降低犯错误的机率，但是如果使用像 redux-actions 这类的辅助库来生成 action 创建函数和 reducer 的话，这就完全不是问题了。<br>无论使用哪种约定，一定要在整个应用中保持统一。</p>
<h3 id="设计-state-结构"><a href="#设计-state-结构" class="headerlink" title="设计 state 结构"></a><strong>设计 state 结构</strong></h3><h3 id="处理-Action"><a href="#处理-Action" class="headerlink" title="处理 Action"></a><strong>处理 Action</strong></h3><h3 id="异步-action-创建函数"><a href="#异步-action-创建函数" class="headerlink" title="异步 action 创建函数"></a><strong>异步 action 创建函数</strong></h3><blockquote>
<p>最后，如何把 之前定义 的同步 action 创建函数和网络请求结合起来呢？标准的做法是使用 Redux Thunk 中间件。通过使用指定的 middleware，action 创建函数除了返回 action 对象外还可以返回函数。这时，这个 action 创建函数就成为了 thunk。</p>
<p>当 action 创建函数返回函数时，这个函数会被 Redux Thunk middleware 执行。这个函数并不需要保持纯净；它还可以带有副作用，包括执行异步 API 请求。这个函数还可以 dispatch action，就像 dispatch 前面定义的同步 action 一样。</p>
<p>我们仍可以在 actions.js 里定义这些特殊的 thunk action 创建函数。</p>
<p>thunk 的一个优点是它的结果可以再次被 dispatch：</p>
</blockquote>
<div class="post-warning">fetch API<br>它是替代 XMLHttpRequest 用来发送网络请求的非常新的 API。由于目前大多数浏览器原生还不支持它，建议使用 cross_fetch 库,每次使用 fetch 前都这样调用一下：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">import fetch from &apos;cross_fetch&apos;;</span><br></pre></td></tr></table></figure><br><br>在底层，它在浏览器端使用 whatwg-fetch polyfill，在服务器端使用 node-fetch，所以如果当你把应用改成 同构 时，并不需要改变 API 请求。<br>注意，fetch polyfill 假设你已经使用了 Promise 的 polyfill。确保你使用 Promise polyfill 的一个最简单的办法是在所有应用代码前启用 Babel 的 ES6 polyfill，在应用中其它任何代码执行前调用一次：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">import &apos;babel-polyfill&apos;;</span><br></pre></td></tr></table></figure><br><br></div>

<p>Thunk middleware 并不是 Redux 处理异步 action 的唯一方式：<br>可以使用 redux-promise 或者 redux-promise-middleware 来 dispatch Promise 来替代函数。<br>可以使用 redux-observable 来 dispatch Observable。<br>可以使用 redux-saga 中间件来创建更加复杂的异步 action。<br>可以使用 redux-pack 中间件 dispatch 基于 Promise 的异步 Action。<br>甚至可以写一个自定义的 middleware 来描述 API 请求。</p>
<h2 id="异步数据流"><a href="#异步数据流" class="headerlink" title="异步数据流"></a><font color="#BA55D3">异步数据流</font></h2><blockquote>
<p>默认情况下，createStore() 所创建的 Redux store 没有使用 middleware，所以只支持 同步数据流。</p>
<p>可以使用 applyMiddleware() 来增强 createStore()。虽然这不是必须的，但是它可以帮助你用简便的方式来描述异步的 action。</p>
<p>当 middleware 链中的最后一个 middleware 开始 dispatch action 时，这个 action 必须是一个普通对象。这是 同步式的 Redux 数据流 开始的地方。</p>
</blockquote>
<h2 id="Middleware"><a href="#Middleware" class="headerlink" title="Middleware"></a><font color="#BA55D3">Middleware</font></h2><p>Redux middleware 被用于解决不同的问题，但其中的概念是类似的。<strong>它提供的是位于 action 被发起之后，到达 reducer 之前的扩展点。</strong> 可以利用 Redux middleware 来进行日志记录、创建崩溃报告、调用异步接口或者路由等等。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">middleware：</span><br><span class="line">const logger = store =&gt; next =&gt; action =&gt; &#123;</span><br><span class="line">  console.log(&apos;dispatching&apos;, action)</span><br><span class="line">  let result = next(action)</span><br><span class="line">  console.log(&apos;next state&apos;, store.getState())</span><br><span class="line">  return result</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">const crashReporter = store =&gt; next =&gt; action =&gt; &#123;</span><br><span class="line">  try &#123;</span><br><span class="line">    return next(action)</span><br><span class="line">  &#125; catch (err) &#123;</span><br><span class="line">    console.error(&apos;Caught an exception!&apos;, err)</span><br><span class="line">    Raven.captureException(err, &#123;</span><br><span class="line">      extra: &#123;</span><br><span class="line">        action,</span><br><span class="line">        state: store.getState()</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">    throw err</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">然后是将它们引用到 Redux store 中：</span><br><span class="line"></span><br><span class="line">import &#123; createStore, combineReducers, applyMiddleware &#125; from &apos;redux&apos;</span><br><span class="line"></span><br><span class="line">let todoApp = combineReducers(reducers)</span><br><span class="line">let store = createStore(</span><br><span class="line">  todoApp,</span><br><span class="line">  // applyMiddleware() 告诉 createStore() 如何处理中间件</span><br><span class="line">  applyMiddleware(logger, crashReporter)</span><br><span class="line">)</span><br></pre></td></tr></table></figure>
<h2 id="搭配-React-Router"><a href="#搭配-React-Router" class="headerlink" title="搭配 React Router"></a><font color="#BA55D3">搭配 React Router</font></h2><h3 id="安装-React-Router"><a href="#安装-React-Router" class="headerlink" title="安装 React Router"></a>安装 React Router</h3><p>  npm install –save react-router</p>
<h3 id="配置后备-fallback-URL"><a href="#配置后备-fallback-URL" class="headerlink" title="配置后备(fallback) URL"></a>配置后备(fallback) URL</h3><p>在集成 React Router 之前，我们需要配置一下我们的开发服务器。 显然，我们的开发服务器无法感知配置在 React Router 中的 route。 比如：想访问并刷新 /todos，由于是一个单页面应用，你的开发服务器需要生成并返回 index.html。 这里，将演示如何在流行的开发服务器上启用这项功能。</p>
<h4 id="配置-Express"><a href="#配置-Express" class="headerlink" title="配置 Express"></a>配置 Express</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">const express = require(&apos;express&apos;);</span><br><span class="line">const app = express();</span><br><span class="line"></span><br><span class="line">app.get(&apos;*&apos;, (req, res) =&gt; &#123;</span><br><span class="line">  fs.readFile(path.join(compiler.outputPath, `static/index.html`), (err, file) =&gt; &#123;</span><br><span class="line">    if (err) &#123;</span><br><span class="line">      res.sendStatus(404);</span><br><span class="line">    &#125; else &#123;</span><br><span class="line">      res.send(file.toString());</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<h4 id="配置-WebpackDevServer"><a href="#配置-WebpackDevServer" class="headerlink" title="配置 WebpackDevServer"></a>配置 WebpackDevServer</h4><p>如果你正在使用 WebpackDevServer 来返回你的 index.html 页面， 你可以增加如下配置到 webpack.config.dev.js：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">devServer: &#123;</span><br><span class="line">  historyApiFallback: true,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h3 id="连接-React-Router-和-Redux-应用"><a href="#连接-React-Router-和-Redux-应用" class="headerlink" title="连接 React Router 和 Redux 应用"></a>连接 React Router 和 Redux 应用</h3><blockquote>
<p>在 React 应用中，通常你会用 &lt;Router /> 包裹 &lt;Route />。 如此，当 URL 变化的时候，&lt;Router /> 将会匹配到指定的路由，然后渲染路由绑定的组件。 &lt;Route /> 用来显式地把路由映射到应用的组件结构上。 用 path 指定 URL，用 component 指定路由命中 URL 后需要渲染的那个组件。</p>
</blockquote>
<blockquote>
<p>另外，在我们的 Redux 应用中，我们仍将使用 <provider>。 <provider> 是由 React Redux 提供的高阶组件，用来让你将 Redux 绑定到 React </provider></provider></p>
</blockquote>
<blockquote>
<p>也许你想将 ‘#’ 从 URL 中移除（例如：<a href="http://localhost:3000/#/?_k=4sbb0i）。" target="_blank" rel="noopener">http://localhost:3000/#/?_k=4sbb0i）。</a> 你需要从 React Router 导入 browserHistory 来实现：<br>  import { Router, Route, browserHistory } from ‘react-router’;<br>  然后将它传给 &lt; Router /&gt; 来移除 URL 中的 ‘#’：</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">import React, &#123; PropTypes &#125; from &apos;react&apos;;</span><br><span class="line">import &#123; Provider &#125; from &apos;react-redux&apos;;</span><br><span class="line">import &#123; Router, Route, browserHistory &#125; from &apos;react-router&apos;;</span><br><span class="line">import App from &apos;./App&apos;;</span><br><span class="line"></span><br><span class="line">const Root = (&#123; store &#125;) =&gt; (</span><br><span class="line">  &lt;Provider store=&#123;store&#125;&gt;</span><br><span class="line">    &lt;Router history=&#123;browserHistory&#125;&gt;</span><br><span class="line">      &lt;Route path=&quot;/(:filter)&quot; component=&#123;App&#125; /&gt; //当我们尝试从 URL 中读取参数 (:filter)</span><br><span class="line">    &lt;/Router&gt;</span><br><span class="line">  &lt;/Provider&gt;</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">Root.propTypes = &#123;</span><br><span class="line">  store: PropTypes.object.isRequired,</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">export default Root;</span><br></pre></td></tr></table></figure>
<h3 id="通过-React-Router-导航"><a href="#通过-React-Router-导航" class="headerlink" title="通过 React Router 导航"></a>通过 React Router 导航</h3><p>React Router 提供了 <link> 来实现导航功能。</p>
<p>containers/FilterLink.js<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">import React from &apos;react&apos;;</span><br><span class="line">import &#123; Link &#125; from &apos;react-router&apos;;</span><br><span class="line"></span><br><span class="line">const FilterLink = (&#123; filter, children &#125;) =&gt; (</span><br><span class="line">  &lt;Link</span><br><span class="line">    to=&#123;filter === &apos;all&apos; ? &apos;&apos; : filter&#125;</span><br><span class="line">    activeStyle=&#123;&#123;</span><br><span class="line">      textDecoration: &apos;none&apos;,</span><br><span class="line">      color: &apos;black&apos;</span><br><span class="line">    &#125;&#125;</span><br><span class="line">  &gt;</span><br><span class="line">    &#123;children&#125;</span><br><span class="line">  &lt;/Link&gt;</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">export default FilterLink;</span><br></pre></td></tr></table></figure></p>
<p>components/Footer.js<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">import React from &apos;react&apos;</span><br><span class="line">import FilterLink from &apos;../containers/FilterLink&apos;</span><br><span class="line"></span><br><span class="line">const Footer = () =&gt; (</span><br><span class="line">  &lt;p&gt;</span><br><span class="line">    Show:</span><br><span class="line">    &#123;&quot; &quot;&#125;</span><br><span class="line">    &lt;FilterLink filter=&quot;all&quot;&gt;</span><br><span class="line">      All</span><br><span class="line">    &lt;/FilterLink&gt;</span><br><span class="line">    &#123;&quot;, &quot;&#125;</span><br><span class="line">    &lt;FilterLink filter=&quot;active&quot;&gt;</span><br><span class="line">      Active</span><br><span class="line">    &lt;/FilterLink&gt;</span><br><span class="line">    &#123;&quot;, &quot;&#125;</span><br><span class="line">    &lt;FilterLink filter=&quot;completed&quot;&gt;</span><br><span class="line">      Completed</span><br><span class="line">    &lt;/FilterLink&gt;</span><br><span class="line">  &lt;/p&gt;</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">export default Footer</span><br></pre></td></tr></table></figure></p>
<p>这时，如果你点击 <filterlink>，你将看到你的 URL 在 ‘/complete’，’/active’，’/‘ 间切换。 甚至还支持浏览的回退功能，可以从历史记录中找到之前的 URL 并回退。</filterlink></p>
<h3 id="从-URL-中读取数据"><a href="#从-URL-中读取数据" class="headerlink" title="从 URL 中读取数据"></a>从 URL 中读取数据</h3><h2 id="示例"><a href="#示例" class="headerlink" title="示例"></a><font color="#BA55D3">示例</font></h2>
          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/07/10/css/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Lemon">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/background2.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="小寒">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/07/10/css/" itemprop="url">css</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-07-10T09:48:38+08:00">
                2018-07-10
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/基础/" itemprop="url" rel="index">
                    <span itemprop="name">基础</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>CSS（cascading style sheet，层叠样式表） 是前端的三大基本语言之一。</p>
<h1 id="第一章、-CSS基础"><a href="#第一章、-CSS基础" class="headerlink" title="第一章、 CSS基础"></a><font color="#DC143C">第一章、 CSS基础</font></h1><ul>
<li>行间样式</li>
<li>页面级css</li>
<li>引入css文件 &lt;link rel = ‘stylesheet’ type = ‘text/css’ href = ‘xxx.css’/></li>
</ul>
<h2 id="一、选择器"><a href="#一、选择器" class="headerlink" title="一、选择器"></a><font color="#F33F50">一、选择器</font></h2><p><style>.textCenter{border:0;} .textCenter td{text-align:center;border:0;}</style></p>
<table class="textCenter"><tr><td colspan="2">权重</td></tr><tr><td>!important</td><td>无穷大</td></tr><tr><td>行间样式</td><td>1000</td></tr><tr><td>id</td><td>100</td></tr><tr><td>class | 属性 | 伪类</td><td>10</td></tr><tr><td>标签 | 伪元素</td><td>1</td></tr><tr><td>通配符</td><td>0</td></tr></table>

<p>分组选择器  父子选择器/派生选择器 直接子元素选择器（<font color="red">查找顺序是从后往前查</font>）</p>
<h2 id="二、常用的样式属性"><a href="#二、常用的样式属性" class="headerlink" title="二、常用的样式属性"></a><font color="#F33F50">二、常用的样式属性</font></h2><h3 id="font-size"><a href="#font-size" class="headerlink" title="font-size"></a>font-size</h3><h3 id="font-weight"><a href="#font-weight" class="headerlink" title="font-weight"></a>font-weight</h3><ul>
<li>bold  bolder  lighter normal  </li>
<li>100 200 …… 900</li>
</ul>
<h3 id="font-family"><a href="#font-family" class="headerlink" title="font-family"></a>font-family</h3><ul>
<li>arail georgia verdama ……</li>
<li>‘宋体’ ‘楷体’ ……</li>
</ul>
<h3 id="font-style"><a href="#font-style" class="headerlink" title="font-style"></a>font-style</h3><ul>
<li>normal（默认） italic</li>
</ul>
<h3 id="color"><a href="#color" class="headerlink" title="color"></a>color</h3><ul>
<li>red black pink ……</li>
<li>#f40 ……</li>
<li>rgb(255,0,0)</li>
<li>rgba(255,0,0,0.5)</li>
</ul>
<h3 id="border"><a href="#border" class="headerlink" title="border"></a>border</h3><ul>
<li>border-width: 5px;</li>
<li>border-style: solid实线 / dashed虚线 / dotted点状边框 ……<br>border-radius: 10px/ 50%;</li>
</ul>
<h3 id="text-align"><a href="#text-align" class="headerlink" title="text-align"></a>text-align</h3><ul>
<li>left right center justify(两端对齐) inherit</li>
</ul>
<h3 id="vertical-align"><a href="#vertical-align" class="headerlink" title="vertical-align"></a>vertical-align</h3><ul>
<li>baseline    默认。元素放置在父元素的基线上。<br>sub    垂直对齐文本的下标。<br>super    垂直对齐文本的上标<br>top    把元素的顶端与行中最高元素的顶端对齐<br>text-top    把元素的顶端与父元素字体的顶端对齐<br>middle    把此元素放置在父元素的中部。<br>bottom    把元素的顶端与行中最低的元素的顶端对齐。<br>text-bottom    把元素的底端与父元素字体的底端对齐。<br>length<br>%    使用 ‘line-height’ 属性的百分比值来排列此元素。允许使用负值。<br>inherit    规定应该从父元素继承 vertical-align 属性的值。</li>
<li>line-height === 行高，则垂直方向居中，1em  1个font-size</li>
</ul>
<h3 id="text-indent"><a href="#text-indent" class="headerlink" title="text-indent"></a>text-indent</h3><ul>
<li>length      %      inherit</li>
</ul>
<h3 id="text-decoration"><a href="#text-decoration" class="headerlink" title="text-decoration"></a>text-decoration</h3><ul>
<li>none(默认) underline     overline     line-through     blink     inherit</li>
</ul>
<h3 id="cursor"><a href="#cursor" class="headerlink" title="cursor"></a>cursor</h3><ul>
<li><p>url    需使用的自定义光标的 URL。 注释：请在此列表的末端始终定义一种普通的光标，以防没有由 URL 定义的可用光标。</p>
<p>default    默认光标（通常是一个箭头）<br>auto    默认。浏览器设置的光标。<br>crosshair    光标呈现为十字线。<br>pointer    光标呈现为指示链接的指针（一只手）<br>move    此光标指示某对象可被移动。<br>e-resize    此光标指示矩形框的边缘可被向右（东）移动。<br>ne-resize    此光标指示矩形框的边缘可被向上及向右移动（北/东）。<br>nw-resize    此光标指示矩形框的边缘可被向上及向左移动（北/西）。<br>n-resize    此光标指示矩形框的边缘可被向上（北）移动。<br>se-resize    此光标指示矩形框的边缘可被向下及向右移动（南/东）。<br>sw-resize    此光标指示矩形框的边缘可被向下及向左移动（南/西）。<br>s-resize    此光标指示矩形框的边缘可被向下移动（南）。<br>w-resize    此光标指示矩形框的边缘可被向左移动（西）。<br>text    此光标指示文本。<br>wait    此光标指示程序正忙（通常是一只表或沙漏）。<br>help    此光标指示可用的帮助（通常是一个问号或一个气球）。</p>
</li>
</ul>
<h3 id="opacity"><a href="#opacity" class="headerlink" title="opacity"></a>opacity</h3><ul>
<li>value(0.0-1.0) inherit</li>
</ul>
<h3 id="background"><a href="#background" class="headerlink" title="background"></a>background</h3><ul>
<li><strong>background-color</strong><br>transparent(默认)    color_name       hex_number       rgb_number     inherit</li>
<li><strong>background-image </strong><br>url(‘URL’)    指向图像的路径。<br>none          默认值。不显示背景图像。<br>inherit       规定应该从父元素继承 background-image 属性的设置。</li>
<li><strong>background-position</strong><br>x% y%        第一个值是水平位置，第二个值是垂直位置。0% 0%。（默认值），左上角是 0% 0%，右下角是 100% 100%。如果仅规定了一个值，另一个值将是 50%。<br>xpos ypos    第一个值是水平位置，第二个值是垂直位置。左上角是 0 0。单位是像素 (0px 0px) 或任何其他的 CSS 单位。如果您仅规定了一个值，另一个值将是50%。<br>top left / top center / top right / center left / center center / center right / bottom left / bottom center / bottom right  如果仅规定了一个关键词，那么第二个值将是’center’。<pre><code>可以混合使用 % 和 position 值。
</code></pre></li>
<li><strong>background-size </strong><br>length        设置背景图像的高度和宽度。第一个值设置宽度，第二个值设置高度。如果只设置一个值，则第二个值会被设置为 ‘auto’。<br>percentage    以父元素的百分比来设置背景图像的宽度和高度。第一个值设置宽度，第二个值设置高度。如果只设置一个值，则第二个值会被设置为 ‘auto’。<br>cover         把背景图像扩展至足够大，以使背景图像完全覆盖背景区域。背景图像的某些部分也许无法显示在背景定位区域中。<br>contain       把图像图像扩展至最大尺寸，以使其宽度和高度完全适应内容区域。</li>
<li><strong>background-repeat</strong><br>repeat（默认） repeat-x    repeat-y    no-repeat    inherit</li>
<li><strong>background-origin 规定背景图片的定位区域。</strong><br>padding-box       背景图像相对于内边距框来定位。<br>border-box        背景图像相对于边框盒来定位。<br>content-box       背景图像相对于内容框来定位。</li>
<li><strong>background-clip   规定背景的绘制区域。</strong><br>border-box        背景被裁剪到边框盒。<br>padding-box       背景被裁剪到内边距框。<br>content-box       背景被裁剪到内容框。</li>
<li><strong>background-attachment 规定背景图像是否固定或者随着页面的其余部分滚动。</strong><br>scroll            默认值。背景图像会随着页面其余部分的滚动而移动。<br>fixed             当页面的其余部分滚动时，背景图像不会移动。<br>inherit</li>
<li><strong>inherit 规定应该从父元素继承 background 属性的设置。</strong></li>
</ul>
<h3 id="display"><a href="#display" class="headerlink" title="display"></a>display</h3><ul>
<li><p>块级元素（block）：div p h1~h6 ul li ol li form table tr address ……</p>
<pre><code>1）独占一行，不满一行占一行，不满两行占两行
2）可以通过css改变宽高
</code></pre></li>
<li><p>行级元素（inline）：span button strong em i  ……</p>
<pre><code>1）内容决定宽高，不占满整行
2）不可以通过css改变宽高    
</code></pre></li>
<li><p>行级块标签（inline-block）：img  input  select …… </p>
<pre><code>1）内容决定宽高，不占满整行
2）可以通过css改变宽高
</code></pre><font color="red">行级块元素中若无文字，则其后文字与其下对齐。（可通过vertical-align来改变文字的垂直位置）</font><br><font color="red">带有inline属性的标签都有文字属性。</font>

</li>
</ul>
<blockquote>
<p>none    此元素不会被显示。<br>  block    此元素将显示为块级元素，此元素前后会带有换行符。<br>  inline    默认。此元素会被显示为内联元素，元素前后没有换行符。<br>  inline-block    行内块元素。（CSS2.1 新增的值）<br>  inherit    规定应该从父元素继承 display 属性的值。</p>
</blockquote>
<p><br></p>
<h2 id="三、盒模型"><a href="#三、盒模型" class="headerlink" title="三、盒模型"></a><font color="#F33F50">三、盒模型</font></h2><ul>
<li>width height</li>
<li>padding<br>padding: 1px 2px 3px 4px;上 右 下 左<br>padding: 1px 2px 3px; 上 左右 下<br>padding: 1px 2px; 上下 左右<br>padding: 1px; 上下左右</li>
<li>border<br>border: 1px solid;<br>border-width: 1px;<br>border-style: solid;<br>border-color: black;<br>border-top/bottom/left/right<br>border-top/bottom/left/right-width/style/color</li>
<li>margin<br>同padding</li>
</ul>
<blockquote>
<ul>
<li>margin塌陷问题<br>  可以通过触发bfc的方式解决这个问题。<ul>
<li>overflow: hidden;</li>
<li>display: inline-block;</li>
<li>position: absolute;</li>
<li>float: left; </li>
</ul>
</li>
</ul>
</blockquote>
<blockquote>
<ul>
<li>margin合并问题<br>处于bfc的区域里即可解决这个问题。但是<font>html中的标签是实现特定的结构功能，没有为了解决bug去多加一层标签。</font>一般margin塌陷问题解决，margin合并问题不用解决。</li>
</ul>
</blockquote>
<p><br></p>
<h2 id="四、层模型"><a href="#四、层模型" class="headerlink" title="四、层模型"></a><font color="#F33F50">四、层模型</font></h2><ul>
<li>1、绝对定位 position: absolute;<br>脱离原来的位置进行定位。相对于最近的有定位的父级进行定位，如没有，则相对于文档进行定位。</li>
<li>2、相对定位 position: relative;<br>相对于原来的位置进行定位。</li>
<li><p>3、固定定位 postion: fix;<br>相对于屏幕进行定位。<br>z-index </p>
</li>
<li><p>static    默认值。没有定位，元素出现在正常流中（忽略 top, bottom, left, right 或者 z-index 声明）。</p>
</li>
<li>inherit<br><br></li>
</ul>
<h2 id="五、浮动模型"><a href="#五、浮动模型" class="headerlink" title="五、浮动模型"></a><font color="#F33F50">五、浮动模型</font></h2><p>float : left / right;<br>1、产生浮动流<br>2、产生bfc的元素可以看到浮动流（overflow: hidden; display: inline-block; position: abosulte; float: left/right;）<br>3、有文本属性（包括文本）的元素可以看到浮动流</p>
<blockquote>
<p>清除浮动流的方法：<br>  <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">.clearfix&#123;</span><br><span class="line">  *zoom: 1;</span><br><span class="line">&#125;</span><br><span class="line">.clearfix:after &#123;</span><br><span class="line">  content: <span class="string">' '</span>;</span><br><span class="line">  clear: both;</span><br><span class="line">  display: block;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
</blockquote>
<p><br></p>
<h2 id="六、经验性小知识"><a href="#六、经验性小知识" class="headerlink" title="六、经验性小知识"></a><font color="#F33F50">六、经验性小知识</font></h2><h3 id="1-为什么-lt-span-标签又可以设置宽高了呢。"><a href="#1-为什么-lt-span-标签又可以设置宽高了呢。" class="headerlink" title="1.为什么&lt;span>标签又可以设置宽高了呢。"></a>1.为什么&lt;span>标签又可以设置宽高了呢。</h3><p>  因为posititon: absolute;或 float: left/right;，把&lt;span>标签内部的display属性的值改成了inline-block;<br>  <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;span&gt;123&lt;/span&gt;</span><br><span class="line">span&#123;</span><br><span class="line">  position: absolute; / <span class="built_in">float</span>: left/right;</span><br><span class="line">  width: 100px;</span><br><span class="line">  height: 100px; </span><br><span class="line">  background: red;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h3 id="2-lt-p-标签里不能嵌套-lt-div-标签"><a href="#2-lt-p-标签里不能嵌套-lt-div-标签" class="headerlink" title="2.&lt;p>标签里不能嵌套&lt;div>标签"></a>2.&lt;p>标签里不能嵌套&lt;div>标签</h3><p>&lt;a>标签里不能嵌套&lt;a>标签</p>
<h3 id="3-文字属性继承"><a href="#3-文字属性继承" class="headerlink" title="3.文字属性继承"></a>3.文字属性继承</h3><p>  父元素中的文字属性都可以继承，如果自己有则用自己的，没有继承父亲的。</p>
<h3 id="4-单行文字溢出打点"><a href="#4-单行文字溢出打点" class="headerlink" title="4.单行文字溢出打点"></a>4.单行文字溢出打点</h3><ul>
<li><p>单行文字溢出打点</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">white-space: nowrap;</span><br><span class="line">overflow: hidden;</span><br><span class="line">text-overflow: ellipsis;</span><br></pre></td></tr></table></figure>
</li>
<li><p>多行溢出打点</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">width: 100px;</span><br><span class="line">overflow: hidden;</span><br><span class="line">text-overflow: ellipsis;</span><br><span class="line">-webkit-line-clamp: 5; // 是一个 不规范的属性（unsupported WebKit property），它没有出现在 CSS 规范草案中。限制在一个块元素显示的文本的行数</span><br><span class="line">display: -webkit-box;  // 必须结合的属性 ，将对象作为弹性伸缩盒子模型显示 。</span><br><span class="line">-webkit-box-orient: vertical; // 必须结合的属性 ，设置或检索伸缩盒对象的子元素的排列方式 。</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h3 id="5-主流浏览器"><a href="#5-主流浏览器" class="headerlink" title="5.主流浏览器"></a>5.主流浏览器</h3><table class="textCenter"><tr><td>主流浏览器</td><td>浏览器内核</td></tr><tr><td>Internet Explorer</td><td>trident</td></tr><tr><td>Chrome</td><td>webkit/blink</td></tr><tr><td>FireFox</td><td>Gecko</td></tr><tr><td>Sarafri</td><td>webkit</td></tr><tr><td>Opera</td><td>presto</td></tr><tr><td>360极速</td><td>webkit</td></tr><tr><td>360</td><td>双内核 webkit/Crident</td></tr></table>

<h3 id="6-开发调试"><a href="#6-开发调试" class="headerlink" title="6.开发调试"></a>6.开发调试</h3><p>  console控制台、代码debugger、Sources打断点<br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br></p>
<h1 id="第二章、-CSS3"><a href="#第二章、-CSS3" class="headerlink" title="第二章、 CSS3"></a><font color="#DC143C">第二章、 CSS3</font></h1><p>css3.0是目前最新的 CSS 标准。</p>
<h2 id="一、css3常用新属性"><a href="#一、css3常用新属性" class="headerlink" title="一、css3常用新属性"></a><font color="#F33F50">一、css3常用新属性</font></h2><table class="textCenter"><tr><td>兼容前缀</td><td>浏览器</td></tr><tr><td>-webkit</td><td>chrome和safari</td></tr><tr><td>-moz</td><td>fireFox</td></tr><tr><td>-ms</td><td>IE</td></tr><tr><td>-o</td><td>opera</td></tr></table>  

<p><strong><a href="https://caniuse.com/" target="_blank" rel="noopener">可以测试属性兼容性</a>，现在很多打包插件在打包时就会自动处理这些样式兼容问题，所以开发可忽略。</strong></p>
<h3 id="1-border-radius-圆角"><a href="#1-border-radius-圆角" class="headerlink" title="1. border-radius 圆角"></a><font color="#FF6060">1. border-radius 圆角</font></h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">border-radius：20px;</span><br><span class="line">border-radius: 20px 20px 20px 20px;</span><br><span class="line">border-top-left-radius:20px;</span><br><span class="line">border-top-right-radius:20px;</span><br><span class="line">border-bottom-left-radius:20px;</span><br><span class="line">border-bottom-right-radius:20px;</span><br></pre></td></tr></table></figure>
<h3 id="2-box-shadow-阴影"><a href="#2-box-shadow-阴影" class="headerlink" title="2. box-shadow 阴影"></a><font color="#FF6060">2. box-shadow 阴影</font></h3><blockquote>
<p>box-shadow : x轴偏移量  y轴偏移量   模糊半径</p>
</blockquote>
<div class="box"></div>


<h3 id="3-font-face-字体"><a href="#3-font-face-字体" class="headerlink" title="3. font-face 字体"></a><font color="#FF6060">3. font-face 字体</font></h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">@font-face&#123;</span><br><span class="line">  font-family:<span class="string">'ziti'</span>;</span><br><span class="line">  src:(<span class="string">'./font/Summer.ttf'</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">font-family: <span class="string">'ziti'</span>;</span><br></pre></td></tr></table></figure>
<p>字体资源一般设计都会提供，也可以在网络上找到。推荐网址：<a href="http://www.w3cplus.com/content/css3-font-face" target="_blank" rel="noopener">w3cplus</a>和<a href="https:://www.dafont.com" target="_blank" rel="noopener">dafont</a>。 </p>
<h3 id="4-rgba-颜色值"><a href="#4-rgba-颜色值" class="headerlink" title="4. rgba() 颜色值"></a><font color="#FF6060">4. rgba() 颜色值</font></h3><p>red green blue alpha</p>
<h3 id="5-Gradient-渐变的背景色"><a href="#5-Gradient-渐变的背景色" class="headerlink" title="5. Gradient 渐变的背景色"></a><font color="#FF6060">5. Gradient 渐变的背景色</font></h3><ol>
<li><p>linear-gradient 线性渐变 to<br> linear-gradient( [ direction ] , color1 [ precent / pixel ] ,color2 [ precent / pixel ] );</p>
<ul>
<li>direction:<br>  1) 0 ~ 360deg角度<br>  2) <pre><code>to top/bottom/left/right
 to top left
 to bottom left...
</code></pre></li>
</ul>
<p>eg:background:linear-gradient(50deg , red 10px,yellow 240px);</p>
  <div style="width:300px;height:100px;margin-left:17px;background:linear-gradient(50deg , red 100px,yellow 240px);"></div><br>  background:linear-gradient(to right , SpringGreen ,  MintCream 90%);<br>  <div style="width:300px;height:100px;margin-left:17px;background:linear-gradient(to right , SpringGreen, MintCream 90%); "></div>
</li>
<li><p>radial-gradient 径向渐变 at<br>radial-gradient(shap at position , color1 [percent/pixel] , color2 [precent/pixel]);<br>shap放射形状：circle、ellipse<br>postion：center（圆心位置）、坐标值等</p>
<p>eg: radial-gradient(circle at center , rgba(96,0,190) , rgba(0,0,0));</p>
<div style="width:300px;height:100px;margin-left:17px;background:radial-gradient(circle at center,rgba(96,0,190) , rgba(0,0,0))"></div>

<p>radial-gradient(ellipse at 200px 80px , rgba(96,0,190) , rgba(0,0,0));</p>
<div style="width:300px;height:100px;margin-left:17px;background:radial-gradient(ellipse at 200px 80px,rgba(96,0,190) , rgba(0,0,0))"></div>



</li>
</ol>
<h3 id="6-background-背景"><a href="#6-background-背景" class="headerlink" title="6. background 背景"></a><font color="#FF6060">6. background 背景</font></h3><ol>
<li><p>background-origin 背景图片起始位置<br>background-origin : border-box / padding-box / content-box;<br><div style="width:400px;height:100px;background-origin:border-box;border:10px solid rgba(255,0,0,0.3);padding:40px;background-repeat: no-repeat;color:#fff;background-image:url('https://timgsa.baidu.com/timg?image&quality=80&size=b9999_10000&sec=1577251943575&di=a4ef12d40891fb543a4b0a541b728246&imgtype=0&src=http%3A%2F%2Fdik.img.kttpdq.com%2Fpic%2F19%2F13131%2Fc671a4a7144ee484_1024x768.jpg')">background-origin : border-box;</div><br><div style="width:400px;height:100px;background-origin:padding-box;border:10px solid rgba(255,0,0,0.3);padding:40px;color:#fff;background-image:url('https://timgsa.baidu.com/timg?image&quality=80&size=b9999_10000&sec=1577251943575&di=a4ef12d40891fb543a4b0a541b728246&imgtype=0&src=http%3A%2F%2Fdik.img.kttpdq.com%2Fpic%2F19%2F13131%2Fc671a4a7144ee484_1024x768.jpg')">background-origin : padding-box;</div><br><div style="width:400px;height:100px;background-origin:content-box;border:10px solid rgba(255,0,0,0.3);padding:40px;color:#fff;background-image:url('https://timgsa.baidu.com/timg?image&quality=80&size=b9999_10000&sec=1577251943575&di=a4ef12d40891fb543a4b0a541b728246&imgtype=0&src=http%3A%2F%2Fdik.img.kttpdq.com%2Fpic%2F19%2F13131%2Fc671a4a7144ee484_1024x768.jpg')">background-origin : content-box;</div><br><strong> * 此处为了更清楚的看出背景图片的起始位置，给背景图片设置了background-repeat：no-repeat;</strong></p>
</li>
<li><p>background-size 背景图片尺寸<br>background-size : auto / &lt;长度值&gt; / &lt;百分比&gt; / cover / contain ;</p>
</li>
<li><p>background-position 背景图片位置<br>background-position:0px 10px;</p>
</li>
<li><p>background-repeat 背景图片是否重复<br>background-repeat:inherit;</p>
</li>
</ol>
<h3 id="7-border-image-边界图片（应用背景）"><a href="#7-border-image-边界图片（应用背景）" class="headerlink" title="7. border-image 边界图片（应用背景）"></a><font color="#FF6060">7. border-image 边界图片（应用背景）</font></h3><ul>
<li>border-image:url(xxx.png) number style;</li>
<li>style:<br> stretch 拉伸<br> repeat 重复（会切割）<br> round 铺满（不会切割）</li>
<li>默认值：    none 100% 1 0 stretch<br>eg: border-image:url(‘图片’)  200 stretch; <div style="width:200px;height:50px;border: 30px solid;border-image:url('https://timgsa.baidu.com/timg?image&quality=80&size=b9999_10000&sec=1577251943575&di=a4ef12d40891fb543a4b0a541b728246&imgtype=0&src=http%3A%2F%2Fdik.img.kttpdq.com%2Fpic%2F19%2F13131%2Fc671a4a7144ee484_1024x768.jpg') 200 stretch"></div>


</li>
</ul>
<h3 id="8-box-shadow-盒子阴影"><a href="#8-box-shadow-盒子阴影" class="headerlink" title="8. box-shadow 盒子阴影"></a><font color="#FF6060">8. box-shadow 盒子阴影</font></h3><ul>
<li>box-shadow: [投影方式：outset/inset] 阴影水平偏移值（可取正负值） 阴影垂直偏移值（可取正负值） 阴影模糊值 阴影大小 阴影颜色;</li>
</ul>
<h3 id="9-text-shadow-文本阴影"><a href="#9-text-shadow-文本阴影" class="headerlink" title="9. text-shadow 文本阴影"></a><font color="#FF6060">9. text-shadow 文本阴影</font></h3><ul>
<li>text-shadow : X轴偏移量 Y轴偏移量 [阴影模糊半径] [阴影颜色];</li>
</ul>
<h3 id="10-word-wrap-文字边界换行"><a href="#10-word-wrap-文字边界换行" class="headerlink" title="10. word-wrap 文字边界换行"></a><font color="#FF6060">10. word-wrap 文字边界换行</font></h3><ul>
<li>normal  &nbsp;&nbsp;&nbsp;只在允许的断字点换行（浏览器保持默认处理）。<br>break-word  在长单词或 URL 地址内部进行换行。</li>
</ul>
<h3 id="11-background-clip-裁剪背景图片"><a href="#11-background-clip-裁剪背景图片" class="headerlink" title="11. background-clip 裁剪背景图片"></a><font color="#FF6060">11. background-clip 裁剪背景图片</font></h3><ul>
<li>background-clip : border-box / padding-box / content-box;<br><div style="width:400px;height:100px;background-repeat: no-repeat;background-image:url('https://timgsa.baidu.com/timg?image&quality=80&size=b9999_10000&sec=1577251943575&di=a4ef12d40891fb543a4b0a541b728246&imgtype=0&src=http%3A%2F%2Fdik.img.kttpdq.com%2Fpic%2F19%2F13131%2Fc671a4a7144ee484_1024x768.jpg');border:10px solid rgba(255,0,0,0.3);padding:40px;background-clip : border-box;color:#fff;">background-clip : border-box;</div><br><div style="width:400px;height:100px;background-repeat: no-repeat;background-image:url('https://timgsa.baidu.com/timg?image&quality=80&size=b9999_10000&sec=1577251943575&di=a4ef12d40891fb543a4b0a541b728246&imgtype=0&src=http%3A%2F%2Fdik.img.kttpdq.com%2Fpic%2F19%2F13131%2Fc671a4a7144ee484_1024x768.jpg');border:10px solid rgba(255,0,0,0.3);padding:40px;background-clip : padding-box;color:#fff">background-clip : padding-box;</div><br><div style="width:400px;height:100px;background-repeat: no-repeat;background-image:url('https://timgsa.baidu.com/timg?image&quality=80&size=b9999_10000&sec=1577251943575&di=a4ef12d40891fb543a4b0a541b728246&imgtype=0&src=http%3A%2F%2Fdik.img.kttpdq.com%2Fpic%2F19%2F13131%2Fc671a4a7144ee484_1024x768.jpg');border:10px solid rgba(255,0,0,0.3);padding:40px;background-clip : content-box;color:#fff">background-clip : content-box;</div><br>webkit独有属性，且必须配合-webkit-text-fill-color:transparent;使用。有需要的时候可以深入学习。 </li>
</ul>
<h2 id="二、css3选择器"><a href="#二、css3选择器" class="headerlink" title="二、css3选择器"></a><font color="#F33F50">二、css3选择器</font></h2><h3 id="1-属性选择器"><a href="#1-属性选择器" class="headerlink" title="1. 属性选择器"></a><font color="#FF6060">1. 属性选择器</font></h3><ul>
<li>E [ attr ^= ‘ val ‘ ]   开头<br>E [ attr $= ‘ val ‘ ]   结尾<br>E [ attr *= ‘ val ‘ ]   包含</li>
</ul>
<h3 id="2-初级伪类选择器"><a href="#2-初级伪类选择器" class="headerlink" title="2. 初级伪类选择器"></a><font color="#FF6060">2. 初级伪类选择器</font></h3><blockquote>
<p>伪类用于向某些选择器添加特殊效果</p>
</blockquote>
<h4 id="root-根标签选择器"><a href="#root-根标签选择器" class="headerlink" title=":root 根标签选择器"></a>:root 根标签选择器</h4><ul>
<li>:root{background:orange;}<br>:html{background:orange;}    二者等同</li>
</ul>
<h4 id="not-否定选择器"><a href="#not-否定选择器" class="headerlink" title=":not 否定选择器"></a>:not 否定选择器</h4><ul>
<li>div:not([class=’demo’]){background:orange;}</li>
</ul>
<h4 id="empty-空标签选择器"><a href="#empty-空标签选择器" class="headerlink" title=":empty 空标签选择器"></a>:empty 空标签选择器</h4><blockquote>
<p>空格也算内容，伪元素不算</p>
</blockquote>
<ul>
<li>p:empty{background:orange;}</li>
</ul>
<h4 id="target-目标元素选择器"><a href="#target-目标元素选择器" class="headerlink" title="target 目标元素选择器"></a>target 目标元素选择器</h4><ul>
<li>用来匹配被location.hash选中的元素（即锚点元素）选择器可用于选取当前活动的目标元素。</li>
</ul>
<h4 id="伪类选择器"><a href="#伪类选择器" class="headerlink" title="伪类选择器"></a>伪类选择器</h4><ul>
<li><p>:first-child<br>:last-child<br>:nth-child(){},n代表自然数<br>eg : ul li:nth-child(1){ul的第一个li，其中括号里还可以是3n+1这种表达式}<br>   :nth-last-child(){}</p>
</li>
<li><p>:first-of-type<br>:last-of-type<br>:nth-of-type(){}<br>:nth-last-of-type(){}</p>
</li>
<li><p>:only-child 唯一子元素选择器<br>选择是独生子的子元素，即该子元素不能有兄弟元素，它的父元素只有他一个直接子元素。<br>:only-of-type 类唯一选择器</p>
</li>
<li><p>:enabled 可用的元素<br>:disabled 不可用的元素，如web表单，输入框等</p>
</li>
<li><p>:checked选择框的被选中状态</p>
</li>
<li><p>:read-only 只读元素选择器<br>:read-write 非只读元素选择器（读写）<br>eg :&lt; input type=’text’ readonly=’readonly’/&gt; <input type="text" readonly="readonly" value="只可以读，不可以写"></p>
<pre><code>&lt; input type=&apos;text&apos;/&gt; &lt;input type=&apos;text&apos; value=&apos;可以读，也可以写&apos;/&gt;
</code></pre></li>
</ul>
<h3 id="3-伪元素选择器"><a href="#3-伪元素选择器" class="headerlink" title="3. 伪元素选择器"></a><font color="#FF6060">3. 伪元素选择器</font></h3><ul>
<li>伪元素的效果是通过添加一个实际的元素才能达到的。</li>
<li>::selection 用来匹配突出显示的文本<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;style&gt;.sele::selection&#123;background: red;color: green;&#125;&lt;/style&gt;</span><br><span class="line">&lt;div&gt;选中我&lt;span class = &apos;sele&apos;&gt;突出显示&lt;/span&gt;你就知道了&lt;/div&gt;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<p><style>.sele::selection{background: red;color: green;}</style></p>
<div>选中我<span class="sele">突出显示</span>你就知道了</div>

<h3 id="4-条件选择器"><a href="#4-条件选择器" class="headerlink" title="4. 条件选择器"></a><font color="#FF6060">4. 条件选择器</font></h3><ul>
<li>直接子元素div&gt;li{}<br>后面紧挨的兄弟节点div li+p{}<br>后面的兄弟节点ul li~p{}<br>ul li~*{}</li>
</ul>
<h2 id="三、css3提升部分"><a href="#三、css3提升部分" class="headerlink" title="三、css3提升部分"></a><font color="#F33F50">三、css3提升部分</font></h2><h3 id="1、transform-可以实现元素的形状、位置、角度、缩放等的变化"><a href="#1、transform-可以实现元素的形状、位置、角度、缩放等的变化" class="headerlink" title="1、transform 可以实现元素的形状、位置、角度、缩放等的变化"></a><font color="#FF6060">1、transform 可以实现元素的形状、位置、角度、缩放等的变化</font></h3><ul>
<li><p>skew();对元素进行倾斜扭曲<br>skew(x , y);接受两个值，第一个参数对应x轴，第二个参数对应y轴，如果第二个参数未提供，则默认0<br>skewX()，skewY()。<br>translate();可以移动距离，相对于自身位置。<br>translate( x , [y] );<br>translateX() ,translateY() ,translateZ() ,translate3d(x,y,z);</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;style&gt;</span><br><span class="line">  .test &#123; width: 100px;height: 100px;background-color: red;transform: skew(10deg, 10deg); &#125;</span><br><span class="line">&lt;/style&gt;</span><br><span class="line">&lt;div class=&apos;test&apos;&gt;test&lt;/div&gt;</span><br></pre></td></tr></table></figure>
<p><style>.test {width: 100px;height: 100px;background-color: red;transform: skew(10deg, 10deg);}<br></style></p>
<div class="test">test</div>
</li>
<li><p>rotate();    以x/y/z为轴进行旋转，默认<br>rotateX(); rotateY(); rotateZ(); rotate3d( x , y , z , angle );<br>scale();      以x / y轴进行缩放<br>scale( x , y ); scaleX() , scaleY() , scaleZ() , scale3d()     值是数字表示倍数，不加任何单位。</p>
<p><strong>tranform-origin 变换原点</strong><br>  transform-origin: 0% 0%;&nbsp;&nbsp;&nbsp;&nbsp;left top;&nbsp;&nbsp;&nbsp;&nbsp;top center;&nbsp;&nbsp;&nbsp;&nbsp;0 50%;</p>
<p><strong>水平垂直居中</strong><br>position: absolute; top: 50%; left: 50%;<font color="Cornislk">transform: translateX(-50%) translateY(-50%);</font></p>
<p><style>.cent{position:absolute;top:50%;left:50%;transform:translateX(-50%) translateY(-50%);text-align: center;}</style></p>
<div style="position: relative;width: 100%;height: 200px;border: 1px dotted;"><div class="cent" style="width:100px;height:100px;background:rgb(255, 215, 0);border-radius:50%;line-height:100px;color:#fff;">水平垂直居中</div></div>


</li>
</ul>
<h3 id="3-transition-过渡动画"><a href="#3-transition-过渡动画" class="headerlink" title="3. transition 过渡动画"></a><font color="#FF6060">3. transition 过渡动画</font></h3><ul>
<li>复合属性<br>transition-property<br>transition-duration<br>transition-timing-function<br>transition-delay</li>
</ul>
<h3 id="4-animation-动画"><a href="#4-animation-动画" class="headerlink" title="4. animation 动画"></a><font color="#FF6060">4. animation 动画</font></h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">@keyframes demoMove&#123;</span><br><span class="line">  0% &#123;</span><br><span class="line">    background-color:red;</span><br><span class="line">  &#125;</span><br><span class="line">  20% &#123;</span><br><span class="line">    background-color:yellow;</span><br><span class="line">  &#125;</span><br><span class="line">  50% &#123;</span><br><span class="line">    width:200px;</span><br><span class="line">  &#125;</span><br><span class="line">  100% &#123; </span><br><span class="line">    height:200px;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li><p>animation(name, duration, timing-function, delay, direction, iteration-count, fill-mode);<br>animation-name  keyframes动画关键帧的名，如demoMove<br>duration  动画执行时间<br>timing-function  过渡函数速率<br>delay  执行延迟时间<br>direction  动画播放方向： </p>
<blockquote>
<p>normal默认正常，reverse反向播放，alternate奇数次正向，偶数次反向，alternate-reverse奇数次反向，偶数次正向</p>
</blockquote>
<p>iteration-count  动画播放次数：n次数/infinite无限次<br>animation-fill-mode动画开始之前和结束之后的操作 ：</p>
<blockquote>
<p>none  默认值，表示动画按预期进行和结束，在动画完成最后一帧时，转到初始帧。<br>  forwards  表示动画在结束后继续应用最后的关键帧位置<br>  backwards 会在元素应用动画样式时迅速应用动画的初始帧<br>  both  元素动画同时具有forwards和backwards效果</p>
</blockquote>
</li>
</ul>
<h3 id="5-columns-多列布局"><a href="#5-columns-多列布局" class="headerlink" title="5. columns 多列布局"></a><font color="#FF6060">5. columns 多列布局</font></h3><ul>
<li>columns: [ column-width最小宽度(根据容器自适应) ][ column-count列数 ] ;<font color="Cornislk">两个不要一起用，会乱！</font><br>column-gap 列间距 默认是根据浏览器默认的font-size来定(12px)，不允许为负值或0，依旧有列间距<br>column-rule 列边框，复合值，不影响内容，不可为负值，不可为浮点数。<br>column-rule-width 默认值medium，其他值thick、thin<br>column-rule-style 默认值是none，其他值hidden、dotted、dashed、solid、double<br>column-rule-color 同border<br>column-span : 1|all;<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&lt;style&gt;</span><br><span class="line">  .colu &#123;</span><br><span class="line">    columns: 100px;</span><br><span class="line">    column-rule: 5px solid red;</span><br><span class="line">    column-gap: 30px;</span><br><span class="line">  &#125;</span><br><span class="line">&lt;/style&gt;</span><br><span class="line">&lt;div class=&apos;colu&apos;&gt;</span><br><span class="line">  &lt;div&gt;&lt;span&gt;111&lt;/span&gt;&lt;/div&gt;</span><br><span class="line">  &lt;div&gt;&lt;span&gt;222&lt;/span&gt;&lt;/div&gt;</span><br><span class="line">  &lt;span&gt;333&lt;/span&gt;</span><br><span class="line">&lt;/div&gt;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<p><style>.colu{columns:100px;column-rule:5px solid red;column-gap:30px;}</style></p>
<div class="colu"><div><span>111</span></div><div><span>222</span></div><span>333</span></div>

<h3 id="6-hack"><a href="#6-hack" class="headerlink" title="6. hack"></a><font color="#FF6060">6. hack</font></h3><p>column-width = (width - ( n - 1 ) * font-size ) / n  ;   (n &gt;= 2)</p>
<h3 id="7-盒模型"><a href="#7-盒模型" class="headerlink" title="7. 盒模型"></a><font color="#FF6060">7. 盒模型</font></h3><ul>
<li><p>w3c标准盒模型：元素实际宽高 = width / height + padding + border<br>IE6混杂模式下的盒模型：</p>
<ul>
<li>元素实际宽高 = width / hwight</li>
<li>元素content宽高 = width/height - padding - border</li>
</ul>
<p>box-sizing : border-box | content-box;</p>
</li>
</ul>
<h3 id="8-弹性盒子-display-flex"><a href="#8-弹性盒子-display-flex" class="headerlink" title="8. 弹性盒子 display:flex;"></a><font color="#FF6060">8. 弹性盒子 display:flex;</font></h3><font color="red" size="2">复合属性，且必须配合 display : flex;使用</font>

<ul>
<li><p>1)  以下6个属性设置在容器上</p>
<pre><code>flex-direction     row | row-reverse | column | column-reverse
flex-wrap          nowrap(默认值) | wrap | wrap-reverse
flex-flow          复合： flex-direction flex-wrap
justify-content    flex-start | flex-end | center | space-between | space-around
align-items        flex-start | flex-end | center | baseline | stretch
align-content      flex-start | flex-end | center | space-between | space-around | stretch
</code></pre><p>2)  以下6个属性设置在子元素上</p>
<pre><code>flex-grow          拓展:两栏布局
flex-shrink        缩减的宽度 = (flex-shrink * width1) / (flex-shrink1 * width1 + flex-shrink2 * width2) * morell
flex-basis         伸缩基准值   宽度( flex-basis / flex-basis相加 ) * 容器的宽度 &gt; width
flex               复合： flex-grow  flex-shrink   flex-basis；（flex: auto 等同于 flex: 1 1 auto；） 
align-self         auto(默认值) | flex-start | flex-end | center | baseline | stretch 
</code></pre></li>
</ul>
<h3 id="9-transparent-透明色颜色值"><a href="#9-transparent-透明色颜色值" class="headerlink" title="9. transparent 透明色颜色值"></a><font color="#FF6060">9. transparent 透明色颜色值</font></h3><p>利用transparent画三角:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  width:0px;</span><br><span class="line">  height:0px;</span><br><span class="line">  border:50px solid red;</span><br><span class="line">  border-top-color:green;</span><br><span class="line">  border-left-color:transparent;</span><br><span class="line">  border-bottom-color:transparent;</span><br><span class="line">  border-right-color:transparent;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p><style>.train{width:0px;height:0px;border:50px solid red;border-top-color:green;border-left-color:transparent;border-bottom-color:transparent;border-right-color:transparent;}</style></p>
<div class="train"></div>

<h3 id="10-css3动画相关属性"><a href="#10-css3动画相关属性" class="headerlink" title="10. css3动画相关属性"></a><font color="#FF6060">10. css3动画相关属性</font></h3><ul>
<li>perspective:none; ( 默认值 )<br>perspective-origin:50% 50%; ( 默认值 )<br>backface-visibility:visible | hidden ; 在元素运动过程中，能否展示元素的背面<br>transform-style : float | preserve-3d ; <ul>
<li>1） 需设置在父元素中，高于任何嵌套的变形元素<br>2）设置了它的元素，不能再设置overflow:hidden;因为会导致preserve-3d失效</li>
</ul>
</li>
</ul>
<h2 id="四、响应式布局"><a href="#四、响应式布局" class="headerlink" title="四、响应式布局"></a><font color="#F33F50">四、响应式布局</font></h2><h3 id="1-媒体查询"><a href="#1-媒体查询" class="headerlink" title="1. 媒体查询"></a><font color="#FF6060">1. 媒体查询</font></h3><blockquote>
<p>Link和@media<br>  &lt; link rel=’stylesheet’ media=’screen and (max-width:600px)’ href=’xxx.css’/&gt;<br>  screen: 媒体类型MediaType<br>  媒体特性 Media Query = MediaType+css</p>
</blockquote>
<ul>
<li><strong>媒体类型：</strong><br>all所有设备<br>braille盲文<br>embossed盲文打印<br>handheld手持设备<br>print文档打印或打印预览模式<br>projection项目演示，比如幻灯片<br>screen彩色电脑屏幕<br>speech演讲<br>tty固定字母间距的网格媒体，比如电传打字机<br>tv电视</li>
</ul>
<p><font color="red">注：现在很少用Link和@media，因为存在兼容性问题。现在一般用直接的媒体查询@media</font><br>  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">@media screen and (max-width:600px)&#123;...&#125;</span><br><span class="line">@media all and (max-width:100px) and (min-width:600px)&#123;...&#125;</span><br></pre></td></tr></table></figure></p>
<p><strong>指定备用功能：</strong> media = ‘screen and (min-width:769px) , print and (min-width:6in)’<br><strong>指定否定条件：</strong> media = ‘not screen and (monochrome)’<br><strong>向早期浏览器隐藏媒体查询：</strong> media = ‘only screen and (min-width:401px)’<br><strong>易混淆的宽高：</strong> device-width/height width/height</p>
<table class="textCenter"><tr><td><strong>属性</strong></td><td><strong>值</strong></td><td>Min/Max</td><td>描述</td></tr><tr><td>color</td><td>整数</td><td>yes</td><td>每种色彩的字节数</td></tr><tr><td>color-index</td><td>整数</td><td>yes</td><td>色彩表中的色彩数</td></tr><tr><td>device-aspect-ratio</td><td>整/整</td><td>yes</td><td>宽高比例</td></tr><tr><td>device-height</td><td>length</td><td>yes</td><td>设备屏幕的输出高度</td></tr><tr><td>device-width</td><td>length</td><td>yes</td><td>设备屏幕的输出宽度</td></tr><tr><td>grid</td><td>整数</td><td>no</td><td>是否是基于格栅的设备</td></tr><tr><td>height</td><td>length</td><td>yes</td><td>渲染界面的高度</td></tr><tr><td>monochrome</td><td>整数</td><td>yes</td><td>单色帧缓冲器中每像素字</td></tr><tr><td>resolution</td><td>分辨率</td><td>dpi/dpcm</td><td>分辨率</td></tr><tr><td>scan</td><td>Progressive</td><td>interlaced</td><td>tv媒体类型的扫描方式</td></tr><tr><td>width</td><td>length</td><td>yes</td><td>渲染界面的宽度</td></tr><tr><td>orientation</td><td>Portrait/landscape</td><td>no</td><td>横屏或竖屏</td></tr></table>                                      

<h3 id="2-物理像素和设备独立像素"><a href="#2-物理像素和设备独立像素" class="headerlink" title="2. 物理像素和设备独立像素"></a><font color="#FF6060">2. 物理像素和设备独立像素</font></h3><p><strong>设备像素又称物理像素（physical pixel）</strong>，设备能控制显示的最小单位。<br><strong>设备独立像素（Device Pixel）：</strong>(也叫密度无关像素)，代表一个可以由程序使用并控制的虚拟像素，然后由相关系统转换为物理像素。<br><strong>CSS像素</strong>是pixel，是编程用的单位，是实际不存在的。<br><strong>DPR(DevicePixelRatio，设备像素比)</strong> = 物理（设备）像素 / 设备独立像素 ；<br>以iphone6为例：<br>DPR是2，也就是2^2=4个物理像素对应1个设备独立像素，也就是1px对应4个物理像素。</p>
<h1 id="第三章、-积累"><a href="#第三章、-积累" class="headerlink" title="第三章、 积累"></a><font color="#DC143C">第三章、 积累</font></h1><h2 id="阴影"><a href="#阴影" class="headerlink" title="阴影"></a>阴影</h2><p>  box-shadow: 0 25px 20px #e9edf0;</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/07/10/html/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Lemon">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/background2.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="小寒">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/07/10/html/" itemprop="url">html</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-07-10T09:38:38+08:00">
                2018-07-10
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/基础/" itemprop="url" rel="index">
                    <span itemprop="name">基础</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>HTML （ Hyper Text Markup Language，超文本标记语言） 是前端的三大基本语言之一。</p>
<h1 id="一、-HTML基础"><a href="#一、-HTML基础" class="headerlink" title="一、 HTML基础"></a><font color="#DC143C">一、 HTML基础</font></h1><h2 id="1-基础结构"><a href="#1-基础结构" class="headerlink" title="1. 基础结构"></a><font color="#F33F50">1. 基础结构</font></h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html lang = <span class="string">'en'</span>&gt;</span><br><span class="line">  &lt;head&gt;</span><br><span class="line">  &lt;/head&gt;</span><br><span class="line">  &lt;body&gt;</span><br><span class="line">  &lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>
<ul>
<li>HTML标签：首尾呼应，相互嵌套，有特定含义。</li>
</ul>
<h2 id="2-简单标签"><a href="#2-简单标签" class="headerlink" title="2. 简单标签"></a><font color="#F33F50">2. 简单标签</font></h2><h3 id="lt-html-lt-html"><a href="#lt-html-lt-html" class="headerlink" title="&lt;html>&lt;/html>"></a><font color="#FC5603">&lt;html>&lt;/html></font></h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;html lang = <span class="string">'en'</span>&gt; ...... &lt;/html&gt;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>lang属性：告诉搜索引擎爬虫，我们的网站是什么语言的。如：中zh，英en，德de，法fr等。</p>
</blockquote>
<h3 id="lt-meta"><a href="#lt-meta" class="headerlink" title="&lt;meta/>"></a><font color="#FC5603">&lt;meta/></font></h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&lt;meta charset = <span class="string">'UTF-8'</span>&gt;</span><br><span class="line">&lt;meta name = <span class="string">'keywords'</span> content = <span class="string">'淘宝,掏宝,网上购物,C2C,在线交易,交易市场,网上交易,交易市场,网上买,网上卖,购物网站,团购,网上贸易,安全购物,电子商务,放心买,供应,买卖信息,网店,一口价,拍卖,网上开店,网络购物,打折,免费开店,网购,频道,店铺'</span>&gt;</span><br><span class="line">&lt;meta name = <span class="string">'description'</span> content = <span class="string">'淘宝网 - 亚洲较大的网上交易平台，提供各类服饰、美容、家居、数码、话费/点卡充值… 数亿优质商品，同时提供担保交易(先收货后付款)等安全交易保障服务，并由商家提供退货承诺、破损补寄等消费者保障服务，让你安心享受网上购物乐趣！'</span>&gt;</span><br><span class="line">&lt;meta http-equiv = <span class="string">'cache-control'</span> content = <span class="string">'no-cache'</span>&gt;</span><br><span class="line">&lt;meta http-equiv = <span class="string">'expires'</span> content = <span class="string">'0'</span>&gt;</span><br><span class="line">&lt;meta http-equiv = <span class="string">'pragma'</span> content = <span class="string">'no-cache'</span>&gt;</span><br><span class="line">&lt;meta name = <span class="string">'viewport'</span> content = <span class="string">'width=device-width,initial-scale=1.0,maximum-scale=1.0,minimum-scale=1.0,user-scalable=no, viewport-fit=cover'</span>&gt;</span><br><span class="line">&lt;meta http-equiv = <span class="string">'X-UA-Compatible'</span> content = <span class="string">'IE=edge,chrome=1'</span>&gt;</span><br><span class="line">&lt;meta name = <span class="string">'HandheldFriendly'</span> content = <span class="string">'true'</span>&gt;</span><br><span class="line">&lt;meta name = <span class="string">'format-detection'</span> content = <span class="string">'telephone=no,email=no'</span>&gt;</span><br></pre></td></tr></table></figure>
<font size="1"> 1.charset字符集，现在一般都用UTF-8，以前还有gb2312，gbk，unicode等。<br>  2.keywords网站的关键字，便于网络爬虫检索。<br>  3.description描述，同上。<br>  4.cache-control缓存控制，content的值可以是：Public 、 Private 、 no-Cache 、 no-Store。<br>  5.expires期限，用于设定网页的到期时间。一旦网页过期，必须到服务器上重新传输。<br>  6.pragma编译，用于设定禁止浏览器从本地机的缓存中调阅页面内容，设定后一旦离开网页就无法从Cache中再调出。<br>  7.viewport视口，宽度等于设备宽度，初始视角是1倍视角，最大视角是1倍视角，最小视角是1倍视角，用户是否可以伸缩网页不可以，视角尺寸是覆盖。<br>  8.X-UA-Compatible兼容IE，如果IE有安装Google Chrome Frame，那么就走安装的组件，如果没有，Edge 模式通知 Windows Internet Explorer以最高级别的可用模式显示内容。<br>  9.HandheldFriendly手持式友好，针对手持设备优化，主要是针对一些老的不识别viewport的浏览器，比如黑莓<br>  10.format-detection格式监测，禁止将页面中的一连串数字识别为电话号码并设置为手机可拨打的链接。告诉设备不识别邮箱，点击之后不自动发送。</font><br>  &lt;meta/>标签，还有更多设置，需要时可以进一步探索~<br>

<h3 id="lt-title-lt-title"><a href="#lt-title-lt-title" class="headerlink" title="&lt;title>&lt;/title>"></a><font color="#FC5603">&lt;title>&lt;/title></font></h3><h3 id="lt-h1-lt-h6"><a href="#lt-h1-lt-h6" class="headerlink" title="&lt;h1> ~ &lt;h6>"></a><font color="#FC5603">&lt;h1> ~ &lt;h6></font></h3><h3 id="lt-p-lt-p"><a href="#lt-p-lt-p" class="headerlink" title="&lt;p>&lt;/p>"></a><font color="#FC5603">&lt;p>&lt;/p></font></h3><h3 id="结构化标签-span、div"><a href="#结构化标签-span、div" class="headerlink" title="结构化标签:span、div"></a><font color="#FC5603">结构化标签:span、div</font></h3><h3 id="HTML编码"><a href="#HTML编码" class="headerlink" title="HTML编码"></a><font color="#FC5603">HTML编码</font></h3><p>文字分隔符  &amp;nbsp ;<br>左尖角号    &amp;lt ;<br>右尖角号    &amp;gt ;<br>换行     &lt;br/&gt;<br>水平线   &lt;hr/&gt;</p>
<h3 id="不建议使用的标签"><a href="#不建议使用的标签" class="headerlink" title="不建议使用的标签"></a><font color="#FC5603">不建议使用的标签</font></h3><p>&lt;strong>&lt;/strong>加粗标签<br>&lt;em>&lt;/em>斜体标签</p>
<p>&lt;address>&lt;/address>地址标签<br>&lt;del>&lt;/del>中划线（删除）标签</p>
<ul>
<li><font size="1">原则：结构样式行为相分离（html 结构，css 样式，js 交互行为）。<br>这种实现样式的标签，我们完全可以通过css操作不同标签来实现。</font><br><br></li>
</ul>
<h2 id="3-常用标签"><a href="#3-常用标签" class="headerlink" title="3. 常用标签"></a><font color="#F33F50">3. 常用标签</font></h2><h3 id="lt-img"><a href="#lt-img" class="headerlink" title="&lt;img/>"></a><font color="#FC5603">&lt;img/></font></h3><p>src: source 资源<br>alt: 占位内容<br>title: 图片标题</p>
<h3 id="lt-a-lt-a"><a href="#lt-a-lt-a" class="headerlink" title="&lt;a>&lt;/a>"></a><font color="#FC5603">&lt;a>&lt;/a></font></h3><ul>
<li><p>href : hyperText reference 超文本引用<br>1、URL（相对路径，绝对路径，链接）<a href="https://www.baidu.com" target="_blank" rel="noopener">baidu</a><br>2、锚点 <a href="#footer">↓</a><br>3、协议限定符<a href="javascript:{alert('点就点');console.log('123');}" target="_self">点我</a><br>4、tel &amp; mailTo  <a href="tel:123456" target="_blank" rel="noopener">123456</a>  <a href="mailto:123456@789.com" target="_blank" rel="noopener">123456@789.com</a></p>
</li>
<li><p>target属性: _self（默认值）、 _blank 、 _parent 、 _top</p>
</li>
</ul>
<h3 id="lt-ul-lt-li-lt-li-lt-ul"><a href="#lt-ul-lt-li-lt-li-lt-ul" class="headerlink" title="&lt;ul>&lt;li>&lt;/li>&lt;/ul>"></a><font color="#FC5603">&lt;ul>&lt;li>&lt;/li>&lt;/ul></font></h3><p>ul: unordered lists 无序列表 ( <font color=" red">不赞成使用</font> type : disc square circle )<br>ol: ordered lists 有序列表 ( type    : 1  A   a     I   i ， start : number ， reversed)<br>li: list item 列表项</p>
<h3 id="lt-table-lt-table"><a href="#lt-table-lt-table" class="headerlink" title="&lt;table>&lt;/table>"></a><font color="#FC5603">&lt;table>&lt;/table></font></h3><blockquote>
<p>&lt;table>&lt;tr>&lt;td>&lt;/td>&lt;/tr>&lt;/table><br>  简单的 HTML 表格由 table 元素以及一个或多个 tr、th 或 td 元素组成。<br>  tr 元素定义表格行，th 元素定义表头，td 元素定义表格单元。<br>  更复杂的HTML表格也可能包括 caption、col、colgroup、thead、tfoot以及 tbody 元素。</p>
</blockquote>
  <table><thead><tr><th>年</th><th>月</th><th>日</th></tr></thead><tbody><tr align="center"><td>1-1</td><td>1-2</td><td>1-3</td></tr><tr><td colspan="2">2-1</td><td rowspan="2">2-2</td></tr><tr><td>3-1</td></tr></tbody></table>


<h3 id="lt-form-lt-form"><a href="#lt-form-lt-form" class="headerlink" title="&lt;form>&lt;/form>"></a><font color="#FC5603">&lt;form>&lt;/form></font></h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">&lt;form method = <span class="string">'get'</span> action = <span class="string">'/user/register'</span>&gt;</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">      账号：</span><br><span class="line">    &lt;input <span class="built_in">type</span> = <span class="string">'text'</span> name = <span class="string">'username'</span>/&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">      密码：</span><br><span class="line">    &lt;input <span class="built_in">type</span> = <span class="string">'password'</span> name = <span class="string">'password'</span>/&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">      性别：</span><br><span class="line">    &lt;input <span class="built_in">type</span> = <span class="string">'radio'</span> name = <span class="string">'sex'</span> value = <span class="string">'1'</span> checked/&gt; 男</span><br><span class="line">    &lt;input <span class="built_in">type</span> = <span class="string">'radio'</span> name = <span class="string">'sex'</span> value = <span class="string">'2'</span>/&gt; 女</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">      爱好：</span><br><span class="line">    &lt;input <span class="built_in">type</span> = <span class="string">'checkBox'</span> name = <span class="string">'bobby'</span> value = <span class="string">'1'</span>/&gt; 唱  </span><br><span class="line">    &lt;input <span class="built_in">type</span> = <span class="string">'checkBox'</span> name = <span class="string">'bobby'</span> value = <span class="string">'2'</span> checked /&gt; 跳 </span><br><span class="line">    &lt;input <span class="built_in">type</span> = <span class="string">'checkBox'</span> name = <span class="string">'bobby'</span> value = <span class="string">'3'</span>/&gt; wrap  </span><br><span class="line">    &lt;input <span class="built_in">type</span> = <span class="string">'checkBox'</span> name = <span class="string">'bobby'</span> value = <span class="string">'4'</span>/&gt; 篮球🏀</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">    &lt;input <span class="built_in">type</span> = <span class="string">'submit'</span> value = <span class="string">'注册'</span> /&gt;   </span><br><span class="line">    &lt;input <span class="built_in">type</span> = <span class="string">'reset'</span> value = <span class="string">'取消'</span>/&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/form&gt;</span><br></pre></td></tr></table></figure>
<p>  <form method="get" action="/user/register"><br>    账号：<input type="text" name="username" placeholder="请输入账号"><br>    密码：<input type="password" name="password" placeholder="请设置密码"><br>    民族：<select name="nation"><option name="han">汉族</option><option name="minority">少数民族</option></select><br>    性别：<input type="radio" name="sex" value="1" checked> 男 <input type="radio" name="sex" value="2"> 女<br>    爱好：<input type="checkBox" name="bobby" value="1"> 唱  <input type="checkBox" name="bobby" value="2" checked> 跳 <input type="checkBox" name="bobby" value="3"> wrap  <input type="checkBox" name="bobby" value="4"> 篮球🏀<br>    <input type="submit" value="注册">   <input type="reset" value="取消"><br>  </form></p>
<p><hr><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br></p>
<h1 id="二、-HTML5"><a href="#二、-HTML5" class="headerlink" title="二、 HTML5"></a><font color="#DC143C">二、 HTML5</font></h1><h2 id="1、-canvas"><a href="#1、-canvas" class="headerlink" title="1、 canvas"></a><font color="#F33F50">1、 canvas</font></h2><p>  游戏、图表、动画、codepen.io（HTML5动效）<br>  最早在safari1.3中引入，IE9之前的浏览器不支持canvas。(<a href="http://caniuse.com，可测试兼容性" target="_blank" rel="noopener">http://caniuse.com，可测试兼容性</a>)</p>
<h3 id="1）使用"><a href="#1）使用" class="headerlink" title="1）使用"></a>1）使用</h3><h4 id="1-添加canvas标签"><a href="#1-添加canvas标签" class="headerlink" title="1. 添加canvas标签"></a>1. 添加canvas标签</h4><p>  获得canvas元素<br>  获得canvas上下文对象<br>  <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;canvas id = <span class="string">'myCanvas'</span> width = 500 height = 500&gt;&lt;/canvas&gt;</span><br><span class="line">var canvas = document.getElementById(<span class="string">'myCanvas'</span>);</span><br><span class="line">var ctx = canvas.getContext(<span class="string">'2d'</span>);</span><br></pre></td></tr></table></figure></p>
<h4 id="2-两个对象"><a href="#2-两个对象" class="headerlink" title="2. 两个对象"></a>2. 两个对象</h4><p>  元素对象（canvas）和上下文对象（通过getContext(‘2d’)方法获取到的CanvasRenderingContext对象）。<br>  元素对象相当于画布，上下文对象相当于画笔，接下来所有操作是基于上下文对象的。</p>
<h4 id="3-线段"><a href="#3-线段" class="headerlink" title="3. 线段"></a>3. 线段</h4><p>  ctx.moveTo(x,y);   移动到x，y坐标点<br>  ctx.lineTo(x,y);从当前点绘制直线到x，y坐标<br>  ctx.stroke(); 描边<br>  ctx.strokeStyle=’red’; 设置描边颜色<br>  ctx.lineWidth = 20; 设置线段宽度<br>  ctx.closePath();闭合当前路径和回到起始点的区别<br>  ctx.fill();填充<br>  ctx.fillStyle=’green’; 设置填充颜色</p>
<ul>
<li>重点：fill 和 stroke方法都是作用在当前的所有子路径,完成一条路径后要重新开始另一条路径时，必须使用beginPath()方法（开始子路径的一个新的集合）。</li>
</ul>
<h4 id="4-矩形"><a href="#4-矩形" class="headerlink" title="4. 矩形"></a>4. 矩形</h4><p>  ctx.rect( x , y , dx , dy );<br>  ctx.fillRect( x , y , dx , dy );<br>  ctx.strokeRect( x , y , w , h );<br>  <font color="red">特殊点：strokeRect和fillRect自带beginPath属性。</font><br>  ctx.strokeStyle = ‘red’;<br>  ctx.strokeRect( 10 , 10 , 150 , 100 );<br>  ctx.strokeStyle = ‘black’;<br>  ctx.strokeRect( 200 , 10 , 100 , 150);</p>
<canvas id="myCanvas" width="600" height="200"></canvas>

<h4 id="5-擦除当前区域"><a href="#5-擦除当前区域" class="headerlink" title="5. 擦除当前区域"></a>5. 擦除当前区域</h4><p>  ctx.clearRect( x , y , dx , dy );<br>  <font color="red">不切断当前子路径，会擦除失效。</font><br>  ctx1.rect( 10 , 10 , 100 , 100 );<br>  ctx1.fill();<br>  ctx1.clearRect( 10 , 10 , 50 , 50);<br>  ctx1.beginPath();<br>  ctx1.rect(130,10,80,80);<br>  ctx1.fillStyle = ‘red’;<br>  ctx1.fill();</p>
<canvas id="myCanvas1" width="600" height="120"></canvas>

<h4 id="6-弧形"><a href="#6-弧形" class="headerlink" title="6. 弧形"></a>6. 弧形</h4><p>  arc( x , y , r , 起始弧度 ， 结束弧度 ， 弧形方向)；     角以弧度计，0顺时针，1逆时针</p>
<h4 id="7-圆角"><a href="#7-圆角" class="headerlink" title="7. 圆角"></a>7. 圆角</h4><p>  arc( x1 , y1 , x2 , y2 , r)；    角以弧度计，0顺时针，1逆时针</p>
<h4 id="8-贝塞尔曲线"><a href="#8-贝塞尔曲线" class="headerlink" title="8. 贝塞尔曲线"></a>8. 贝塞尔曲线</h4><p>  quadratucCurveTo( x1 , y1 , ex , ey); 二次贝塞尔曲线<br>  bezierCurveTo( x1 , y1 , x2 , y2 , ex , ey);三次贝塞尔曲线</p>
<h4 id="9-坐标轴转换"><a href="#9-坐标轴转换" class="headerlink" title="9. 坐标轴转换"></a>9. 坐标轴转换</h4><p>  translate( dx , dy);                    重新映射画布上的（ 0 ， 0）位置<br>  scale( sx , sy );                       缩放当前绘图及轴<br>  rotate( Math.PI )                       旋转当前绘图（弧度制）<br>  save()   restore()                      保存当前图像状态的一份拷贝，从栈中弹出存储的图形状态并恢复<br>  setTransform( a, b, c, d, e, f )   先重置再变换（水平旋转 水平倾斜 垂直倾斜 垂直缩放 水平移动 垂直移动）<br>  transform( a , b , c , d , e , f )      在之前的基础</p>
<h4 id="10-填充图案"><a href="#10-填充图案" class="headerlink" title="10. 填充图案"></a>10. 填充图案</h4><p>  createPattern( image , ‘repeat|repeat-x|repeat-y|no-repeat’ );<br>  image可以是img元素（Image对象）、canvas元素、video元素（有图形的）<br>  <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">var canvas2 = document.getElementById(<span class="string">'myCanvas2'</span>);</span><br><span class="line">var ctx2 = canvas2.getContext(<span class="string">'2d'</span>);</span><br><span class="line">var oImg = document.getElementsByClassName(<span class="string">'fillPicture'</span>)[0];</span><br><span class="line">ctx2.fillStyle = ctx2.createPattern(oImg,<span class="string">'repeat-x'</span>);</span><br><span class="line">ctx2.fillRect(70,0,500,200);</span><br></pre></td></tr></table></figure></p>
<p><img class="fillPicture" style="opacity:0;width:0;height:0;" src="https://timgsa.baidu.com/timg?image&quality=80&size=b9999_10000&sec=1577251943575&di=a4ef12d40891fb543a4b0a541b728246&imgtype=0&src=http%3A%2F%2Fdik.img.kttpdq.com%2Fpic%2F19%2F13131%2Fc671a4a7144ee484_1024x768.jpg"></p>
<canvas id="myCanvas2" width="600" height="200"></canvas>


<h4 id="11-渐变"><a href="#11-渐变" class="headerlink" title="11. 渐变"></a>11. 渐变</h4><p>  createLinearGradient( x1 , y1 , x2 , y2 );  线性渐变，必须在填充渐变的区域里定义渐变，否则无效<br>  createRadialGradient(x1,y1,r1,x2,y2,r2);    径向渐变，必须在填充渐变的区域里定义渐变，否则无效<br>  addColorStop( p , color );                  添加颜色变化<br>  <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">var canvas3 = document.getElementById(<span class="string">"myCanvas3"</span>);</span><br><span class="line">var ctx3 = canvas3.getContext(<span class="string">'2d'</span>);</span><br><span class="line">var <span class="built_in">bg</span> = ctx2.createLinearGradient(0,0,0,500);</span><br><span class="line">bg.addColorStop(0,<span class="string">"red"</span>);</span><br><span class="line">bg.addColorStop(0.5,<span class="string">"green"</span>);</span><br><span class="line">ctx3.fillStyle = <span class="built_in">bg</span>;</span><br><span class="line">ctx3.fillRect(70,0,600,200);</span><br></pre></td></tr></table></figure></p>
<canvas id="myCanvas3" width="600" height="200"></canvas>

<h4 id="12-阴影"><a href="#12-阴影" class="headerlink" title="12. 阴影"></a>12. 阴影</h4><p>  shadowColor<br>  shadowOffsetX<br>  shadowOffsetY<br>  shadowBlur<br>  <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">var canvas4 = document.getElementById(<span class="string">"myCanvas4"</span>);</span><br><span class="line">var ctx4 = canvas4.getContext(<span class="string">'2d'</span>);</span><br><span class="line">ctx4.fillStyle=<span class="string">"SeaGreen"</span>;</span><br><span class="line">ctx4.shadowColor = <span class="string">"pink"</span>;</span><br><span class="line">ctx4.shadowBlur = 10;</span><br><span class="line">ctx4.shadowOffsetX = 30;</span><br><span class="line">ctx4.shadowOffsetY = -20;</span><br><span class="line">ctx4.fillRect(80,30,460,140);</span><br></pre></td></tr></table></figure></p>
<canvas id="myCanvas4" width="600" height="180"></canvas>


<h4 id="13-文本"><a href="#13-文本" class="headerlink" title="13. 文本"></a>13. 文本</h4><p>  fillText(“文本” , x ,y);<br>  strokeText(“文本” , x ,y);<br>  measureText(“此属性了解就行”);<br>  font 字体<br>  textAlign : left(默认值) | center | right | start | end ;<br>  textBaseLine : top(默认值) | hanging(悬挂基线) | middle | alphabetic(标准的字母基线) | ideographic(表意字基线) | bottom;<br>  <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">var canvas5 = document.getElementById(<span class="string">"myCanvas5"</span>);</span><br><span class="line">var ctx5 = canvas5.getContext(<span class="string">'2d'</span>);</span><br><span class="line">ctx5.textAlign = <span class="string">"left"</span>;</span><br><span class="line">ctx.textBaseLine = <span class="string">"hanging"</span></span><br><span class="line">ctx5.fillStyle = <span class="string">"deeppink"</span>;</span><br><span class="line">ctx5.font = <span class="string">'40px sans-serif'</span>;</span><br><span class="line">ctx5.fillText(<span class="string">"Hello World!"</span> , 70 ,50);</span><br><span class="line">ctx5.strokeText(<span class="string">"Hello World!"</span> , 320 ,50);</span><br></pre></td></tr></table></figure></p>
<canvas id="myCanvas5" width="600" height="60"></canvas>

<h4 id="14-线段样式"><a href="#14-线段样式" class="headerlink" title="14. 线段样式"></a>14. 线段样式</h4><p>  lineCap : butt | square | round ;<br>  lineJoin : miter | round | bevel ;<br>  miterLimit : 当lineJoin是miter时，用于控制斜接部分的长度，如果斜接长度超过miterLimit的值，<br>  lineCap变成bevel。注：实际上是大于limit*lineWidth/2的值，了解就好。</p>
<h4 id="15-裁剪"><a href="#15-裁剪" class="headerlink" title="15. 裁剪"></a>15. 裁剪</h4><p>  clip(); 当前路径外的区域不再绘制<br>  注：可在clip()前用save()保存，后续通过restore()恢复。</p>
<h4 id="16-合成"><a href="#16-合成" class="headerlink" title="16. 合成"></a>16. 合成</h4><p>  globalCompositeOperation = “source-over(默认值，w3c标准) | copy |  source-atop | source-in | source-out | destination-over | destination-atop | destination-out | destination-in | lighter | xor”<span style="color:red;margin-left:36px;"><br>  注：可在clip()前用save()保存，后续通过restore()恢复。</span></p>
<h4 id="17-全局透明度"><a href="#17-全局透明度" class="headerlink" title="17. 全局透明度"></a>17. 全局透明度</h4><p>  globalAlpha</p>
<h4 id="18-绘制图片"><a href="#18-绘制图片" class="headerlink" title="18. 绘制图片"></a>18. 绘制图片</h4><p>  drawImage();<br>  1个参数是img ( Image , canvas , video )&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;注：onload<br>  3个参数是( img , x , y ) 起始点坐标<br>  5个参数是( img , x , y , dx , dy ) 图片所存区域的宽高<br>  9个参数是( img , x1 , y1 , dx1 , dy1 , x2 , y2 , dx2 , dy2 ) canvas绘制的起始点和大小</p>
<h4 id="19-将canvas内容导出"><a href="#19-将canvas内容导出" class="headerlink" title="19. 将canvas内容导出!!!"></a>19. 将canvas内容导出!!!</h4><p>  canvas.toDataURL();   这是canvas自身的方法，不是上下文对象。<br>  将canvas的内容抽取成一张图片，base64编码格式。注：同源策略的限制。<br>  将canvas的内容放入img元素里<br>  <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&lt;img class=<span class="string">"exportCan"</span>/&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">var exportCan = document.getElementsByClassName(<span class="string">"exportCan"</span>)[0];</span><br><span class="line">exportCan.onload = <span class="function"><span class="title">function</span></span>()&#123;</span><br><span class="line">    var data = canvas5.toDataURL();</span><br><span class="line">    this.src=data;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure></p>
<p>  <img class="exportCan"></p>
<h4 id="20-获取canvas像素信息"><a href="#20-获取canvas像素信息" class="headerlink" title="20. 获取canvas像素信息"></a>20. 获取canvas像素信息</h4><p>  getImageData( x , y , dx , dy ); 受同源策略影响<br>  createImageData( w , h ); 创建新的空白ImageData对象<br>  putImageData( imgData , x , y ); 将图像数据放在画布上<br>  <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">var canvas6 = document.getElementById(<span class="string">"myCanvas6"</span>);</span><br><span class="line">var ctx6 = canvas6.getContext(<span class="string">'2d'</span>);</span><br><span class="line">ctx6.fillStyle=<span class="string">"pink"</span>;</span><br><span class="line">ctx6.fillRect(70 , 0 , 100 , 100 );</span><br><span class="line">//对数据做处理，变成灰色</span><br><span class="line">var pixel = ctx6.getImageData(100 , 0 , 50 , 50);</span><br><span class="line">var row = pixel.width;</span><br><span class="line">var col = pixel.height;</span><br><span class="line">var d = pixel.data;</span><br><span class="line"><span class="keyword">for</span>(var i = 0 ; i &lt; row ; i++)&#123;</span><br><span class="line">    var c = i*col*4;</span><br><span class="line">    <span class="keyword">for</span>(var j = 0; j &lt; col ; j++)&#123;</span><br><span class="line">        d[c+j*4+3] = 100;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">ctx6.putImageData(pixel,100,10);</span><br></pre></td></tr></table></figure></p>
<canvas id="myCanvas6" width="200" height="100"></canvas>

<h4 id="21-RGBA"><a href="#21-RGBA" class="headerlink" title="21. RGBA"></a>21. RGBA</h4><p>  R-red       红色 ( 0 ~ 255)<br>  G-green     绿色 ( 0 ~ 255)<br>  B-blue      蓝色 ( 0 ~ 255)<br>  A-alpha     通道 ( 0透明 ~ 255完全可见)</p>
<h4 id="22-命中检测isPointInPath-x-y-检测是否在区域内，chrome与safari的区别"><a href="#22-命中检测isPointInPath-x-y-检测是否在区域内，chrome与safari的区别" class="headerlink" title="22. 命中检测isPointInPath( x , y ); 检测是否在区域内，chrome与safari的区别"></a>22. 命中检测<div style="margin-left:46px;">isPointInPath( x , y ); 检测是否在区域内，chrome与safari的区别</div></h4><p>  isPointInStroke( x , y ); 检测是否在线上<br>  还可以通过检测当前点的像素值，如果为透明，则该点不在路径上。</p>
<h4 id="23-非零线数准则"><a href="#23-非零线数准则" class="headerlink" title="23. 非零线数准则"></a>23. 非零线数准则</h4><p>  判断点p是否在多边形内，从点p向外做一条射线（可以任意方向），多边形的边从左到右经过射线环绕数减一，多边形的边从右向左经过经过射线环绕数加一，最后环绕数不为零，即表示在多边形内部。</p>
<h4 id="24-如何解决canvas高分屏模糊问题"><a href="#24-如何解决canvas高分屏模糊问题" class="headerlink" title="24. 如何解决canvas高分屏模糊问题"></a>24. 如何解决canvas高分屏模糊问题</h4><p>  在分辨率比较高的屏幕，例如iphone6/iphone6s/mac等机器上，因为canvas绘制的是位图，所以会导致模糊，解决办法是根据屏幕分辨率修改canvas样式代码中的宽和高与canvas的width和height的比例。（大画框小画布是不对的，小画框大画布是对的）。</p>
<h3 id="2-实践"><a href="#2-实践" class="headerlink" title="2) 实践"></a>2) 实践</h3><h4 id="刮刮乐"><a href="#刮刮乐" class="headerlink" title="刮刮乐"></a>刮刮乐</h4>  <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">&lt;canvas width=500 height=200 id=<span class="string">'ggl'</span>&gt;&lt;/canvas&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">const oCanvas=document.getElementById(<span class="string">'ggl'</span>);</span><br><span class="line">const ctx = oCanvas.getContext(<span class="string">'2d'</span>);</span><br><span class="line">const w = oCanvas.width;</span><br><span class="line">const h = oCanvas.height;</span><br><span class="line">ctx.fillRect(0,0,w,h);</span><br><span class="line">ctx.fillStyle=<span class="string">'green'</span>;</span><br><span class="line">oCanvas.style.backgroundImage=<span class="string">'url(https://timgsa.baidu.com/timg?image&amp;quality=80&amp;size=b9999_10000&amp;sec=1577251943575&amp;di=a4ef12d40891fb543a4b0a541b728246&amp;imgtype=0&amp;src=http%3A%2F%2Fdik.img.kttpdq.com%2Fpic%2F19%2F13131%2Fc671a4a7144ee484_1024x768.jpg)'</span>;</span><br><span class="line">ctx.globalCompositeOperation=<span class="string">'destination-out'</span>;</span><br><span class="line"></span><br><span class="line">const start = (e) =&gt; &#123;</span><br><span class="line">  const x = e.clientX, y = e.clientY;</span><br><span class="line">  ctx.beginPath();</span><br><span class="line">  ctx.arc(x, y, 10, 0, Math.PI*2, 0);</span><br><span class="line">  ctx.fill();</span><br><span class="line">&#125;;</span><br><span class="line">const stop = (e) =&gt; &#123;</span><br><span class="line">  oCanvas.removeEventListener(<span class="string">'mousemove'</span>,start);</span><br><span class="line">  oCanvas.removeEventListener(<span class="string">'mouseup'</span>, stop);</span><br><span class="line">&#125;;</span><br><span class="line">oCanvas.addEventListener(<span class="string">'mousedown'</span>, () =&gt; &#123;</span><br><span class="line">  oCanvas.addEventListener(<span class="string">'mousemove'</span>, start, <span class="literal">false</span>);</span><br><span class="line">  oCanvas.addEventListener(<span class="string">'mouseup'</span>, stop, <span class="literal">false</span>);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<h4 id="高斯"><a href="#高斯" class="headerlink" title="高斯"></a>高斯</h4><p>这个有时间研究一下<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">&lt;canvas width=600 height=400 id=<span class="string">'gs'</span>&gt;&lt;/canvas&gt;</span><br><span class="line">&lt;script src=<span class="string">'./gs.js'</span>&gt;&lt;/script&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">  const oCanvas = document.getElementById(<span class="string">'gs'</span>);</span><br><span class="line">  const ctx = oCanvas.getContext(<span class="string">'2d'</span>);</span><br><span class="line">  const oImg = document.createElement(<span class="string">'img'</span>);</span><br><span class="line">  oImg.src = <span class="string">'https://ss0.bdstatic.com/70cFuHSh_Q1YnxGkpoWK1HF6hhy/it/u=2248772065,1139700561&amp;fm=26&amp;gp=0.jpg'</span>;</span><br><span class="line">  oImg.onload = () =&gt; &#123;</span><br><span class="line">    ctx.drawImage(oImg, 0, 0, 500, 400);</span><br><span class="line">    const img = ctx.getImageData(0, 0, 500, 500);</span><br><span class="line">    gaussBlur(img);</span><br><span class="line">    ctx.putImageData(img, 0, 0);</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 可以再将画布变成图片输出</span></span><br><span class="line">    const data = oCanvas.toDataURL();</span><br><span class="line">    const oImg2 = new Image();</span><br><span class="line">    oImg2.src = data;</span><br><span class="line">    document.body.appendChild(oImg2);</span><br><span class="line">  &#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure></p>
<h2 id="2、-SVG"><a href="#2、-SVG" class="headerlink" title="2、 SVG"></a><font color="#F33F50">2、 SVG</font></h2><p>  Scalable Vector Graphics 可缩放矢量图形</p>
<p>  图表、图标icon、动效、矢量图（矢量图缩放不失帧，位图缩 放会失帧，canvas画出的图是位图）</p>
<p>  最早在safari1.3中引入，IE9之前的浏览器不支持canvas。(<a href="http://caniuse.com，可测试兼容性" target="_blank" rel="noopener">http://caniuse.com，可测试兼容性</a>)</p>
<h3 id="1）使用-1"><a href="#1）使用-1" class="headerlink" title="1）使用"></a><strong>1）使用</strong></h3><h4 id="1-SVG元素"><a href="#1-SVG元素" class="headerlink" title="1. SVG元素"></a>1. SVG元素</h4>  <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&lt;style&gt;  svg&#123; border: 1px solid pink; &#125;&lt;/style&gt;</span><br><span class="line">&lt;svg width=<span class="string">"500"</span> height=<span class="string">"500"</span>å&gt;</span><br><span class="line">  直线&lt;line x1=<span class="string">"10"</span> y1=<span class="string">"10"</span> x2=<span class="string">"200"</span> y2=<span class="string">"10"</span>&gt;&lt;/line&gt;</span><br><span class="line">  矩形&lt;rect x=<span class="string">"20"</span> y=<span class="string">"20"</span> width=<span class="string">"100"</span> height=<span class="string">"100"</span> rx=<span class="string">"10"</span> ry=<span class="string">"20"</span>&gt;&lt;/rect&gt;</span><br><span class="line">  圆形&lt;circle r=<span class="string">"50"</span> cx=<span class="string">"70"</span> cy=<span class="string">"200"</span>&gt;&lt;/circle&gt;</span><br><span class="line">  椭圆&lt;ellipse rx=<span class="string">"100"</span> ry=<span class="string">"50"</span> cx=<span class="string">"100"</span> cy=<span class="string">"300"</span>&gt;&lt;/ellipse&gt;</span><br><span class="line">  折线&lt;polyline points=<span class="string">"20 370, 60 380, 75 365, 100 380, 125 365, 150 380, 175 365, 190 380"</span>&gt;&lt;/polyline&gt;</span><br><span class="line">  文本&lt;text x=<span class="string">"50"</span> y=<span class="string">"460"</span>&gt;helloWord&lt;/text&gt;</span><br><span class="line">&lt;/svg&gt;</span><br></pre></td></tr></table></figure>
<p>  <style>svg{border: 1px solid pink;}</style><br>  <svg width="500" height="500"><line x1="10" y1="10" x2="200" y2="10"/><rect x="20" y="20" width="100" height="100" rx="10" ry="20"/><circle r="50" cx="70" cy="200"/><ellipse rx="100" ry="50" cx="100" cy="300"/><polyline points="20 370, 60 380, 75 365, 100 380, 125 365, 150 380, 175 365, 190 380"/><text x="50" y="460">helloWord</text></svg></p>
<h4 id="2-样式属性"><a href="#2-样式属性" class="headerlink" title="2. 样式属性"></a>2. 样式属性</h4><p>  fill<br>  stroke<br>  stroke-width<br>  stroke-opacity / fill-opacity<br>  stroke-linecap (butt/round/square)<br>  stroke-linejoin (beval/round/miter)</p>
<p>  <style>svg{border:4px solid pink;}.circle{fill:black;stroke:black;}.rect,.eyek,.ellipse{fill:white;stroke:black;stroke-width:4px;}.lineduan{stroke:black;stroke-width:4px;stroke-linecap:round;}.text{font-size:20px;fill:#0ff;stroke:#0ff;}</style><br>  <svg width="350" height="300"><text class="text" x="35" y="35">A good boy!</text><polyline points="110 90,125 60, 160 90, 200 60, 240 90, 275 60,290 90"/><rect class="rect" x="90" y="90" width="220" height="200" rx="30" ry="30"/><circle class="circle eyek" r="25" cx="150" cy="160"/><circle class="circle eyek" r="25" cx="250" cy="160"/><circle calss="circle" r="10" cx="160" cy="170"/><circle class="circle" r="10" cx="260" cy="170"/><line class="lineduan" x1="200" y1="180" x2="190" y2="210"/><line class="lineduan" x1="200" y1="180" x2="210" y2="210"/><line class="lineduan" x1="190" y1="210" x2="210" y2="210"/><ellipse class="ellipse" rx="40" ry="20" cx="200" cy="260"/></svg></p>
<h4 id="3-path元素"><a href="#3-path元素" class="headerlink" title="3. path元素"></a>3. path元素</h4>  <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">&lt;svg width=<span class="string">"500"</span> height=<span class="string">"410"</span>&gt;</span><br><span class="line">  M L &lt;path d=<span class="string">"M 10 10 L 20 10"</span>/&gt;绝对定位</span><br><span class="line">  m l &lt;path d=<span class="string">"m 10 10 l 20 10"</span>/&gt;相对定位</span><br><span class="line">  H V &lt;path d=<span class="string">"M 30 40 H 100 V 100"</span>/&gt;横 竖绝对</span><br><span class="line">  h v &lt;path d=<span class="string">"m 10 100 h 100 v 100"</span>/&gt;横 竖相对</span><br><span class="line">  Z   &lt;path d=<span class="string">"M 10 220 H 200 V 200 Z"</span>/&gt;闭合</span><br><span class="line">  A   &lt;path d=<span class="string">"M 100 300 A 70 70 90 1 1 150 400"</span>/&gt;圆弧指令</span><br><span class="line"> （</span><br><span class="line">    x1，起点x轴坐标</span><br><span class="line">    y1，起点y轴坐标</span><br><span class="line">    rx圆弧的x轴半径</span><br><span class="line">    ry圆弧的y轴半径</span><br><span class="line">    x-axis-rotation圆弧相对x轴的旋转角度默认是顺时针，可设置负值</span><br><span class="line">    large-arc-flag，从A点到B点绘制一条弧线，可以得到两条不同的弧线。一条较大，另一条较小。large-arc-flag就是用于决定到底是绘制较大的那一条弧线还是绘制较小的那一条弧线，1-&gt;大圆弧</span><br><span class="line">    sweep-flag从起点到终点是顺/逆时针，1 顺 0 逆</span><br><span class="line">    x2，终点x轴坐标</span><br><span class="line">    y2，终点y轴坐标</span><br><span class="line">  ）</span><br><span class="line">&lt;/svg&gt;</span><br></pre></td></tr></table></figure>
<p>  <style>path{fill:transparent;stroke:black;}</style><br>  <svg width="500" height="260"><path d="M 10 10 L 20 10"/><path d="m 10 10 l 20 10"/><path d="M 30 40 H 100 V 100"/><path d="m 10 100 h 100 v 100"/><path d="M 10 220 H 200 V 200 Z"/><path d="M 300 100 A 70 70 90 1 1 400 150"/></svg></p>
<ul>
<li><p>贝塞尔曲线</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">二次贝塞尔曲线</span><br><span class="line">&lt;style&gt;.one&#123;fill:transparent;stroke:green;&#125;.two&#123;fill:transparent;stroke:orange;&#125;.three&#123;fill:transparent;stroke:pink;&#125;&lt;/style&gt;</span><br><span class="line">Q &lt;path d=<span class="string">"M 100 100 Q 200 0 300 300"</span>  class=<span class="string">"one"</span>/&gt;</span><br><span class="line">T &lt;path d=<span class="string">"M 100 100 A 200 0 300 300 T 500 0"</span> class=<span class="string">"two"</span>/&gt;</span><br><span class="line"></span><br><span class="line">三次贝塞尔曲线</span><br><span class="line">C &lt;path d=<span class="string">"M 100 300 C 80 100 180 100 240 100"</span> class=<span class="string">"three"</span>/&gt;</span><br></pre></td></tr></table></figure>
<p><style>.one{fill:transparent;stroke:green;}.two{fill:transparent;stroke:orange;}.three{fill:transparent;stroke:pink;</style></p>
<svg width="500" height="410"><path d="M 0 0 Q 100 0 200 200" class="one"/><path d="M 100 100 Q 200 0 300 300 T 500 0" class="two"/><path d="M 100 300 C 80 100 180 100 240 100" class="three"/></svg>

<p>自动生成路径：<a href="https://editor.method.ac/" target="_blank" rel="noopener">https://editor.method.ac/</a></p>
</li>
</ul>
<h4 id="4-SVG渐变"><a href="#4-SVG渐变" class="headerlink" title="4. SVG渐变"></a>4. SVG渐变</h4>  <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">线性渐变：</span><br><span class="line">&lt;svg width=<span class="string">"500"</span> height=<span class="string">"410"</span>&gt;</span><br><span class="line">  &lt;defs&gt;</span><br><span class="line">    &lt;linearGradient id=<span class="string">"bg1"</span> x1=<span class="string">"0"</span> y1=<span class="string">"0"</span> x2=<span class="string">"0"</span> y2=<span class="string">"100%"</span>&gt;</span><br><span class="line">      &lt;stop offset=<span class="string">"0%"</span> style=<span class="string">"stop-color:rgb(155,155,0);"</span>/&gt;</span><br><span class="line">      &lt;stop offset=<span class="string">"100%"</span> style=<span class="string">"stop-color:rgb(255,0,0)"</span>/&gt;</span><br><span class="line">    &lt;/linearGradient&gt;</span><br><span class="line">  &lt;/defs&gt;</span><br><span class="line">  &lt;rect x=<span class="string">"0"</span> y=<span class="string">"0"</span> width=<span class="string">"500"</span> height=<span class="string">"410"</span> style=<span class="string">"fill:url(#bg1)"</span>/&gt;</span><br><span class="line">&lt;/svg&gt;</span><br></pre></td></tr></table></figure>
  <svg width="500" height="410"><defs><lineargradient id="bg1" x1="0" y1="0" x2="0" y2="100%"><stop offset="0%" style="stop-color:rgb(155,155,0);"/><stop offset="100%" style="stop-color:rgb(255,0,0)"/></lineargradient></defs><rect x="0" y="0" width="500" height="410" style="fill:url(#bg1)"/></svg>


 <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">径向渐变：</span><br><span class="line">&lt;svg width=<span class="string">"500"</span> height=<span class="string">"410"</span>&gt;</span><br><span class="line">  &lt;defs&gt;</span><br><span class="line">    &lt;radialGradient id=<span class="string">"bg3"</span> cx=<span class="string">"50%"</span> cy=<span class="string">"50%"</span> r=<span class="string">"60%"</span> fx=<span class="string">"60%"</span> fy=<span class="string">"50%"</span>&gt;</span><br><span class="line">      &lt;stop offset=<span class="string">"0%"</span> style=<span class="string">"stop-color:rgb(155,155,0);"</span>/&gt;</span><br><span class="line">      &lt;stop offset=<span class="string">"100%"</span> style=<span class="string">"stop-color:rgb(255,0,0)"</span>/&gt;</span><br><span class="line">    &lt;/radialGradient&gt;</span><br><span class="line">  &lt;/defs&gt;</span><br><span class="line">  &lt;rect x=<span class="string">"0"</span> y=<span class="string">"0"</span> width=<span class="string">"500"</span> height=<span class="string">"410"</span> style=<span class="string">"fill:url(#bg3)"</span>/&gt;</span><br><span class="line">&lt;/svg&gt;</span><br></pre></td></tr></table></figure>
  <svg width="500" height="410"><defs><radialgradient id="bg2" cx="50%" cy="50%" r="50%" fx="60%" fy="60%"><stop offset="0%" style="stop-color:rgb(200,250,0);"/><stop offset="100%" style="stop-color:rgb(250,0,205)"/></radialgradient></defs><rect x="0" y="0" width="500" height="410" style="fill:url(#bg2)"/></svg>

<h4 id="5-SVG滤镜"><a href="#5-SVG滤镜" class="headerlink" title="5. SVG滤镜"></a>5. SVG滤镜</h4><p>  高斯滤镜<br>  <a href="http://www.w3cshool.com.cn/svg/svg-filters_intro.asp" target="_blank" rel="noopener">其他滤镜</a><br>  <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&lt;svg width=<span class="string">"500"</span> height=<span class="string">"410"</span>&gt;</span><br><span class="line">  &lt;defs&gt;</span><br><span class="line">    &lt;filter id=<span class="string">"Gaussian_blur"</span>&gt;</span><br><span class="line">      &lt;feGaussianBlur <span class="keyword">in</span>=<span class="string">"SourceGraphic"</span> stdDeviation=<span class="string">"20"</span>/&gt;</span><br><span class="line">    &lt;/filter&gt;</span><br><span class="line">  &lt;/defs&gt;</span><br><span class="line">  &lt;rect x=<span class="string">"0"</span> y=<span class="string">"0"</span> width=<span class="string">"500"</span> height=<span class="string">"410"</span> fill=”yellow“ style=<span class="string">"filter:url(#Gaussian_blur)"</span> /&gt;</span><br><span class="line">&lt;/svg&gt;</span><br></pre></td></tr></table></figure></p>
  <svg width="500" height="410"><defs><filter id="Gaussian_blur"><fegaussianblur in="SourceGraphic" stddeviation="20"/></filter></defs><rect x="0" y="0" width="500" height="410" fill="”yellow“" style="filter:url(#Gaussian_blur)"/></svg>

<h4 id="6-SVG路径动画"><a href="#6-SVG路径动画" class="headerlink" title="6. SVG路径动画"></a>6. SVG路径动画</h4><p>  stroke-dasharray: 100px;     画100空100, 100px 300px画100空300  10 20 30 40 画10空20画30空40<br>  stroke-dashoffset: 15px;     左右移动<br>  动画实现原理，通过修改stroke-dashoffset的值让路径慢慢地展示出来<br>  <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">&lt;style&gt;</span><br><span class="line">  .move &#123;</span><br><span class="line">    stroke: <span class="comment">#f00;</span></span><br><span class="line">    stroke-dasharray: 80 60;</span><br><span class="line">    stroke-dashoffset: -100;</span><br><span class="line">    animation: dash 8s infinite linear forwards;</span><br><span class="line">  &#125;</span><br><span class="line">  @keyframes dash &#123;</span><br><span class="line">    from &#123;  </span><br><span class="line">      stroke-dashoffset: 2000;</span><br><span class="line">    &#125;</span><br><span class="line">    to &#123;  </span><br><span class="line">      stroke-dasharray: 10 20 30 10;  </span><br><span class="line">      stroke-dashoffset: 0;  </span><br><span class="line">      stroke: green;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&lt;/style&gt;</span><br><span class="line">&lt;svg width=<span class="string">"500"</span> height=<span class="string">"410"</span>&gt;</span><br><span class="line">  &lt;path d=<span class="string">"M 10 10 L 20 500"</span> class=<span class="string">"move"</span> /&gt;</span><br><span class="line">  &lt;path d=<span class="string">"M 100 10 L 100 400"</span> class=<span class="string">"move"</span> /&gt;</span><br><span class="line">  &lt;path d=<span class="string">"M 350 100 L 350 300"</span> class=<span class="string">"move"</span> /&gt;</span><br><span class="line">  &lt;path d=<span class="string">"M 200 30 L 200 300"</span> class=<span class="string">"move"</span> /&gt;</span><br><span class="line">  &lt;path d=<span class="string">"M 140 30 L 150 300"</span> class=<span class="string">"move"</span> /&gt;</span><br><span class="line">  &lt;path d=<span class="string">"M 300 30 L 300 400"</span> class=<span class="string">"move"</span> /&gt;</span><br><span class="line">  &lt;path d=<span class="string">"M 400 30 L 390 200"</span> class=<span class="string">"move"</span> /&gt;</span><br><span class="line">  &lt;path d=<span class="string">"M 480 30 L 480 200"</span> class=<span class="string">"move"</span> /&gt;</span><br><span class="line">&lt;/svg&gt;</span><br></pre></td></tr></table></figure></p>
<p> <style>.move {stroke: #f00;stroke-dasharray: 80 60;stroke-dashoffset: -100;animation: dash 8s infinite linear forwards;}@keyframes dash {from {  stroke-dashoffset: 2000;}to {  stroke-dasharray: 10 20 30 10;  stroke-dashoffset: 0;  stroke: green;}}</style><br>  <svg width="500" height="410"><path d="M 10 10 L 20 500" class="move"/><path d="M 100 10 L 100 400" class="move"/><path d="M 350 100 L 350 300" class="move"/><path d="M 200 30 L 200 300" class="move"/><path d="M 140 30 L 150 300" class="move"/><path d="M 300 30 L 300 400" class="move"/><path d="M 400 30 L 390 200" class="move"/><path d="M 480 30 L 480 200" class="move"/></svg></p>
<h4 id="7-SVG路径"><a href="#7-SVG路径" class="headerlink" title="7. SVG路径"></a>7. SVG路径</h4><p>getTotalLength： 获取路径长度<br>getPointAtLength： 获取路径上距离起始点距离x的点的坐标</p>
<div class="post-warning">严格来说，这两个方法只适用于path元素，但各浏览器实现起来有区别，如：chrome也能获取到line元素的路径长度</div>

<h4 id="8-viewBox"><a href="#8-viewBox" class="headerlink" title="8. viewBox"></a>8. viewBox</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;svg width=<span class="string">"500"</span> height=<span class="string">"410"</span> viewBox=<span class="string">'0,0,40,30'</span> preserveAspectRatio=<span class="string">"xMinYMid meet"</span>&gt;&lt;/svg&gt;</span><br></pre></td></tr></table></figure>
<p>xMin xMid xMax  x轴 左中右对齐<br>yMin yMid yMax  y轴 左中右对齐</p>
<ul>
<li>preserveAspectRatio 设置填充方式<br>meet    保持宽高比并将viewBox缩放为适合viewport的大小<br>slice    保持宽高比并将所有不在viewport中的viewBox剪裁掉<br>none    不保存宽高比。缩放图像适合整个viewbox，可能会发生图像变形</li>
</ul>
<h4 id="9-JS生成SVG元素"><a href="#9-JS生成SVG元素" class="headerlink" title="9. JS生成SVG元素"></a>9. JS生成SVG元素</h4><p>创建SVG元素需要指定命名空间，SVG元素对象一般通过调用setAttribute()来设定属性。<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">var char = <span class="string">'http://www.w3.org/2000/svg'</span>;</span><br><span class="line">var svg = document.createElementNS(char, <span class="string">'svg'</span>);</span><br><span class="line">svg.setAttribute(<span class="string">'width'</span>, 500);</span><br><span class="line">svg.setAttribute(<span class="string">'height'</span>, 500);</span><br><span class="line">svg.setAttribute(<span class="string">'viewBox'</span>, <span class="string">'0 0 500 500'</span>);</span><br><span class="line"></span><br><span class="line">var rect = document.createElementNS(char, <span class="string">'rect'</span>);</span><br><span class="line">rect.setAttribute(<span class="string">'x'</span>, 20);</span><br><span class="line">rect.setAttribute(<span class="string">'y'</span>, 30);</span><br><span class="line">rect.setAttribute(<span class="string">'width'</span>, 20);</span><br><span class="line">rect.setAttribute(<span class="string">'height'</span>, 30);</span><br><span class="line">rect.setAttribute(<span class="string">'fill'</span>, <span class="string">'red'</span>);</span><br><span class="line"></span><br><span class="line">svg.appendChild(rect);</span><br><span class="line">document.body.appendChild(svg);</span><br></pre></td></tr></table></figure></p>
<h3 id="2）SVG实例"><a href="#2）SVG实例" class="headerlink" title="2）SVG实例"></a>2）SVG实例</h3><h4 id="字"><a href="#字" class="headerlink" title="字"></a>字</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line">&lt;style&gt;</span><br><span class="line">  path &#123;</span><br><span class="line">    stroke: <span class="comment">#2d5c7b;</span></span><br><span class="line">    fill: transparent;</span><br><span class="line">  &#125;</span><br><span class="line">  @keyframes show &#123;</span><br><span class="line">    to &#123;</span><br><span class="line">      stroke-dashoffset: 0;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&lt;/style&gt;</span><br><span class="line">&lt;svg width=<span class="string">"800"</span> height=<span class="string">"600"</span> xmlns=<span class="string">"http://www.w3.org/2000/svg"</span>&gt;</span><br><span class="line">  &lt;!-- Created with Method Draw - http://github.com/duopixel/Method-Draw/ --&gt;</span><br><span class="line">  &lt;g&gt;</span><br><span class="line">   &lt;title&gt;background&lt;/title&gt;</span><br><span class="line">   &lt;rect fill=<span class="string">"#fff"</span> id=<span class="string">"canvas_background"</span> height=<span class="string">"602"</span> width=<span class="string">"802"</span> y=<span class="string">"-1"</span> x=<span class="string">"-1"</span>/&gt;</span><br><span class="line">   &lt;g display=<span class="string">"none"</span> overflow=<span class="string">"visible"</span> y=<span class="string">"0"</span> x=<span class="string">"0"</span> height=<span class="string">"100%"</span> width=<span class="string">"100%"</span> id=<span class="string">"canvasGrid"</span>&gt;</span><br><span class="line">    &lt;rect fill=<span class="string">"url(#gridpattern)"</span> stroke-width=<span class="string">"0"</span> y=<span class="string">"0"</span> x=<span class="string">"0"</span> height=<span class="string">"100%"</span> width=<span class="string">"100%"</span>/&gt;</span><br><span class="line">   &lt;/g&gt;</span><br><span class="line">  &lt;/g&gt;</span><br><span class="line">  &lt;g&gt;</span><br><span class="line">   &lt;title&gt;Layer 1&lt;/title&gt;</span><br><span class="line">   &lt;path d=<span class="string">"m176.5,126.45313c0,1 0,2 0,3c0,2 0,4 0,7c0,3 0,7 0,10c0,3 0,6 0,9c0,3 0,9 0,13c0,4 0,7 0,11c0,4 0,8 0,12c0,5 -0.61092,9.03746 0,14c0.50377,4.09221 1,8 1,13c0,2 0,4 0,4c0,1 0,1 1,1c0,0 0,-1 0,-2c0,-2 0,-5 0,-7c0,-3 0,-5 0,-8c0,-4 0,-6 0,-8c0,-2 0,-3 0,-4c0,0 0,-1 0,-1c0,0 0,0 0,-1c0,0 0,0 1,-1c0,0 0,-1 1,-2c0,0 1,-1 2,-2c1,-1 2,-2 4,-4c2,-2 3.41885,-3.41885 5,-5c1.58115,-1.58115 3.02675,-1.77025 4,-2c2.17625,-0.51375 3,-1 4,-1c1,0 3.07613,-0.38269 4,0c1.30656,0.5412 2,1 3,2c1,1 1.67964,3.02582 2,5c0.50655,3.12144 1.51126,6.02997 2,10c0.50377,4.09221 2.49345,7.87856 3,11c0.48055,2.96126 1,5 1,8c0,1 0,2 1,2l0,1l0,0l0,-1"</span> id=<span class="string">"svg_1"</span> stroke-width=<span class="string">"1.5"</span> stroke=<span class="string">"#000"</span> fill=<span class="string">"none"</span>/&gt;</span><br><span class="line">   &lt;path d=<span class="string">"m262.5,182.45313c0,0 -1,0 -1,0c-1,0 -2,0 -4,0c-1,0 -3,-1 -4,-1c-1,0 -3,0 -4,0c-1,0 -3,0 -4,0c-1,0 -2,0 -3,0c0,0 -1,0 -1,0c-1,0 -1,0 -1,0c-1,1 -1,1 -1,1c-1,1 -0.61731,1.07613 -1,2c-0.5412,1.30656 -1.4588,1.69344 -2,3c-0.38269,0.92387 -1,2 -1,3c0,2 -1,3 -1,5c0,1 -1,3 -1,5c0,3 0,5 0,7c0,2 0.4588,3.69344 1,5c0.38269,0.92387 1.186,1.69255 3,3c1.14726,0.8269 2.07613,1.61731 3,2c1.30656,0.5412 2,1 2,1c1,0 2.02675,0.22975 3,0c2.17625,-0.51375 4.186,-0.69255 6,-2c1.14726,-0.8269 2,-2 3,-3c1,-1 0.5695,-2.133 2,-6c0.77579,-2.09717 1.31073,-4.08025 2,-7c0.51373,-2.17625 1.5405,-4.0535 2,-6c0.51373,-2.17625 1,-3 1,-4c0,-1 0,-2 0,-3c0,-1 0,-1 0,-2c0,0 0,1 0,1c0,1 0,2 0,4c0,1 0,4 0,8c0,5 1.49622,9.90779 2,14c0.48874,3.97003 1.48627,6.82375 2,9c0.22977,0.97325 0.48627,1.82375 1,4c0.22977,0.97325 1,1 1,2c0,0 1,0 1,1l-1,-1l-3,-1"</span> id=<span class="string">"svg_2"</span> stroke-width=<span class="string">"1.5"</span> stroke=<span class="string">"#000"</span> fill=<span class="string">"none"</span>/&gt;</span><br><span class="line">   &lt;path d=<span class="string">"m342.5,118.45313c0,0 0,5 0,11c0,6 0,12 0,17c0,3 0,7 0,11c0,3 0,5 0,7c0,4 0,7 0,10c0,3 0,6 0,9c0,3 0,6 0,9c0,3 0,5 0,8c0,3 0,5 0,7c0,1 0,1 0,3c0,0 0,0 0,1l0,-1l0,-1l-1,-1"</span> id=<span class="string">"svg_3"</span> stroke-width=<span class="string">"1.5"</span> stroke=<span class="string">"#000"</span> fill=<span class="string">"none"</span>/&gt;</span><br><span class="line">   &lt;path d=<span class="string">"m344.5,176.45313c0,-1 1,-1 1,-1c1,0 2,0 4,0c1,0 1.69345,-0.4588 3,-1c0.92389,-0.38269 2,0 2,0c1,0 2,0 3,0c2,0 2.69345,0.4588 4,1c0.92389,0.38269 1.69345,1.4588 3,2c0.92389,0.38269 2.1731,0.85274 3,2c1.30746,1.814 2.28857,3.86829 4,8c1.21014,2.92157 1.31073,6.08025 2,9c0.51373,2.17625 1.48627,4.82375 2,7c0.4595,1.9465 0,4 0,5c0,2 0,3 0,4c0,1 0,2 1,2c0,0 0,0 0,-1l0,-1l0,-1"</span> id=<span class="string">"svg_4"</span> stroke-width=<span class="string">"1.5"</span> stroke=<span class="string">"#000"</span> fill=<span class="string">"none"</span>/&gt;</span><br><span class="line">   &lt;path d=<span class="string">"m422.5,183.45313c-1,0 -1,0 -1,0c-1,-1 -2,-1 -4,-2c-2,-1 -4.06601,-1.87766 -6,-3c-3.11847,-1.80972 -4.90778,-3.49623 -9,-4c-0.99249,-0.12218 -2,0 -3,0c0,0 -0.29291,-0.70711 -1,0c-0.70709,0.70711 -0.4588,1.69344 -1,3c-0.76538,1.84776 -0.69125,4.07179 -2,9c-0.81165,3.05634 -1.49347,6.87856 -2,10c-0.48056,2.96126 0,6 0,9c0,3 -0.76538,5.15224 0,7c0.5412,1.30656 0.69345,2.4588 2,3c0.92389,0.38269 1.07611,0.61731 2,1c1.30655,0.5412 1.07611,0.61731 2,1c1.30655,0.5412 2,1 2,1c1,0 1,0 2,0c1,0 2,0 2,0c1,-1 2,-2 3,-3c1,-1 2,-2 3,-4c1,-2 2.48627,-3.82375 3,-6c0.4595,-1.9465 1,-3 2,-4l0,-1l0,0"</span> id=<span class="string">"svg_5"</span> stroke-width=<span class="string">"1.5"</span> stroke=<span class="string">"#000"</span> fill=<span class="string">"none"</span>/&gt;</span><br><span class="line">   &lt;path d=<span class="string">"m422.5,183.45313c0,0 0,2 0,3c0,1 0,1 0,2c0,1 0,1 0,2c0,1 0,1 0,2c0,1 0,2 1,3c1,1 0.61731,2.07613 1,3c0.5412,1.30656 1,2 1,2c1,1 1.29291,1.29289 2,2c0.70709,0.70711 0.29291,1.29289 1,2c0.70709,0.70711 0,1 1,2c0,0 0.61731,1.07613 1,2c0.5412,1.30656 1.29291,1.29289 2,2c0.70709,0.70711 1,1 1,1c1,1 0.29291,1.29289 1,2c0.70709,0.70711 1.29291,0.29289 2,1c0.70709,0.70711 1,1 1,1c1,0 1,0 2,0c0,0 1,1 2,1c0,0 1,0 2,0c0,0 1,0 2,0c1,0 1,0 2,0l0,0l0,0"</span> id=<span class="string">"svg_6"</span> stroke-width=<span class="string">"1.5"</span> stroke=<span class="string">"#000"</span> fill=<span class="string">"none"</span>/&gt;</span><br><span class="line">   &lt;path d=<span class="string">"m502.5,131.45313c0,1 0,2 0,6c0,5 0,9 0,15c0,8 0,13 0,19c0,5 0,10 0,15c0,4 0.49347,7.87856 1,11c0.48056,2.96126 0.51944,5.03874 1,8c0.50653,3.12144 2,4 2,7c0,1 1,3 1,5c0,0 1,1 1,1l0,0"</span> id=<span class="string">"svg_7"</span> stroke-width=<span class="string">"1.5"</span> stroke=<span class="string">"#000"</span> fill=<span class="string">"none"</span>/&gt;</span><br><span class="line">   &lt;path d=<span class="string">"m502.5,181.45313c0,0 1,0 2,0c2,0 4,0 6,0c2,0 4.15222,-0.76537 6,0c2.6131,1.0824 3.18604,3.69255 5,5c2.29456,1.65381 3.53491,4.31076 5,6c2.0719,2.38896 2.9176,4.38687 4,7c0.76538,1.84776 2.14429,4.93414 3,7c1.21014,2.92157 1.48627,4.82375 2,7c0.45953,1.9465 1.48627,3.82375 2,6c0.68927,2.91975 1,5 1,6c0,1 0,1 0,0l0,-1"</span> id=<span class="string">"svg_8"</span> stroke-width=<span class="string">"1.5"</span> stroke=<span class="string">"#000"</span> fill=<span class="string">"none"</span>/&gt;</span><br><span class="line">   &lt;path d=<span class="string">"m583.5,195.45313c0,0 0,0 -1,0c-1,0 -3,-1 -6,-2c-3,-1 -6.07843,-1.78986 -9,-3c-4.13171,-1.71141 -5,-3 -8,-3c-1,0 -2,-1 -3,-1c-1,0 -1,0 -1,0c-1,0 -1,1 -1,1c0,2 -1.1391,4.97418 -2,10c-1.19385,6.96956 -1,13 -1,18c0,3 0,6 0,9c0,2 1,4 2,6c1,2 2,3 3,3c1,0 2,0 3,0c0,0 1.41888,-0.41885 3,-2c1.58112,-1.58115 3.34619,-1.70546 5,-4c1.30743,-1.814 1.33746,-3.31001 3,-6c1.487,-2.40601 3,-5 4,-8c1,-3 1.54047,-6.0535 2,-8c0.51373,-2.17625 1,-4 1,-6c0,-1 0,-2 0,-3c0,-1 0,-1 0,-1c0,1 -0.48053,2.03874 0,5c0.50653,3.12144 1.84723,6.04132 3,10c0.88416,3.03616 1.57971,7.15688 4,13c0.85571,2.06586 2,5 3,7c1,2 2.41888,2.41885 4,4c1.58112,1.58115 1.0979,2.82443 3,4c1.70129,1.05147 2.69342,1.4588 4,2c0.92389,0.38269 1,0 1,0c1,0 1,0 1,0c0,-1 0.69257,-2.186 2,-4c0.8269,-1.14726 2,-2 3,-3c1,-1 1,-2 2,-2l0,0"</span> id=<span class="string">"svg_9"</span> stroke-width=<span class="string">"1.5"</span> stroke=<span class="string">"#000"</span> fill=<span class="string">"none"</span>/&gt;</span><br><span class="line">  &lt;/g&gt;</span><br><span class="line"> &lt;/svg&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">  const pathList = document.getElementsByTagName(<span class="string">'path'</span>);</span><br><span class="line">  const l = pathList.length;</span><br><span class="line">  <span class="built_in">let</span> delay = 0;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">for</span>(<span class="built_in">let</span> i=0; i &lt; l; i++) &#123;</span><br><span class="line">    const curLen = Math.round(pathList[i].getTotalLength());</span><br><span class="line">    pathList[i].style.strokeDasharray = curLen;</span><br><span class="line">    pathList[i].style.strokeDashoffset = curLen;</span><br><span class="line">    pathList[i].style.animation = `show <span class="variable">$&#123;curLen&#125;</span>ms linear <span class="variable">$&#123;delay&#125;</span>ms forwards`;</span><br><span class="line"></span><br><span class="line">    delay += curLen;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>
<h4 id="仪表盘-amp-机器猫"><a href="#仪表盘-amp-机器猫" class="headerlink" title="仪表盘 &amp; 机器猫"></a>仪表盘 &amp; 机器猫</h4><!-- 仪表盘 -->
<p><style>.dash {fill: transparent;stroke: #666;stroke-width: 10px;stroke-linecap: round;}.dash-move {stroke: aqua;stroke-width: 5px;stroke-dasharray: 1000;stroke-dashoffset: 1000;}.active {transition: all 2s linear;}</style></p>
<p><input id="btn" type="text"></p>
<svg width="410" height="200"><path class="dash" d="M 160 169 A 80 80 0 1 1 240 169"/><path class="dash dash-move" d="M 160 169 A 80 80 0 1 1 240 169"/></svg><br><script>const oBtn = document.getElementById(‘btn’);const oDashMove = document.getElementsByClassName(‘dash-move’)[0];oBtn.onblur = () =&gt; {oDashMove.setAttribute(‘class’, ‘dash dash-move active’);const value = oBtn.value;const path = oDashMove.getTotalLength();const data = 1000 - value / 100 * path;oDashMove.style.strokeDashoffset = data;};oBtn.onfocus = () =&gt; {oDashMove.setAttribute(‘class’, ‘dash dash-move’); oDashMove.style.strokeDashoffset = 1000;};</script><br><br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line">&lt;style&gt;</span><br><span class="line">  .dash &#123;</span><br><span class="line">    fill: transparent;</span><br><span class="line">    stroke: <span class="comment">#666;</span></span><br><span class="line">    stroke-width: 10px;</span><br><span class="line">    stroke-linecap: round;</span><br><span class="line">  &#125;</span><br><span class="line">  .dash-move &#123;</span><br><span class="line">    stroke: aqua;</span><br><span class="line">    stroke-width: 5px;</span><br><span class="line">    stroke-dasharray: 1000;</span><br><span class="line">    stroke-dashoffset: 1000;</span><br><span class="line">  &#125;</span><br><span class="line">  .active &#123;</span><br><span class="line">    transition: all 2s linear;</span><br><span class="line">  &#125;</span><br><span class="line">&lt;/style&gt;</span><br><span class="line">&lt;input id=<span class="string">'btn'</span> <span class="built_in">type</span>=<span class="string">'text'</span> /&gt;</span><br><span class="line">&lt;svg width=410 height=200&gt;</span><br><span class="line">  &lt;path class=<span class="string">'dash'</span> d=<span class="string">'M 160 169 A 80 80 0 1 1 240 169'</span> /&gt;</span><br><span class="line">  &lt;path class=<span class="string">'dash dash-move'</span> d=<span class="string">'M 160 169 A 80 80 0 1 1 240 169'</span> /&gt;</span><br><span class="line">&lt;/svg&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">  const oBtn = document.getElementById(<span class="string">'btn'</span>);</span><br><span class="line">  const oDashMove = document.getElementsByClassName(<span class="string">'dash-move'</span>)[0];</span><br><span class="line">  oBtn.onblur = () =&gt; &#123;</span><br><span class="line">    oDashMove.setAttribute(<span class="string">'class'</span>, <span class="string">'dash dash-move active'</span>);</span><br><span class="line">    const value = oBtn.value;</span><br><span class="line">    const path = oDashMove.getTotalLength();</span><br><span class="line">    const data = 1000 - value / 100 * path;</span><br><span class="line">    oDashMove.style.strokeDashoffset = data;</span><br><span class="line">  &#125;;</span><br><span class="line">  oBtn.onfocus = () =&gt; &#123;</span><br><span class="line">    oDashMove.setAttribute(<span class="string">'class'</span>, <span class="string">'dash dash-move'</span>);</span><br><span class="line">    oDashMove.style.strokeDashoffset = 1000;</span><br><span class="line">  &#125;;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><br><br><style>.blueBlack {fill: #18c;stroke: #000;}.whiteBlack {fill: #fff;stroke: #000;}.white {fill: #fff;}.redBlack {fill: #f00;stroke: #000;}.red {fill: #f00;stroke-width: 15px;stroke-linecap: round;}.line {fill: transparent;stroke: #000;}.blueBlack {fill: #18c;}.yellowBlack {fill: #fe1;stroke: #000;}</style><br><svg width="500" height="500"><path class="blueBlack" d="M 160 300 A 150 150 10 1 1 340 300"/><path class="whiteBlack" d="M 170 300 A 100 120 90 1 1 330 300"/><ellipse class="whiteBlack" rx="35" ry="45" cx="215" cy="135"/><ellipse class="whiteBlack" rx="35" ry="45" cx="285" cy="135"/><ellipse rx="6" ry="10" cx="225" cy="155"/><ellipse rx="6" ry="10" cx="275" cy="155"/><circle class="redBlack" r="13" cx="250" cy="175"/><circle class="white" r="5" cx="255" cy="170"/><path class="line" d="M 250 188 L 250 278"/><path class="line" d="M 216 200 L 150 185"/><path class="line" d="M 216 215 L 145 215"/><path class="line" d="M 216 230 L 150 245"/><path class="line" d="M 284 200 L 350 185"/><path class="line" d="M 284 215 L 355 215"/><path class="line" d="M 284 230 L 350 245"/><path class="line" d="M 180 250 A 100 100 10 0 0 320 250"/><rect class="redBlack" x="146" y="293" width="206" height="14" rx="13" ry="13"/><rect class="line" x="146" y="293" width="206" height="14" rx="13" ry="13"/><rect class="blueBlack" x="152" y="307" width="194" height="150" rx="0" ry="0"/><polyline class="blueBlack" points="160 307, 98 293, 98 333, 152 347, 152 330"/><polyline class="blueBlack" points="346 307, 402 320, 402 360, 346 347, 340 330"/><circle class="whiteBlack" r="25" cx="86" cy="310"/><circle class="whiteBlack" r="25" cx="418" cy="340"/><path class="whiteBlack" d="M 180 307 A 80 80 10 1 0 320 307"/><circle class="yellowBlack" r="20" cx="250" cy="320"/><path class="line" d="M 235 307 L 265 307"/><path class="line" d="M 232 312 L 268 312"/><circle r="5" cx="250" cy="330"/><path class="line" d="M 250 335 L 250 340"/><path class="whiteBlack" d="M 210 360 A 22 24 10 1 0 290 360"/><path class="line" d="M 210 360 L 290 360"/><path class="line" d="M 152 347 L 152 460"/><path class="line" d="M 346 347 L 346 460"/><path class="whiteBlack" d="M 238 462 A 10 10 10 1 1 262 457"/><ellipse class="whiteBlack" rx="53" ry="15" cx="193" cy="465"/><ellipse class="whiteBlack" rx="53" ry="15" cx="307" cy="465"/></svg>

<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br></pre></td><td class="code"><pre><span class="line">&lt;style&gt;</span><br><span class="line">   .blueBlack &#123;</span><br><span class="line">     fill: <span class="comment">#18c;</span></span><br><span class="line">     stroke: <span class="comment">#000;</span></span><br><span class="line">   &#125;</span><br><span class="line">   .whiteBlack &#123;</span><br><span class="line">     fill: <span class="comment">#fff;</span></span><br><span class="line">     stroke: <span class="comment">#000;</span></span><br><span class="line">   &#125;</span><br><span class="line">   .white &#123;</span><br><span class="line">     fill: <span class="comment">#fff;</span></span><br><span class="line">   &#125;</span><br><span class="line">   .redBlack &#123;</span><br><span class="line">     fill: <span class="comment">#f00;</span></span><br><span class="line">     stroke: <span class="comment">#000;</span></span><br><span class="line">   &#125;</span><br><span class="line">   .red &#123;</span><br><span class="line">     fill: <span class="comment">#f00;</span></span><br><span class="line">     stroke-width: 15px;</span><br><span class="line">     stroke-linecap: round;</span><br><span class="line">   &#125;</span><br><span class="line">   .line &#123;</span><br><span class="line">     fill: transparent;</span><br><span class="line">     stroke: <span class="comment">#000;</span></span><br><span class="line">   &#125;</span><br><span class="line">   .blueBlack &#123;</span><br><span class="line">     fill: <span class="comment">#18c;</span></span><br><span class="line">   &#125;</span><br><span class="line">   .yellowBlack &#123;</span><br><span class="line">     fill: <span class="comment">#fe1;</span></span><br><span class="line">     stroke: <span class="comment">#000;</span></span><br><span class="line">   &#125;</span><br><span class="line"> &lt;/style&gt;</span><br><span class="line"> &lt;svg width=500 height=500&gt;</span><br><span class="line">   &lt;path class=<span class="string">'blueBlack'</span> d=<span class="string">'M 160 300 A 150 150 10 1 1 340 300'</span> /&gt;</span><br><span class="line">   &lt;path class=<span class="string">'whiteBlack'</span> d=<span class="string">'M 170 300 A 100 120 90 1 1 330 300'</span> /&gt;</span><br><span class="line">   &lt;ellipse class=<span class="string">'whiteBlack'</span> rx=<span class="string">'35'</span> ry=<span class="string">'45'</span> cx=<span class="string">'215'</span> cy=<span class="string">'135'</span> /&gt;</span><br><span class="line">   &lt;ellipse class=<span class="string">'whiteBlack'</span> rx=<span class="string">'35'</span> ry=<span class="string">'45'</span> cx=<span class="string">'285'</span> cy=<span class="string">'135'</span> /&gt;</span><br><span class="line">   &lt;ellipse rx=<span class="string">'6'</span> ry=<span class="string">'10'</span> cx=<span class="string">'225'</span> cy=<span class="string">'155'</span> /&gt;</span><br><span class="line">   &lt;ellipse rx=<span class="string">'6'</span> ry=<span class="string">'10'</span> cx=<span class="string">'275'</span> cy=<span class="string">'155'</span> /&gt;</span><br><span class="line">   &lt;circle class=<span class="string">'redBlack'</span> r=<span class="string">'13'</span> cx=<span class="string">'250'</span> cy=<span class="string">'175'</span> /&gt;</span><br><span class="line">   &lt;circle class=<span class="string">'white'</span> r=<span class="string">'5'</span> cx=<span class="string">'255'</span> cy=<span class="string">'170'</span> /&gt;</span><br><span class="line">   &lt;path class=<span class="string">'line'</span> d=<span class="string">'M 250 188 L 250 278'</span> /&gt;</span><br><span class="line">   &lt;path class=<span class="string">'line'</span> d=<span class="string">'M 216 200 L 150 185'</span> /&gt;</span><br><span class="line">   &lt;path class=<span class="string">'line'</span> d=<span class="string">'M 216 215 L 145 215'</span> /&gt;</span><br><span class="line">   &lt;path class=<span class="string">'line'</span> d=<span class="string">'M 216 230 L 150 245'</span> /&gt;</span><br><span class="line">   &lt;path class=<span class="string">'line'</span> d=<span class="string">'M 284 200 L 350 185'</span> /&gt;</span><br><span class="line">   &lt;path class=<span class="string">'line'</span> d=<span class="string">'M 284 215 L 355 215'</span> /&gt;</span><br><span class="line">   &lt;path class=<span class="string">'line'</span> d=<span class="string">'M 284 230 L 350 245'</span> /&gt;</span><br><span class="line">   &lt;path class=<span class="string">'line'</span> d=<span class="string">'M 180 250 A 100 100 10 0 0 320 250'</span> /&gt;</span><br><span class="line">   &lt;rect class=<span class="string">'redBlack'</span> x=<span class="string">'146'</span> y=<span class="string">'293'</span> width=<span class="string">'206'</span> height=<span class="string">'14'</span> rx=<span class="string">'13'</span> ry=<span class="string">'13'</span> /&gt;</span><br><span class="line">   &lt;rect class=<span class="string">'line'</span> x=<span class="string">'146'</span> y=<span class="string">'293'</span> width=<span class="string">'206'</span> height=<span class="string">'14'</span> rx=<span class="string">'13'</span> ry=<span class="string">'13'</span> /&gt;</span><br><span class="line">   &lt;rect class=<span class="string">'blueBlack'</span> x=<span class="string">'152'</span> y=<span class="string">'307'</span> width=<span class="string">'194'</span> height=<span class="string">'150'</span> rx=<span class="string">'0'</span> ry=<span class="string">'0'</span> /&gt;</span><br><span class="line">   &lt;polyline class=<span class="string">'blueBlack'</span> points=<span class="string">'160 307, 98 293, 98 333, 152 347, 152 330'</span> /&gt;</span><br><span class="line">   &lt;polyline class=<span class="string">'blueBlack'</span> points=<span class="string">'346 307, 402 320, 402 360, 346 347, 340 330'</span> /&gt;</span><br><span class="line">   &lt;circle class=<span class="string">'whiteBlack'</span> r=<span class="string">'25'</span> cx=<span class="string">'86'</span> cy=<span class="string">'310'</span> /&gt;</span><br><span class="line">   &lt;circle class=<span class="string">'whiteBlack'</span> r=<span class="string">'25'</span> cx=<span class="string">'418'</span> cy=<span class="string">'340'</span> /&gt;</span><br><span class="line">   &lt;path class=<span class="string">'whiteBlack'</span> d=<span class="string">'M 180 307 A 80 80 10 1 0 320 307'</span> /&gt;</span><br><span class="line">   &lt;circle class=<span class="string">'yellowBlack'</span> r=<span class="string">'20'</span> cx=<span class="string">'250'</span> cy=<span class="string">'320'</span> /&gt;</span><br><span class="line">   &lt;path class=<span class="string">'line'</span> d=<span class="string">'M 235 307 L 265 307'</span> /&gt;</span><br><span class="line">   &lt;path class=<span class="string">'line'</span> d=<span class="string">'M 232 312 L 268 312'</span> /&gt;</span><br><span class="line">   &lt;circle r=<span class="string">'5'</span> cx=<span class="string">'250'</span> cy=<span class="string">'330'</span> /&gt;</span><br><span class="line">   &lt;path class=<span class="string">'line'</span> d=<span class="string">'M 250 335 L 250 340'</span> /&gt;</span><br><span class="line">   &lt;path class=<span class="string">'whiteBlack'</span> d=<span class="string">'M 210 360 A 22 24 10 1 0 290 360'</span> /&gt;</span><br><span class="line">   &lt;path class=<span class="string">'line'</span> d=<span class="string">'M 210 360 L 290 360'</span> /&gt;</span><br><span class="line"></span><br><span class="line">   &lt;path class=<span class="string">'line'</span> d=<span class="string">'M 152 347 L 152 460'</span> /&gt;</span><br><span class="line">   &lt;path class=<span class="string">'line'</span> d=<span class="string">'M 346 347 L 346 460'</span> /&gt;</span><br><span class="line">   &lt;path class=<span class="string">'whiteBlack'</span> d=<span class="string">'M 238 462 A 10 10 10 1 1 262 457'</span> /&gt;</span><br><span class="line"> </span><br><span class="line">   &lt;ellipse class=<span class="string">'whiteBlack'</span> rx=<span class="string">'53'</span> ry=<span class="string">'15'</span> cx=<span class="string">'193'</span> cy=<span class="string">'465'</span> /&gt;</span><br><span class="line">   &lt;ellipse class=<span class="string">'whiteBlack'</span> rx=<span class="string">'53'</span> ry=<span class="string">'15'</span> cx=<span class="string">'307'</span> cy=<span class="string">'465'</span> /&gt;</span><br><span class="line"> &lt;/svg&gt;</span><br></pre></td></tr></table></figure>
<h2 id="3、-requestAnimationFrame-客户端存储-历史记录-worker"><a href="#3、-requestAnimationFrame-客户端存储-历史记录-worker" class="headerlink" title="3、 requestAnimationFrame 客户端存储 历史记录 worker"></a><font color="#F33F50">3、 requestAnimationFrame 客户端存储 历史记录 worker</font></h2><h3 id="requestAnimationFrame"><a href="#requestAnimationFrame" class="headerlink" title="requestAnimationFrame"></a>requestAnimationFrame</h3><ul>
<li><p>window.requestAnimationFrame(callback);<br>告诉浏览器——你希望执行一个动画，并且要求浏览器在下次重绘之前调用指定的回调函数更新动画。该方法需要传入一个回调函数作为参数，该回调函数会在浏览器下一次重绘之前执行。</p>
</li>
<li><p>若想在浏览器下次重绘之前继续更新下一帧动画，那么回调函数自身必须再次调用window.requestAnimationFrame()。</p>
</li>
<li><p>回调函数会被传入DOMHighResTimeStamp参数，DOMHighResTimeStamp指示当前被 requestAnimationFrame() 排序的回调函数被触发的时间。在同一个帧中的多个回调函数，它们每一个都会接受到一个相同的时间戳，即使在计算上一个回调函数的工作负载期间已经消耗了一些时间。该时间戳是一个十进制数，单位毫秒，最小精度为1ms(1000μs)。</p>
</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">const element = document.getElementById(<span class="string">'some-element-you-want-to-animate'</span>);</span><br><span class="line"><span class="built_in">let</span> start;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> step(timestamp) &#123;</span><br><span class="line">  <span class="keyword">if</span> (start === undefined)</span><br><span class="line">    start = timestamp;</span><br><span class="line">  const elapsed = timestamp - start;</span><br><span class="line"></span><br><span class="line">  //这里使用`Math.min()`确保元素刚好停在200px的位置。</span><br><span class="line">  element.style.transform = <span class="string">'translateX('</span> + Math.min(0.1 * elapsed, 200) + <span class="string">'px)'</span>;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (elapsed &lt; 2000) &#123; // 在两秒后停止动画</span><br><span class="line">    window.requestAnimationFrame(step);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">window.requestAnimationFrame(step);</span><br></pre></td></tr></table></figure>
<h3 id="客户端存储"><a href="#客户端存储" class="headerlink" title="客户端存储"></a>客户端存储</h3><h4 id="storage"><a href="#storage" class="headerlink" title="storage"></a>storage</h4><ul>
<li>localStorage</li>
<li>sessionStorage</li>
</ul>
<blockquote>
<ol>
<li><p>如何存储数据 （session同）<br>localStorage.name = ‘amy’;    必须是字符串格式<br>localStorage.info = JSON.stringfy({address:’shenzhen’}); 对象也需转成成字符串格式</p>
</li>
<li><p>如何读取数据 （session同）<br>localStorage.name<br>JSON.parse(localStorage.info)</p>
</li>
<li><p>存储有效期<br>localStorage 永久的，除非手动删除（Application-Local Storage）<br>sessionStorage 临时的，窗口关闭就自动清除掉了（Application-Session Storage）</p>
</li>
<li><p>作用域<br>localStorage    文档源限制<br>sessionStorage  文档源限制 + 窗口</p>
</li>
<li><p>setItem(name, value) 设置属性值<br>getItem(name)        获取属性值<br>removeItem(name)     移除属性<br>clear()              清除属性</p>
</li>
</ol>
</blockquote>
<h4 id="cookie"><a href="#cookie" class="headerlink" title="cookie"></a>cookie</h4><p>存储信息到用户的设备上，数据量较小<br>navigator.cookieEnabled 检测是否启用了cookie。</p>
<blockquote>
<ol>
<li><p>设置cookie的值<br>document.cookie = “name=value”; (每次只能设置一个值，因为浏览器会认为后面的键值对是这个cookie的属性)<br>Version 通过Set-Cookie设置的响应头创建必须符合RFC2965规范，如果通过Set-Cookie响应头设置，则默认值为0；如果要设置为1，则该Cookie要遵循RFC2109规范<br>Comment    注释项，用户说明该Cookie有何用途<br>CommentURL    服务器为此Cookie提供的URI注释<br>Discard    是否在会话结束后丢弃该Cookie项,默认为false<br>Domain    生成该Cookie的域名，如domain=“hahaha.net”<br>Max-Age    最大失效时间，与Version不同，Version设置的是在多少秒后失效，可以参数可用表达式如60 * 60 * 24,这样则是设置失效时间一天<br>Path    该Cookie是在当前哪个路径下生成的<br>Port    该Cookie在什么端口下可以传回服务器端，如果有多个端口，则以逗号隔开<br>Secure    如果设置了这个属性，那么只会在SSH连续时才会传回该Cookie</p>
</li>
<li><p>获取cookie值<br>document.cookie</p>
</li>
<li><p>expires<br>指定了cookie的生存期，默认情况下cookie存储的值只在浏览器会话期间存在，当用户退出浏览器后这些值也会丢失，如果想让 cookie 存在一段时间，就要为expires属性设置为未来的一个过期日期（毫秒）。现在已经被max-age属性所取代，max-age用秒来设置 cookie 的生存期。<br>const now = new Date();<br>now.setTime(now.getTime() + (1000 * 60 * 60 * 24 * 30));<br>document.cookie = `name=value;expires=${now.toUTCString()};path=/;SameSite=None;`;</p>
</li>
<li><p>max-age 设置cookie存储期限<br>document.cookie = “name=value;max-age=1000”; 单位：秒</p>
</li>
<li><p>SameSite<br>Cookie 往往用来存储用户的身份信息，恶意网站可以设法伪造带有正确 Cookie 的 HTTP 请求，这就是 <strong>CSRF</strong> 攻击。<br>Cookie 的SameSite属性用来限制第三方 Cookie，从而减少安全风险。<br>它可以设置三个值:Strict 、 Lax 、 None</p>
<ul>
<li>Strict最为严格，完全禁止第三方 Cookie，跨站点时，任何情况下都不会发送 Cookie。换言之，只有当前网页的 URL 与请求目标一致，才会带上 Cookie。<br>  这个规则过于严格，可能造成非常不好的用户体验。比如，当前网页有一个 GitHub 链接，用户点击跳转就不会带有 GitHub 的 Cookie，跳转过去总是未登陆状态。</li>
<li>Lax规则稍稍放宽，大多数情况也是不发送第三方 Cookie，但是导航到目标网址的 Get 请求除外。<br>  设置了Strict或Lax以后，基本就杜绝了 CSRF 攻击。当然，前提是用户浏览器支持 SameSite 属性。   <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">请求类型      示例	                        正常情况	    Lax</span><br><span class="line">链接	    &lt;a href=<span class="string">"..."</span>&gt;&lt;/a&gt;	                发送 Cookie  发送 Cookie</span><br><span class="line">预加载	    &lt;link rel=<span class="string">"prerender"</span> href=<span class="string">"..."</span>/&gt;	发送 Cookie  发送 Cookie</span><br><span class="line">GET 表单     &lt;form method=<span class="string">"GET"</span> action=<span class="string">"..."</span>&gt;	发送 Cookie  发送 Cookie</span><br><span class="line">POST 表单    &lt;form method=<span class="string">"POST"</span> action=<span class="string">"..."</span>&gt;	发送 Cookie  不发送</span><br><span class="line">iframe	    &lt;iframe src=<span class="string">"..."</span>&gt;&lt;/iframe&gt;	        发送 Cookie  不发送</span><br><span class="line">AJAX        $.get(<span class="string">"..."</span>)	                发送 Cookie  不发送</span><br><span class="line">Image	    &lt;img src=<span class="string">"..."</span>&gt;	                发送 Cookie  不发送</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
</ol>
</blockquote>
<blockquote>
<ul>
<li>Chrome 计划将Lax变为默认设置。这时，网站可以选择显式关闭SameSite属性，将其设为None。<br>  不过，前提是必须同时设置Secure属性（Cookie 只能通过 HTTPS 协议发送），否则无效。  <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Set-Cookie: widget_session=abc123; SameSite=None;            无效</span><br><span class="line">Set-Cookie: widget_session=abc123; SameSite=None; Secure;    有效</span><br></pre></td></tr></table></figure>
</li>
</ul>
</blockquote>
<blockquote>
<ol start="6">
<li>删除cookie<br>max-age = 0;需要带上键值对</li>
</ol>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line">const cookieUtil = &#123;</span><br><span class="line">  //获取cookie</span><br><span class="line">  <span class="string">"get"</span>: <span class="keyword">function</span> (name) &#123;</span><br><span class="line">    <span class="keyword">if</span> (!name || typeof name !== <span class="string">"string"</span>) &#123;</span><br><span class="line">      <span class="built_in">return</span> <span class="string">""</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    var cookieName = encodeURIComponent(name) + <span class="string">'='</span>,</span><br><span class="line">      cookieStart = document.cookie.indexOf(cookieName),</span><br><span class="line">      cookieValue = <span class="string">""</span>,</span><br><span class="line">      cookieEnd = -1;</span><br><span class="line">    <span class="keyword">if</span> (cookieStart &gt; -1) &#123;</span><br><span class="line">      cookieEnd = document.cookie.indexOf(<span class="string">";"</span>, cookieStart);</span><br><span class="line">      <span class="keyword">if</span> (cookieEnd == -1) &#123;</span><br><span class="line">        cookieEnd = document.cookie.length;</span><br><span class="line">      &#125;</span><br><span class="line">      cookieValue = document.cookie.slice(cookieStart + cookieName.length, cookieEnd);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">return</span> cookieValue;</span><br><span class="line">  &#125;,</span><br><span class="line">  //设置cookie</span><br><span class="line">  <span class="string">"set"</span>: <span class="keyword">function</span> (name, value, expires, maxAge, path, domain, secure) &#123;</span><br><span class="line">    var cookieText = encodeURIComponent(name) + <span class="string">'='</span> + encodeURIComponent(value);</span><br><span class="line">    <span class="keyword">if</span> (expires instanceof Date) &#123;</span><br><span class="line">      cookieText += <span class="string">"; expires="</span> + expires.toGTMString();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (maxAge) &#123;</span><br><span class="line">      cookieText += <span class="string">"; max-age="</span> + maxAge;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (path) &#123;</span><br><span class="line">      cookieText += <span class="string">"; path="</span> + path;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (domain) &#123;</span><br><span class="line">      cookieText += <span class="string">"; domain="</span> + domain;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (secure) &#123;</span><br><span class="line">      cookieText += <span class="string">"; secure"</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    document.cookie = cookieText;</span><br><span class="line">  &#125;,</span><br><span class="line">  //清除cookie</span><br><span class="line">  <span class="string">"unset"</span>: <span class="keyword">function</span> (name, expires, maxAge, path, domain, secure) &#123;</span><br><span class="line">    this.set(name, <span class="string">""</span>, new Date(0), 0, path, domain, secure);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line">cookieUtil.set(<span class="string">"name"</span>, <span class="string">"test"</span>);</span><br></pre></td></tr></table></figure>
<script>
    var canvas = document.getElementById('myCanvas');
    var ctx = canvas.getContext('2d');
    ctx.strokeStyle = 'red';
    ctx.strokeRect( 110 , 10 , 150 , 100 );
    ctx.strokeStyle = 'black';
    ctx.strokeRect( 310 , 10 , 100 , 150);

    var canvas1 = document.getElementById('myCanvas1');
    var ctx1 = canvas1.getContext('2d');
    ctx1.rect( 10 , 10 , 100 , 100 );
    ctx1.fill();
    ctx1.clearRect( 10 , 10 , 50 , 50);
    ctx1.beginPath();
    ctx1.rect(130,10,80,80);
    ctx1.fillStyle = 'red';
    ctx1.fill();

    var canvas2 = document.getElementById('myCanvas2');
    var ctx2 = canvas2.getContext('2d');
    var oImg = document.getElementsByClassName('fillPicture')[0];
    ctx2.fillStyle = ctx2.createPattern(oImg,'repeat-x');
    ctx2.fillRect(21,0,535,200);

    var canvas3 = document.getElementById('myCanvas3');
    var ctx3 = canvas3.getContext('2d');
    var bg = ctx2.createLinearGradient(0,0,0,500);
    bg.addColorStop(0,'red');
    bg.addColorStop(0.5,'green');
    ctx3.fillStyle = bg;
    ctx3.fillRect(70,0,600,200);

    var canvas4 = document.getElementById('myCanvas4');
    var ctx4 = canvas4.getContext('2d');
    ctx4.fillStyle='SeaGreen';
    ctx4.shadowColor = 'pink';
    ctx4.shadowBlur = 10;
    ctx4.shadowOffsetX = 30;
    ctx4.shadowOffsetY = -20;
    ctx4.fillRect(80,30,460,140);

    var canvas5 = document.getElementById('myCanvas5');
    var ctx5 = canvas5.getContext('2d');
    ctx5.textAlign = 'left';
    ctx.textBaseLine = 'hanging'
    ctx5.fillStyle = 'deeppink';
    ctx5.font = '40px sans-serif';
    ctx5.fillText('Hello World!' , 70 ,50);
    ctx5.strokeText('Hello World!' , 320 ,50);

    var exportCan = document.getElementsByClassName('exportCan')[0];
    var data = canvas5.toDataURL();
    exportCan.src=data;

    var canvas6 = document.getElementById('myCanvas6');
    var ctx6 = canvas6.getContext('2d');
    ctx6.fillStyle='pink';
    ctx6.fillRect(70 , 0 , 100 , 100 );
    var pixel = ctx6.getImageData(100 , 0 , 50 , 50);
    var row = pixel.width;
    var col = pixel.height;
    var d = pixel.data;
    for(var i = 0 ; i < row ; i++){
        var c = i*col*4;
        for(var j = 0; j < col ; j++){
            d[c+j*4+3] = 100;
        }
    }
    ctx6.putImageData(pixel,100,10);
</script>


<table class="textCenter"><tr><td colspan="4">特性</td><td colspan="10">Cookie</td><td colspan="6">localStorage</td><td colspan="6">sessionStorage</td></tr><tr><td colspan="4">数据生命周期</td><td colspan="10">可设置失效时间，不设置默认是关闭浏览器失效。</td><td colspan="6">除非被清除，否则永久保存</td><td colspan="6">当前会话下有效，关闭页面或浏览器后清除。</td></tr><tr><td colspan="4">存放数据大小</td><td colspan="10">4k左右</td><td colspan="12">一般为5MB</td></tr><tr><td colspan="4">与服务器通信</td><td colspan="10">HTTP每次都会携带cookie信息。如果cookie保存过多数据会带来性能问题。</td><td colspan="12">仅在客户端（即浏览器）中保存，不参与和服务器的通信。</td></tr><tr><td colspan="4">易用性</td><td colspan="10">需要自己封装，原生的cookie接口不友好。</td><td colspan="12">原生接口可以接受，亦可再次封装对Object和Array有更好的支持。</td></tr></table>


<h3 id="history"><a href="#history" class="headerlink" title="history"></a>history</h3><ul>
<li><p>history.back()<br>history.forward()<br>history.go(n)</p>
</li>
<li><p>pushState() 和 replaceState()<br><font color="#FC5603">HTML5新接口，可以改变网址(存在跨域限制)而不刷新页面，这个强大的特性后来用到了单页面应用如：vue-router，react-router-dom中。</font><br>注意:仅改变网址,网页不会真的跳转,也不会获取到新的内容,本质上网页还停留在原页面!</p>
<p>history.pushState(state, title, url); 添加一条历史记录<br>history.replaceState(state, title, url); 替换当前历史记录</p>
<p>state: 一个与指定网址相关的状态对象。popstate事件触发时，该对象会传入回调函数中，如果不需要可传null。<br>title: 新页面标题，但是所有浏览器目前都忽略这个值，故可传null。<br>url: 新的网址，必须与当前页面处在同一域，浏览器的地址栏将显示这个网址。</p>
</li>
<li><p>popstate事件 和 hashchange事件<br>popstate事件： 历史记录发生改变时触发。popstate事件会在点击后退、前进按钮(或调用history.back()、history.forward()、history.go()方法)时触发。前提是不能真的发生了页面跳转,而是在由history.pushState()或者history.replaceState()形成的历史节点中前进后退<br>注意:调用history.pushState()或history.replaceState()不会触发popstate事件。<br>hashChange事件： 当页面的hash值改变的时候触发，常用于构建单页面应用。</p>
</li>
</ul>
<h3 id="Worker"><a href="#Worker" class="headerlink" title="Worker"></a>Worker</h3><p>  var worker = new Worker(‘worker.js’);<br>  worker文件必须和主文件满足同源策略<br>  worker和主线程之间的通信，发：postMessages(n)方法，收：message事件。<br>  <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">主进程代码：</span><br><span class="line">  &lt;script src=<span class="string">'./worker.js'</span>&gt;&lt;/script&gt;</span><br><span class="line">  &lt;script&gt;</span><br><span class="line">    var worker = new Worker(<span class="string">'worker.js'</span>);     // Worker &#123;onmessage: (e) =&gt; &#123; console.log(<span class="string">'e.data:'</span>, e.data); &#125;, onerror: null&#125;</span><br><span class="line"></span><br><span class="line">    worker.postMessage(&#123;</span><br><span class="line">      num: 10,</span><br><span class="line">    &#125;);</span><br><span class="line">    worker.onmessage = (e) =&gt; &#123;</span><br><span class="line">      console.log(e.data);                    // &#123;num: 200&#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &lt;/script&gt;</span><br><span class="line"></span><br><span class="line">worker代码：</span><br><span class="line">onmessage = (e) =&gt; &#123;</span><br><span class="line">  const &#123; data &#125; = e;</span><br><span class="line">  console.log(data);                          // &#123;num: 10&#125;  </span><br><span class="line"></span><br><span class="line">  postMessage(&#123;</span><br><span class="line">    num: data.num * 20</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></p>
<blockquote>
<p>结束一个worker<br>    close()在worker作用域中调用（worker.js）   暂时不会使用，如有用到再研究。<br>    terminate()在worker对象上调用（主进程的worker对象上worker.terminate），这个试了一下，是没问题的。</p>
</blockquote>
<blockquote>
<p>其他特性<br>    importScripts(‘./match1.js’, ‘./math2.js’);<br>    作用域 global Worker Scope<br>    navigator<br>    XMLHttpRequest</p>
</blockquote>
  <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">(<span class="function"><span class="title">function</span></span>()&#123;</span><br><span class="line">  document.getElementById(<span class="string">'test'</span>).addEventListener(<span class="string">'click'</span>, <span class="function"><span class="title">function</span></span>()&#123;</span><br><span class="line">    window.history.pushState(&#123;page: 1&#125;, <span class="string">'test'</span>, <span class="string">'#test1'</span>);</span><br><span class="line">    window.history.pushState(&#123;page: 2&#125;, <span class="string">'test'</span>, <span class="string">'#test2'</span>);</span><br><span class="line">    <span class="built_in">return</span> <span class="literal">false</span>;</span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line">  window.onpopstate = <span class="keyword">function</span>(e) &#123;</span><br><span class="line">    console.log(e.state);</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;)();</span><br></pre></td></tr></table></figure>
<h2 id="4、-geolocation-devicemotion"><a href="#4、-geolocation-devicemotion" class="headerlink" title="4、 geolocation devicemotion"></a><font color="#F33F50">4、 geolocation devicemotion</font></h2><h3 id="geolocation"><a href="#geolocation" class="headerlink" title="geolocation"></a>geolocation</h3><p>window.navigator.geolocation</p>
<h4 id="1、getCurrentPosition-s-e-p"><a href="#1、getCurrentPosition-s-e-p" class="headerlink" title="1、getCurrentPosition(s, e, p)"></a>1、getCurrentPosition(s, e, p)</h4><p>navigator.geolocation.getCurrentPosition(success成功回调函数, error失败回调函数, options可传一些参数);</p>
<ul>
<li><p>p 配置参数对象<br>enableHighAccurary 是否需要高精度位置，默认为false。<br>timeout 单位ms，请求超时时间，默认infinity。<br>maximumAge 单位ms，位置信息过期时间，设置为0就无条件获取新的地理位置信息，默认为0.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">* 需要fq，successFn -&gt; pos</span><br><span class="line">  Geoposition &#123;</span><br><span class="line">    coords: Coordonate &#123;</span><br><span class="line">      accuracy: 14988703,      // 精确度（米）</span><br><span class="line">      altitude: null,          // 海拔</span><br><span class="line">      altitudeAccuracy: null,  // 海拔精确度</span><br><span class="line">      heading: null,           // 航向（方向）</span><br><span class="line">      latitude: 37.09024,      // 维度</span><br><span class="line">      longitude: =95.712891,   // 经度</span><br><span class="line">      speed: null,             // 速度</span><br><span class="line">      __proto__: Coordinate</span><br><span class="line">    &#125;,</span><br><span class="line">    timeStamp: 1500862907040,</span><br><span class="line">    __proto__: Geoposition</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">没fq：获取您的位置【允许】【禁止】</span><br><span class="line">  允许：</span><br><span class="line">      PositionError &#123;</span><br><span class="line">        code: 2,</span><br><span class="line">        message: <span class="string">"NetWork location provider at 'https://www.googleapis.com/': No response received"</span></span><br><span class="line">      &#125;</span><br><span class="line">  禁止：</span><br><span class="line">      PositionError &#123;</span><br><span class="line">        code: 1,</span><br><span class="line">        message: <span class="string">"User denied Geolocation"</span></span><br><span class="line">      &#125;</span><br><span class="line">  超时：</span><br><span class="line">      PositionError &#123;</span><br><span class="line">        code: 3,</span><br><span class="line">        message: <span class="string">"Timeout expired"</span></span><br><span class="line">      &#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h4 id="2、watchPosition-s-e-p"><a href="#2、watchPosition-s-e-p" class="headerlink" title="2、watchPosition(s, e, p);"></a>2、watchPosition(s, e, p);</h4><p>const id = navigator.geolocation.watchPosition(s, e, p);<br>持续定期的自动获取用户的当前地理位置信息，并同计时器一样有个位置标识。<br>可以连续获取，利用canvas点连线做成图，做成运动轨迹。</p>
<h4 id="3、clearWatch"><a href="#3、clearWatch" class="headerlink" title="3、clearWatch"></a>3、clearWatch</h4><p>navigator.geolocation.clearWatch(id);<br>停止获取位置信息</p>
<h3 id="devicemotion"><a href="#devicemotion" class="headerlink" title="devicemotion"></a>devicemotion</h3><p>提供设备的加速度信息，表示为定义在设备上的坐标系中的笛卡尔坐标，其还提供了设备在坐标系中的自转速率。<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">window.addEventListener(<span class="string">'devicemotion'</span>, e =&gt; console.log(e));</span><br><span class="line"></span><br><span class="line">DeviceMotionEvent &#123;</span><br><span class="line">  acceleration: DeviceAcceleration,                 // 重力加速度</span><br><span class="line">  accelerationIncludingGravity: DeviceAcceleration, // 重力加速度（包括中心引力）</span><br><span class="line">  rotationRate: DeviceRotation,                     // 旋转速率（需要陀螺仪支持）rotationRate(alpha, beta, gamma) </span><br><span class="line">  interval: 0,                                      // 获取时间间隔</span><br><span class="line">  <span class="built_in">type</span>: <span class="string">'devicemotion'</span></span><br><span class="line">  ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>摇一摇，摇到外婆桥<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line">&lt;style&gt;</span><br><span class="line">   <span class="comment">#ball &#123;</span></span><br><span class="line">     position: relative;</span><br><span class="line">     width: 20px;</span><br><span class="line">     height: 20px;</span><br><span class="line">     border-radius: 50%;</span><br><span class="line">     background: rgb(72, 25, 133);</span><br><span class="line">   &#125;</span><br><span class="line"> &lt;/style&gt;</span><br><span class="line"> &lt;div id=<span class="string">"ball"</span>&gt;&lt;/div&gt;</span><br><span class="line"> &lt;div id = <span class="string">'cal'</span>&gt;&lt;/div&gt;</span><br><span class="line"> &lt;script&gt;</span><br><span class="line">   var shakeThreshold = 15;</span><br><span class="line">   var lastUpdate = 0;</span><br><span class="line">   var lastX=0;</span><br><span class="line">   var lastY=0;</span><br><span class="line">   var lastZ=0;</span><br><span class="line">   <span class="keyword">function</span> deviceMotionHandler(eventData) &#123;</span><br><span class="line">     var acceleration = eventData.accelerationIncludingGravity;</span><br><span class="line">     var curTime = (new Date()).getTime();</span><br><span class="line">     <span class="keyword">if</span> (curTime - lastUpdate &gt; 300) &#123;</span><br><span class="line">       var diffTime = curTime;</span><br><span class="line">       var x = acceleration.x;</span><br><span class="line">       var y = acceleration.y;</span><br><span class="line">       var z = acceleration.z;</span><br><span class="line">       var speed = Math.abs(x + y + z - lastX -lastY - lastZ);</span><br><span class="line"></span><br><span class="line">       <span class="keyword">if</span> (speed &gt; shakeThreshold) &#123;</span><br><span class="line">         var oDiv = document.getElementById(<span class="string">'ball'</span>);</span><br><span class="line">         var oCal = document.getElementById(<span class="string">'cal'</span>);</span><br><span class="line">         oCal.innerHTML = `<span class="variable">$&#123;oDiv.offsetLeft&#125;</span>, <span class="variable">$&#123;window.screen.width&#125;</span>, <span class="variable">$&#123;oDiv.offsetTop&#125;</span>, <span class="variable">$&#123;window.screen.height&#125;</span>`;</span><br><span class="line">         oDiv.style.left = (oDiv.offsetLeft &gt; window.screen.width) ? 0 : (oDiv.offsetLeft + speed/4 + <span class="string">'px'</span>);</span><br><span class="line">         oDiv.style.top = (oDiv.offsetTop &gt; window.screen.height) ? 0 : (oDiv.offsetTop + speed/4 + <span class="string">'px'</span>);</span><br><span class="line">         // oDiv.style.left = oDiv.offsetLeft + speed + <span class="string">'px'</span>;</span><br><span class="line">         // oDiv.style.top = oDiv.offsetTop + speed + <span class="string">'px'</span>;</span><br><span class="line">       &#125;</span><br><span class="line">       lastX = x;</span><br><span class="line">       lastY = y;</span><br><span class="line">       lastZ = z;</span><br><span class="line">     &#125;</span><br><span class="line">   &#125;</span><br><span class="line">   <span class="keyword">if</span> (window.DeviceMotionEvent) &#123;</span><br><span class="line">     window.addEventListener(<span class="string">'devicemotion'</span>, deviceMotionHandler, <span class="literal">false</span>);</span><br><span class="line">   &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">     document.getElementById(<span class="string">'domEvent'</span>).innerHTML = <span class="string">'Not supported on your device.'</span>;</span><br><span class="line">   &#125;</span><br><span class="line"> &lt;/script&gt;</span><br></pre></td></tr></table></figure></p>
<h2 id="5、-drag-amp-drop-FileReader-WebSocket"><a href="#5、-drag-amp-drop-FileReader-WebSocket" class="headerlink" title="5、 drag &amp; drop FileReader WebSocket"></a><font color="#F33F50">5、 drag &amp; drop FileReader WebSocket</font></h2><h3 id="1）-drag-amp-drop"><a href="#1）-drag-amp-drop" class="headerlink" title="1） drag &amp; drop"></a>1） drag &amp; drop</h3><ul>
<li><p>常用于各种拖动操作中<br>创建可拖动元素</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;div draggable=&quot;true&quot;&gt;&lt;/div&gt;</span><br></pre></td></tr></table></figure>
</li>
<li><p>拖动的相关事件<br>dragstart 被拖动元素开始被拖动时触发<br>dragend   被拖动元素完成时触发<br>dragenter 被拖动元素进入目标元素<br>dragover  被拖动元素在目标元素上移动<br>drop      被拖动元素和鼠标在目标元素上同时鼠标放开时触发（*需阻止dragover的默认行为才会触发 e.preventDefault）</p>
<p>e.dataTransfer.setData(attr, value’);<br>e.dataTransfer.getData(attr);</p>
</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">&lt;style&gt;</span><br><span class="line">  <span class="comment">#ball1 &#123;</span></span><br><span class="line">    position: relative;</span><br><span class="line">    width: 40px;</span><br><span class="line">    height: 40px;</span><br><span class="line">    border-radius: 50%;</span><br><span class="line">    background: rgb(72, 25, 133);</span><br><span class="line">  &#125;</span><br><span class="line">&lt;/style&gt;</span><br><span class="line">&lt;div id=<span class="string">"ball1"</span> draggable=<span class="string">"true"</span>&gt;&lt;/div&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">  var oBall1 = document.getElementById(<span class="string">'ball1'</span>);</span><br><span class="line">  oBall1.addEventListener(<span class="string">'dragstart'</span>, (e) =&gt; &#123;</span><br><span class="line">    e.dataTransfer.setData(<span class="string">'text'</span>, <span class="string">'测试'</span>);</span><br><span class="line">    console.log(<span class="string">'dragstart'</span>);</span><br><span class="line">  &#125;);</span><br><span class="line">  oBall1.addEventListener(<span class="string">'dragend'</span>, (e) =&gt; &#123;</span><br><span class="line">    console.log(<span class="string">'dragend'</span>, e.dataTransfer.getData(<span class="string">'text'</span>));</span><br><span class="line">  &#125;);</span><br><span class="line">  oBall1.addEventListener(<span class="string">'dragover'</span>, (e) =&gt; &#123;</span><br><span class="line">    e.preventDefault();</span><br><span class="line">    console.log(<span class="string">'dragover'</span>);</span><br><span class="line">  &#125;);</span><br><span class="line">  oBall1.addEventListener(<span class="string">'dragenter'</span>, () =&gt; &#123;</span><br><span class="line">    console.log(<span class="string">'dragenter'</span>);</span><br><span class="line">  &#125;);</span><br><span class="line">  oBall1.addEventListener(<span class="string">'drop'</span>, (e) =&gt; &#123;</span><br><span class="line">    console.log(<span class="string">'drop'</span>, e.dataTransfer.getData(<span class="string">'text'</span>));</span><br><span class="line">  &#125;);</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>
<h4 id="拖拽上传文件"><a href="#拖拽上传文件" class="headerlink" title="拖拽上传文件"></a>拖拽上传文件</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">oBall1.addEventListener(&apos;dragover&apos;, (e) =&gt; &#123;</span><br><span class="line">  e.preventDefault();</span><br><span class="line">  console.log(&apos;dragover&apos;);</span><br><span class="line">&#125;);</span><br><span class="line">oBall1.addEventListener(&apos;dragenter&apos;, () =&gt; &#123;</span><br><span class="line">  console.log(&apos;dragenter&apos;);</span><br><span class="line">&#125;);</span><br><span class="line">oBall1.addEventListener(&apos;drop&apos;, (e) =&gt; &#123;</span><br><span class="line">  e.preventDefault();</span><br><span class="line">  console.log(e.dataTransfer.files, &apos;123&apos;);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">FileList &#123;</span><br><span class="line">  0: File &#123;</span><br><span class="line">    lastModified: 1595569605192</span><br><span class="line">    lastModifiedDate: Fri Jul 24 2020 13:46:45 GMT+0800 (中国标准时间) &#123;&#125;</span><br><span class="line">    name: &quot;1.png&quot;</span><br><span class="line">    size: 158520</span><br><span class="line">    type: &quot;image/png&quot;</span><br><span class="line">    webkitRelativePath: &quot;&quot;</span><br><span class="line">    __proto__: File</span><br><span class="line">  &#125;,</span><br><span class="line">  length: 1</span><br><span class="line">  __proto__: FileList</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="demo"><a href="#demo" class="headerlink" title="demo"></a>demo</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line">&lt;style&gt;</span><br><span class="line">  <span class="comment">#ball2,  #ball3, .ball4 &#123;</span></span><br><span class="line">    position: relative;</span><br><span class="line">    width: 40px;</span><br><span class="line">    height: 40px;</span><br><span class="line">    border-radius: 50%;</span><br><span class="line">    background-color: rgb(133, 59, 25);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">#ball2 &#123;</span></span><br><span class="line">    background-color: rgb(72, 25, 133);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">#ball3 &#123;</span></span><br><span class="line">    background-color: rgb(25, 108, 133);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">#bow &#123;</span></span><br><span class="line">    position: relative;</span><br><span class="line">    width: 400px;</span><br><span class="line">    height: 400px;</span><br><span class="line">    border: 1px solid rgb(72, 25, 133);</span><br><span class="line">  &#125;</span><br><span class="line">&lt;/style&gt;</span><br><span class="line"></span><br><span class="line">&lt;div id=<span class="string">"ball2"</span> draggable=<span class="string">"true"</span>&gt;&lt;/div&gt;</span><br><span class="line">&lt;div id=<span class="string">"ball3"</span> draggable=<span class="string">"true"</span>&gt;&lt;/div&gt;</span><br><span class="line">&lt;div class=<span class="string">"ball4"</span> draggable=<span class="string">"true"</span>&gt;&lt;/div&gt;</span><br><span class="line"></span><br><span class="line">&lt;div id=<span class="string">"bow"</span>&gt;快到碗里来&lt;/div&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">  const oBow = document.getElementById(<span class="string">'bow'</span>);</span><br><span class="line"></span><br><span class="line">  window.addEventListener(<span class="string">'dragstart'</span>, (e) =&gt; &#123;</span><br><span class="line">    console.log(<span class="string">'123'</span>);</span><br><span class="line">    e.dataTransfer.setData(<span class="string">'domID'</span>, e.target.id);</span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line">  oBow.addEventListener(<span class="string">'dragover'</span>, (e) =&gt; &#123;</span><br><span class="line">    e.preventDefault();</span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line">  oBow.addEventListener(<span class="string">'drop'</span>, (e) =&gt; &#123;</span><br><span class="line">    e.preventDefault();</span><br><span class="line">    const id = e.dataTransfer.getData(<span class="string">'domID'</span>);</span><br><span class="line">    <span class="keyword">if</span> (id) &#123;</span><br><span class="line">      const oDom = document.getElementById(id);</span><br><span class="line">      oBow.appendChild(oDom);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;);</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>
<h3 id="2）-FileReader-用于读取文件"><a href="#2）-FileReader-用于读取文件" class="headerlink" title="2） FileReader 用于读取文件"></a>2） FileReader 用于读取文件</h3><ol>
<li><p>FileReader的方法<br>abort() 终止读取<br>readAsBinaryString(file) 将文件读取为二进制编码<br>readAsDataURL(file)  将文件读取为DataURL编码<br>readAsText(file, []encoding) 将文件读取为文本<br>readAsArrayBuffer(file) 将文件读取为arraybuffer</p>
</li>
<li><p>FileReader的事件<br>onloadstart 读取开始时触发<br>onprogress 读取中<br>onloadend 读取完成时触发（无论成功失败）<br>onload 文件读取成功完成时触发<br>onabort 中断时触发<br>onerror 出错时触发</p>
</li>
<li><p>获取读取的结果<br>fr.onload = function(){this.result;}</p>
</li>
</ol>
<h4 id="demo-读取文件"><a href="#demo-读取文件" class="headerlink" title="demo: 读取文件"></a>demo: 读取文件</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br></pre></td><td class="code"><pre><span class="line">&lt;form action=<span class="string">'#'</span>&gt;</span><br><span class="line">    &lt;filedset&gt;</span><br><span class="line">      &lt;legend&gt;读取文件&lt;/legend&gt;</span><br><span class="line">      &lt;input <span class="built_in">type</span>=<span class="string">'file'</span> id=<span class="string">'File'</span> /&gt;</span><br><span class="line">      &lt;input <span class="built_in">type</span>=<span class="string">'button'</span> value=<span class="string">'中断'</span> id=<span class="string">'Abort'</span> /&gt;</span><br><span class="line">      &lt;p&gt;</span><br><span class="line">        &lt;lable&gt;读取进度：&lt;/lable&gt;</span><br><span class="line">        &lt;progress id=<span class="string">'Progress'</span> value=<span class="string">'0'</span> max=<span class="string">'100'</span>&gt;&lt;/progress&gt;</span><br><span class="line">      &lt;/p&gt;</span><br><span class="line">    &lt;/filedset&gt;</span><br><span class="line">  &lt;/form&gt;</span><br><span class="line">  &lt;!-- 文件读取模块 --&gt;</span><br><span class="line">  &lt;script&gt;</span><br><span class="line">    var FileLoader = <span class="keyword">function</span> (file, events) &#123;</span><br><span class="line">      this.reader = new FileReader(); //传建一个FileREader对象</span><br><span class="line">      this.file = file;</span><br><span class="line">      this.loaded = 0;</span><br><span class="line">      this.total = file.size;</span><br><span class="line">      this.step = 1024*1024; //每次读取1M</span><br><span class="line">      this.events = events || &#123;&#125;;</span><br><span class="line">      this.readBlob(0);  // 读取第一块</span><br><span class="line">      this.bindEvent();</span><br><span class="line">    &#125;;</span><br><span class="line">    FileLoader.prototype = &#123;</span><br><span class="line">      bindEvent: <span class="keyword">function</span>(events) &#123;</span><br><span class="line">        var _this = this;</span><br><span class="line">        var reader = this.reader;</span><br><span class="line">        reader.onload = <span class="keyword">function</span>(e)&#123;</span><br><span class="line">          _this.onLoad();</span><br><span class="line">        &#125;;</span><br><span class="line">        reader.onprogress = <span class="keyword">function</span>(e) &#123;</span><br><span class="line">          _this.onProgress(e.loaded);</span><br><span class="line">        &#125;;</span><br><span class="line">        // start，abort，error回调暂时不加</span><br><span class="line">      &#125;,</span><br><span class="line">      onLoad: <span class="function"><span class="title">function</span></span>() &#123;</span><br><span class="line">        var handler = this.events.load;</span><br><span class="line">        handler &amp;&amp; handler(this.reader.result); // 应该在这里发送读取的数据</span><br><span class="line">        console.log(this.loaded, this.total, <span class="string">'🍉'</span>);</span><br><span class="line">        <span class="keyword">if</span>(this.loaded &lt; this.total) &#123; // 如果未读取完毕则继续读取</span><br><span class="line">          this.readBlob(this.loaded);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">          this.loaded = this.total;</span><br><span class="line">          this.events.success &amp;&amp; this.events.success();</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;,</span><br><span class="line">      onProgress: <span class="keyword">function</span>(loaded) &#123;</span><br><span class="line">        var parent;</span><br><span class="line">        var handler = this.events.progress;</span><br><span class="line">        this.loaded += loaded;</span><br><span class="line">        percent = (this.loaded / this.total) * 100;</span><br><span class="line">        handler &amp;&amp; handler(percent);</span><br><span class="line">      &#125;,</span><br><span class="line">      readBlob: <span class="keyword">function</span> (start) &#123; // 读取文件内容</span><br><span class="line">        var blob, file = this.file;</span><br><span class="line">        <span class="keyword">if</span> (file.slice) &#123;</span><br><span class="line">          blob = file.slice(start, start + this.step);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">          blob = file;</span><br><span class="line">        &#125;</span><br><span class="line">        this.reader.readAsText(blob);</span><br><span class="line">      &#125;,</span><br><span class="line">      abort: <span class="function"><span class="title">function</span></span>() &#123;</span><br><span class="line">        var reader = this.reader;</span><br><span class="line">        <span class="keyword">if</span> (reader) &#123;</span><br><span class="line">          reader.abort();</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &lt;/script&gt;</span><br><span class="line">  &lt;script&gt;</span><br><span class="line">    var progress = document.getElementById(<span class="string">'Progress'</span>);</span><br><span class="line">    var events = &#123;</span><br><span class="line">      load: <span class="function"><span class="title">function</span></span>()&#123;console.log(<span class="string">'loaded'</span>);&#125;,</span><br><span class="line">      progress: <span class="keyword">function</span>(percent)&#123;console.log(percent);progress.value=percent;&#125;,</span><br><span class="line">      success:  <span class="function"><span class="title">function</span></span>()&#123;console.log(<span class="string">'success'</span>);&#125;</span><br><span class="line">    &#125;;</span><br><span class="line">    var loader;</span><br><span class="line">    // 选择好要上传的文件后，触发onchange事件</span><br><span class="line">    document.getElementById(<span class="string">'File'</span>).onchange = <span class="keyword">function</span> (e) &#123;</span><br><span class="line">      var file = this.files[0];</span><br><span class="line">      console.log(<span class="string">'首选获取文件：'</span>, file);</span><br><span class="line"></span><br><span class="line">      loader = new FileLoader(file, events);</span><br><span class="line">    &#125;;</span><br><span class="line">    document.getElementById(<span class="string">'Abort'</span>).onclick = <span class="function"><span class="title">function</span></span>() &#123;</span><br><span class="line">      loader.abort();</span><br><span class="line">    &#125;</span><br><span class="line">  &lt;/script&gt;</span><br></pre></td></tr></table></figure>
<h3 id="3）-WebSocket"><a href="#3）-WebSocket" class="headerlink" title="3） WebSocket"></a>3） WebSocket</h3><ul>
<li><p>WebSocket 对象提供一组API，用于创建和管理WebSocket连接，以及通过连接发送和接收数据。<br>新协议，为了兼容现有浏览器的握手规范，借用了HTTP的协议完成握手，跟HTTP协议基本没有关系。</p>
</li>
<li><p>产生原因：</p>
<pre><code>在HTTP 1.0中，大多实现为每个请求/响应交换使用新的连接
在HTTP 1.1中，一个连接可用于一次或多次请求/响应交换
HTTP协议中，服务器端不能主动联系客户端，只能由客户端发起请求。
webSocket中，服务器端和客户端均可主动发送数据。
</code></pre></li>
<li><p>建立连接的握手：当web应用程序调用new WebSocket(url)接口时，Browser就开始与地址url的WebSocket建立握手连接的过程。</p>
<ol>
<li>Browser与WebSocket服务器通过TCP握手建立连接，如果这个建立连接失败，那么后面过程就不会执行，Web应用程序将收到错误消息通知。</li>
<li>在TCP建立成功连接后，Browser通过http协议传送WebSocket支持的版本号，协议的字版本号，原始地址、主机地址的等一系列字段给服务器端。</li>
<li>WebSocket服务器收到Browser发送来的请求后，如果数据包内容和格式正确，服务端和客户端的协议版本号匹配等等，就接受本次握手连接，并给出去相应的数据回复。同样回复的数据包也采用http协议传输。</li>
<li>Browser收到服务器回复的数据包后，如果数据包内容和格式都没有问题，就表示本次连接成功，触发onopen消息，此时web开发者就可以在此时通过WebSocket的send接口向服务器发送数据。否则，握手连接失败，Web应用程序会受到onerror消息，并且能知道连接失败的原因。</li>
</ol>
</li>
<li><p>三次握手</p>
<ol>
<li>建立连接时，客户端A发送SYN包（SYN=j）到服务器B，进入SYN_SEND状态，等待B确认。 （Synchronize Sequence Numbers）</li>
<li>服务器收到SYN包，必须确认客户端A的SYN(ACK=j+1)，同时自己也发送一个SYN包（SYN=k），即SYN+ACK包，此时服务器B进入STN_RECV状态。</li>
<li>客户端A收到服务器B的SYN+ACK包，向服务器B发送确认包ACK(ACK=k+1)。此包发送完毕，客户端A和服务器B进入ESTABLISHED状态，完成三次握手。</li>
</ol>
</li>
<li><p>创建webSockt   <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">var Socket = new WebSocked(url);</span><br></pre></td></tr></table></figure></p>
<p>WebSocket方法  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Socket.send(data);   // 传输数据</span><br><span class="line">Socket.close();      // 终止任何现有连接</span><br></pre></td></tr></table></figure></p>
<p>WebSocket事件  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Socket.onopen();     // 建立socket连接时触发</span><br><span class="line">Socket.onmessage();  // 客户端从服务器接收数据时触发</span><br><span class="line">Socket.onerror();    // 连接发生错误时触发</span><br><span class="line">Socket.onclose();    // 连接关闭时触发</span><br></pre></td></tr></table></figure></p>
</li>
<li><p>WebSocket的优点<br>客户端与服务器都可以主动传送数据给对方。<br>不用频繁创建TCP请求及销毁请求，减少网络带宽资源占用，同时也节省服务器资源。</p>
</li>
<li><p>demo</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">// WeebSocket.org提供了一个专门用来测试WebSocket的服务器ws://echo.websocket.org/</span><br><span class="line">var socket = new WebSocket(<span class="string">'ws://echo.websocket.org/'</span>);</span><br><span class="line">socket.onopen=<span class="keyword">function</span>(e)&#123;</span><br><span class="line">  socket.send(<span class="string">'Test!'</span>, e);</span><br><span class="line">  socket.close();</span><br><span class="line">&#125;;</span><br><span class="line">socket.onclose=<span class="keyword">function</span>(e) &#123;</span><br><span class="line">  console.log(<span class="string">'close'</span>, e);</span><br><span class="line">&#125;;</span><br><span class="line">socket.onerror=<span class="function"><span class="title">function</span></span>()&#123;</span><br><span class="line">  console.log(<span class="string">'error'</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h2 id="6、-离线缓存应用"><a href="#6、-离线缓存应用" class="headerlink" title="6、 离线缓存应用"></a><font color="#F33F50">6、 离线缓存应用</font></h2><h3 id="1）MVC"><a href="#1）MVC" class="headerlink" title="1）MVC"></a>1）MVC</h3><p>M 模型 Model 代表业务数据和业务逻辑。封装数据操作，通知控制器调用视图部分将数据更新。一个模型能为多个数据提供数据，提高了应用的可重用性。<br>V 视图 View 显示模型数据，接收用户的输入并发送给控制器，但是它并不进行任何实际的业务处理。<br>C 控制器 Control 通过view来接收用户输入，之后利用Model来处理用户输入，最后把结果返回给view。Control就是View和Model之间的一个协调者，控制者。</p>
<h3 id="2）涉及的H5技术"><a href="#2）涉及的H5技术" class="headerlink" title="2）涉及的H5技术"></a>2）涉及的H5技术</h3><ul>
<li>Local storage &amp; session storage 键值对存储数据</li>
<li>Application Cache 本地缓存应用所需的文件</li>
<li>Web SQL 关系数据库</li>
</ul>
<h4 id="1-Web-存储"><a href="#1-Web-存储" class="headerlink" title="1. Web 存储"></a>1. Web 存储</h4><p>local Storage，没有时间限制的数据存储<br>session Storage，针对一个session的数据存储</p>
<h4 id="2-Application-Cache"><a href="#2-Application-Cache" class="headerlink" title="2. Application Cache"></a>2. Application Cache</h4><p>应用程序缓存（Application Cache），用户缓存web应用的部分资源，从而达到没有互联网的情况下也可以进行访问。</p>
<p>优势： 离线浏览，用户可在应用里不连接网络时使用它们<br>      速度，已缓存资源的加载速度更快<br>      减少服务器负载，浏览器将只从服务器下载更新过或更改过的资源</p>
<p>浏览器上只需要设置：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;html manifest=&apos;demo.cache&apos;&gt;&lt;/html&gt;</span><br></pre></td></tr></table></figure></p>
<p>Mainfest文件可分为三部分：<br>CACHE MANIFEST 在首次下载后进行缓存<br>NETWORK        需要与服务器连接，且不会被缓存<br>FALLBACK       当页面无法访问时的回退页面（比如404页面）</p>
<p>服务器端需维护一个mainfest清单<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">CACHE MANIFEST:</span><br><span class="line"><span class="comment"># 2016-11-13 v1.0.0 注释</span></span><br><span class="line">theme.css</span><br><span class="line">logo.giff</span><br><span class="line">main.js</span><br><span class="line"></span><br><span class="line">NETWORK:(*)</span><br><span class="line">login.png</span><br><span class="line"></span><br><span class="line">FALLBACK:</span><br><span class="line">*.html/404.html</span><br></pre></td></tr></table></figure></p>
<p>配置正确的MIME-type：mainfest文件需配置正确的MIME-type,即“text/cache-mainfest”，必须在Web服务器上进行配置，同服务器不一样。</p>
<h4 id="3-Web-SQL"><a href="#3-Web-SQL" class="headerlink" title="3. Web SQL"></a>3. Web SQL</h4><ol>
<li><p>openDatabase<br>使用现有数据库或新建数据库来创建数据库对象。<br>openDatabase(“APP”, “1.0”, “Not the FT Web App”, (5<em>1024</em>1024));<br>数据库名称   数据库版本号     对数据库的描述     数据库存储大小  回调函数（可选）</p>
</li>
<li><p>transaction<br>这个方法允许我们根据情况控制事务提交或回滚。<br>smallDatabase.transaction(querysql, errorCallback, successCallback);<br>包含事务内容的一个方法（querysql中任何一句sql语句出错，都会回滚），<br>出错回调函数（可选），成功回调函数（可选）。</p>
</li>
<li><p>executeSql<br>用于执行SQL查询。<br>tx.executeSql(query, data[],innerSuccessCallback, errorCallback);<br>表示查询的字符串，使用的SQL语言是SQLite 3.6.19（必选），<br>插入到查询中问号所在处的字符串数据（可选），<br>成功时执行的回调函数，返回两个参数：tx和执行的结果（可选），<br>失败时执行的回调函数（可选）。</p>
</li>
</ol>
<h3 id="3）-离线缓存应用"><a href="#3）-离线缓存应用" class="headerlink" title="3） 离线缓存应用"></a>3） 离线缓存应用</h3><h4 id="实现流程"><a href="#实现流程" class="headerlink" title="实现流程"></a>实现流程</h4><ol>
<li><p>创建一个本地数据库 &amp; 建表</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">smallDatabase = openDatabase(&quot;APP&quot;, &quot;1.0&quot;, &quot;Not The FT Web App&quot;, (5*1024*1024));</span><br><span class="line"></span><br><span class="line">smallDatabase.transaction(function(tx)&#123;</span><br><span class="line">  for(i=0, l=data.length; i&lt;l; i++) &#123;</span><br><span class="line">    tx.executeSql(query, data[i], innerSuccessCallback, errorCallback);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
</li>
<li><p>显示逻辑<br>建库建表后，绑定hashChange事件，加载主体结构（主标题和#body标签），移除loading。</p>
<blockquote>
<p>绑定hashChange事件<br>1）!hash，装载页面，查询数据，显示文章列表，设置刷新功能。<br>调用template.home将刷新按钮和headlines标签装载在#body标签中，调用articlesController.showArticleList在表中找到所有的id，headline，author，date，成功后调用templates.articleList显示在headline中。<br>点击刷新按钮，如果在线，请求接口（articleController.synchronizeWithServer），删除旧数据（article.deleteArticles）把返回来的新数据插入表中（article.insertAritcles），成功后更新首页文章列表（templates.articleList）。如果离线，则给出提示（offlineWarning），不刷新数据。</p>
<p>2）如果hash &amp;&amp; hash&gt;0,则显示对应的文章详情。<br>  articlesController.showArticle(id) -&gt; article.selectFullArticles -&gt; database.runQuery(“SELECT id, headline, date, author, body FROM articles WHERE id=?”…) -&gt; #body templates.article(article)</p>
<p>3） 如果hash &amp;&amp; hash&gt;0,则提示未找到相应的页面(pageNotFound)。</p>
</blockquote>
</li>
</ol>
<h4 id="SQL-语句"><a href="#SQL-语句" class="headerlink" title="SQL 语句"></a>SQL 语句</h4><p>CREATE TABLE IF NOT EXISTS articles (id INTEGER PRIMARY KEY ASC, date TIMESTAMP, author TEXT, headline TEXT, body TEXT)<br>DELETE FROM ARTICLES<br>INSERT INTO articles (id, date, headline, author, body) VALUES (?, ?, ?, ?, ?)<br>SELECT id, headline, date, author, body FROM articles WHERE id=?<br>DROP TABLE articles</p>
<!-- 
  一级 #DC143C
  二级 #F33F50

  显色 #FC5603
-->
          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/"><i class="fa fa-angle-left"></i></a><a class="page-number" href="/">1</a><span class="page-number current">2</span>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      

      <section class="site-overview-wrap sidebar-panel sidebar-panel-active">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <img class="site-author-image" itemprop="image" src="/images/background2.jpg" alt="Lemon">
            
              <p class="site-author-name" itemprop="name">Lemon</p>
              <p class="site-description motion-element" itemprop="description">乘风破浪</p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives">
              
                  <span class="site-state-item-count">16</span>
                  <span class="site-state-item-name">日志</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-categories">
                <a href="/categories/index.html">
                  <span class="site-state-item-count">4</span>
                  <span class="site-state-item-name">分类</span>
                </a>
              </div>
            

          </nav>

          

          

          
          

          
          

          

        </div>
      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2021</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Lemon</span>

  
</div>


  <div class="powered-by">由 <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a> 强力驱动</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">主题 &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Pisces</a> v5.1.4</div>




        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.1.4"></script>



  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script>



  


  




	





  





  












  





  

  

  

  
  

  

  

  

</body>
</html>
